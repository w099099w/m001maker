window.__require=function t(e,n,o){function i(r,c){if(!n[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){return i(e[r][1][t]||t)},l,l.exports,t,e,n,o)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({Action:[function(t,e,n){"use strict";cc._RF.push(e,"25c603VNYtA2oSVh9X9rs/1","Action");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,c=s.length;r<c;r++,i++)o[i]=s[r];return o};Object.defineProperty(n,"__esModule",{value:!0}),n.Action=void 0;var i=function(){function t(){this.ActionData=function(t,e){this.This=t,this.callBack=e},this.callList=[]}return t.prototype.AddListenner=function(t,e,n){if(void 0===n&&(n=!0),t&&e)if(n)this.callList.push(new this.ActionData(t,e));else{for(var o=0,i=this.callList;o<i.length;o++)if(i[o].callBack==e)return;this.callList.push(new this.ActionData(t,e))}},t.prototype.RemoveListenner=function(t){for(var e=0;e<this.callList.length;e++)if(this.callList[e]&&this.callList[e].callBack){if(t===this.callList[e].callBack)return this.callList.splice(e,1),!0}else this.callList.splice(e,1),e--;return!1},t.prototype.Log=function(){this.callList.forEach(function(t){console.log(t)})},t.prototype.Clear=function(){this.callList=[]},t.prototype.Invoke=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.callList.forEach(function(e){var n;e&&e.callBack&&(n=e.callBack).call.apply(n,o([e.This],t))})},t.prototype.RemoveInvalidCallBack=function(){for(var t=0,e=0;e<this.callList.length;e++)this.callList[e].This&&this.callList[e].callBack||(this.callList.splice(e,1),t++,e--);return t},t}();n.Action=i,cc._RF.pop()},{}],AlertMenuButton:[function(t,e,n){"use strict";cc._RF.push(e,"86401uZUthGqI25GpyFpT2j","AlertMenuButton");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../UIButton"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),s([a,u("GameUI/AlertMenu/AlertMenuButton")],e)}(r.default);n.default=l,cc._RF.pop()},{"../UIButton":"UIButton"}],AlertMenuConfig:[function(t,e,n){"use strict";cc._RF.push(e,"bf57f/dholJeoMDMtIASMAF","AlertMenuConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],AlertMenu_OKCancel:[function(t,e,n){"use strict";cc._RF.push(e,"6de18Yurd9N5LUTBDD/LL8a","AlertMenu_OKCancel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./AlertMenu_Single"),c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),s([a],e)}(r.default));n.default=u,cc._RF.pop()},{"./AlertMenu_Single":"AlertMenu_Single"}],AlertMenu_Single:[function(t,e,n){"use strict";cc._RF.push(e,"cab54xLFXpDZYWA9liQXXOP","AlertMenu_Single");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../UIBase"),c=t("./AlertMenuButton"),a=cc._decorator,u=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.lb_Message=null,e.okCB=null,e.buttons=null,e}return i(e,t),e.prototype.SetMessageColor=function(t){this.lb_Message.node.color=cc.color().fromHEX(t)},e.prototype.SetBG=function(t){this.bg.spriteFrame=t},e.prototype.SetButtonSkin=function(t){if(t)for(var e=0;e<this.buttons.length;e++)this.buttons[e].setGraphc(t[e])},e.prototype.Init=function(t){var e=this;this.Show(!1);var n=this.getComponentsInChildren(c.default);this.buttons=n;for(var o=function(o){var s=o;n[o].Click.AddListenner(i,function(){var o,i;t.OnButtonClick(n[s]),null===(i=(o=e.okCB)[s])||void 0===i||i.call(o)})},i=this,s=0;s<n.length;s++)o(s)},e.prototype.ShowMessage=function(t,e){this.lb_Message.string=t,this.okCB=e,this.Show(!0)},s([l(cc.Sprite)],e.prototype,"bg",void 0),s([l(cc.Label)],e.prototype,"lb_Message",void 0),s([u],e)}(r.default);n.default=p,cc._RF.pop()},{"../UIBase":"UIBase","./AlertMenuButton":"AlertMenuButton"}],AlertMenu:[function(t,e,n){"use strict";cc._RF.push(e,"0724817YLNK4q035sacFkxf","AlertMenu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AlertButtonArgs=n.AlertMenuArgs=n.AlertMenuType=void 0;var r,c=t("../Assets/AssetManager"),a=t("../Assets/Assets"),u=t("../GameMenu"),l=t("../UIManager"),p=t("./AlertMenu_OKCancel");(function(t){t[t.SingleButton=0]="SingleButton",t[t.OKCancle=1]="OKCancle"})(r=n.AlertMenuType||(n.AlertMenuType={}));var h=function(){function t(t){void 0===t&&(t=r.OKCancle),this.type=r.SingleButton,this.callBack=[],this.title="",this.message="",this.type=t}return Object.defineProperty(t.prototype,"Title",{get:function(){return this.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Message",{get:function(){return this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this.type},enumerable:!1,configurable:!0}),t.prototype.AddCallBack=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.callBack).push.apply(t,e),this},t.prototype.SetTitle=function(t){return this.title=t,this},t.prototype.SetMessage=function(t){return this.message=t,this},t.prototype.GetCallBack=function(){return this.callBack},t}();n.AlertMenuArgs=h;n.AlertButtonArgs=function(){this.CallBack=null};var f=cc._decorator,d=f.ccclass,m=(f.property,f.menu),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e.alertOkCancel=null,e}return i(e,t),e.prototype.SetSkin=function(t){if(this.config!=t){var e=[];e[0]=c.default.Instance.GetAsset(t.btn_ok,a.AssetType.Image),e[1]=c.default.Instance.GetAsset(t.btn_cancel,a.AssetType.Image),this.alertOkCancel.SetBG(c.default.Instance.GetAsset(t.bg,a.AssetType.Image)),this.alertOkCancel.SetButtonSkin(e),this.alertOkCancel.SetMessageColor(t.color),this.config=t}},e.prototype.OnInit=function(){this.alertOkCancel=this.Find("alertOkCancel").getComponent(p.default),this.alertOkCancel.Init(this)},e.prototype.SetData=function(t){if(t)switch(t.Type){case r.SingleButton:this.alertOkCancel.Show(!1);break;case r.OKCancle:this.alertOkCancel.ShowMessage(t.Message,t.GetCallBack())}else this.Close()},e.Show=function(t){t&&l.default.Instance.ShowUI(l.default.AlertMenu,function(e){e&&e.SetData(t)})},e.prototype.OnButtonClick=function(){this.PlayButtonNormalSound(),this.Close()},s([d,m("GameUI/AlertMenu/AlertMenu")],e)}(u.default);n.default=g,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../GameMenu":"GameMenu","../UIManager":"UIManager","./AlertMenu_OKCancel":"AlertMenu_OKCancel"}],AnimPolt:[function(t,e,n){"use strict";cc._RF.push(e,"288ccSl4shKhYQMoKmhRIR1","AnimPolt");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a,u=t("../../../Assets/AssetManager"),l=t("../../../Assets/Assets"),p=t("../../../AudioManager"),h=t("../../../M010/common/units/M_Audio"),f=cc._decorator,d=f.ccclass,m=f.property,g=f.menu,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spineNode=null,e.plotAnim=null,e.guideAnim=null,e._spine=null,e.PoltConfig=null,e.GuideConfig=null,e.curAnimIndex=0,e.plotAudio="",e._poltAnimName="",e._guideAnimName=[],e}return i(e,t),e.prototype.setGuideAnim=function(t,e){0!==e.length&&(this._guideAnimName=t,this.guideAnim=u.default.Instance.GetAsset(e,l.AssetType.Spine))},e.prototype.setPoltAnim=function(t,e){0!==e.length&&(this._poltAnimName=t,this.plotAnim=u.default.Instance.GetAsset(e,l.AssetType.Spine))},e.prototype.onLoad=function(){this.node.getChildByName("spine")||(this.node.addChild(new cc.Node("spine")),this.node.getChildByName("spine").addComponent(sp.Skeleton)),this._spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.node.active=!1},e.prototype.setPoltAnimation=function(t,e,n){if(void 0===n&&(n=!1),t in a)switch(this._spine.setToSetupPose(),this._spine.loop=n,t){case a.GUIDE:this._spine.animation=this._guideAnimName[e];break;case a.POLT:this._spine.animation=this._poltAnimName[e]}},e.prototype.runPoltAnim=function(){return r(this,void 0,Promise,function(){var t=this;return c(this,function(){return this.PoltConfig.isEnable?(this.node.active=!0,this.spineNode.position=new cc.Vec3(0,0,0),this._spine.skeletonData=this.plotAnim,[2,new Promise(function(e){t._spine.setAnimation(0,"default",!t.PoltConfig.finishedAutoToGuide);var n=p.default.Play(u.default.Instance.GetAsset(t.plotAudio,l.AssetType.Sound));t.PoltConfig.clickStop&&t.node.on("touchend",function(){t.node.targetOff(t.node),t._spine.clearTracks(),t.node.active=!1,cc.audioEngine.stopEffect(n),e(!0)},t.node),t.PoltConfig.finishedAutoToGuide?t._spine.setCompleteListener(function(){cc.audioEngine.stopEffect(n),e(!0)}):t._spine.setCompleteListener(function(){t.PoltConfig.clickStop||t.node.on("touchend",function(){t.node.targetOff(t.node),t._spine.clearTracks(),t.node.active=!1,cc.audioEngine.stopEffect(n),e(!0)},t.node)})})]):[2]})})},e.prototype.runGuide=function(t,e){return r(this,void 0,Promise,function(){var n,o,i=this;return c(this,function(){return this.node.targetOff(this),n=!1,o=!1,[2,new Promise(function(s){i.node.active=!0,i.spineNode.active=!0,i.spineNode.position=new cc.Vec3(0,0,0),i._spine.skeletonData=i.guideAnim;var r=-1,c=function(t){t?o=!0:n=!0,n&&o&&(i.GuideConfig.finishedAutoToNextStep?a():i.GuideConfig.clickStop||i.node.on(cc.Node.EventType.TOUCH_END,a.bind(i),i))},a=function(){n=o=!1,0==t.length?(cc.audioEngine.stopEffect(r),i.node.targetOff(i),i.node.active=!1,s()):(cc.audioEngine.stopEffect(r),r=h.default.playEff(e.shift(),!1,c.bind(i,!1)),i.GuideConfig.clickStop||i.node.targetOff(i),i._spine.setAnimation(0,t.shift(),!i.GuideConfig.finishedAutoToNextStep))};i._spine.setCompleteListener(c.bind(i,!0)),r=h.default.playEff(e.shift(),!1,c.bind(i,!1)),i._spine.setAnimation(0,t.shift(),!i.GuideConfig.finishedAutoToNextStep),i.GuideConfig.clickStop&&i.node.on(cc.Node.EventType.TOUCH_END,a.bind(i),i)})]})})},e.prototype.setBgOpacity=function(t){t<0||t>255||(this.node.getChildByName("bg").opacity=t)},e.prototype.setSpineOpacity=function(){},s([m({type:cc.Node,tooltip:"\u8bbe\u7f6espine\u8282\u70b9,\u6ce8\u610fspine\u8282\u70b9\u4e3a\u5b50\u8282\u70b9,\u82e5spine\u8282\u70b9\u6e32\u67d3\u6750\u8d28\u4e3abuiltin-2d-spine-texture\u5219\u5b50\u8282\u70b9\u900f\u660e\u5ea6\u4fee\u6539\u65e0\u6548\u9700\u8c03\u7528\u7ec4\u4ef6\u65b9\u6cd5setSpineOpacity"})],e.prototype,"spineNode",void 0),s([m(sp.SkeletonData)],e.prototype,"plotAnim",void 0),s([m(sp.SkeletonData)],e.prototype,"guideAnim",void 0),s([d,g("release/M001/AnimPolt")],e)}(cc.Component);n.default=y,function(t){t[t.POLT=0]="POLT",t[t.GUIDE=1]="GUIDE"}(a||(a={})),cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","../../../AudioManager":"AudioManager","../../../M010/common/units/M_Audio":"M_Audio"}],AssetLoadTest:[function(t,e,n){"use strict";cc._RF.push(e,"3ec54X3WkJCcamO20OrpqAj","AssetLoadTest");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Assets/AssetManager"),c=cc._decorator,a=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anima=null,e}return i(e,t),e.prototype.start=function(){var t=this;console.warn(this.anima.skeletonData),cc.assetManager.loadRemote("http://localhost/L2_1_3_1/Asset/interactive.txt",function(e,n){e||r.default.Instance.LoadLessenAssetByConfig("http://localhost/L2_1_3_1",JSON.parse(n.text).assets,function(){},function(){console.error("OK"),r.default.Instance.GetSPAnimation("M014guide",t.anima.node).Play("step01",!0);var e=r.default.Instance.GetParticle("M014put_right",null);e.node.setParent(t.node),e.node.setPosition(cc.Vec2.ZERO),e.resetSystem()})})},s([u(sp.Skeleton)],e.prototype,"anima",void 0),s([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./Assets/AssetManager":"AssetManager"}],AssetManager:[function(t,e,n){"use strict";cc._RF.push(e,"fe813lZxwRAVafLp0qLmhmJ","AssetManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LessonAssetLoader=n.AssetLoadState=n.AssetRemoteCache=n.AssetRemoteInfo=void 0;var s=t("../Action"),r=t("../Log"),c=t("../SPAnimation"),a=t("./Assets"),u=function(){function t(t){this.asset=null,this.OnLoadComplate=new s.Action,this.url=t}return Object.defineProperty(t.prototype,"URL",{get:function(){return this.url},enumerable:!1,configurable:!0}),t.prototype.OnLoadAsset=function(t){this.asset=t,this.OnLoadComplate.Invoke(t)},Object.defineProperty(t.prototype,"Asset",{get:function(){return this.asset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsComplate",{get:function(){return null!=this.asset&&this.asset.isValid},enumerable:!1,configurable:!0}),t}();n.AssetRemoteInfo=u;var l,p=function(){function t(){this.cache=new Map}return t.prototype.Add=function(t){var e=this.cache.get(t);return e||(e=new u(t),this.cache.set(t,e)),e},t.prototype.GetInfo=function(t){return this.cache.get(t)},t.prototype.HasUrl=function(t){return this.cache.has(t)},t.prototype.Remove=function(t){this.cache.delete(t)},t}();n.AssetRemoteCache=p,function(t){t[t.None=0]="None",t[t.Ready=1]="Ready",t[t.Loding=2]="Loding",t[t.Failed=3]="Failed",t[t.Complate=4]="Complate"}(l=n.AssetLoadState||(n.AssetLoadState={}));var h=function(){function t(t){this.loadStateChanged=null,this.loadState=l.None,this.loadComplate=!1,this.progress=0,this.bundle=null,this.loadStateChanged=t}return t.prototype.LoadVideo=function(t,e){void 0===t&&(t=""),void 0===e&&(e=null),this.bundle?this.bundle.load(t,function(t,n){t?r.default.E("LessonAssetLoader -> LoadVideo","Error:"+JSON.stringify(t)):e&&e(n)}):cc.sys.isBrowser?cc.resources.load(t,function(t,n){t?r.default.E("LessonAssetLoader -> LoadVideo","Browser Error:"+JSON.stringify(t)):e&&e(n)}):e(null)},Object.defineProperty(t.prototype,"LoadState",{get:function(){return this.loadState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LoadComplate",{get:function(){return this.loadComplate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Progress",{get:function(){return this.progress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Lesson",{get:function(){return this.lesson},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Bundle",{get:function(){return this.bundle},enumerable:!1,configurable:!0}),t.prototype.Release=function(){this.bundle&&(this.bundle.releaseAll(),r.default.E("LessonAssetLoader -> Release","\u91ca\u653e\u8d44\u6e90:"+this.lesson.Name))},t.prototype.LoadAsset=function(t,e,n,o){this.bundle.load(t,e,n,o)},t.prototype.ReloadAssets=function(t){this.lesson&&this.lesson.AssetURL?(this.loadStateChanged=t,this.LoadAssets(this.lesson)):r.default.W("LessonAssetLoader -> ReloadAssets ","\u8d44\u6e90\u9519\u8bef",this.lesson)},t.prototype.LoadAssets=function(t){var e;if(this.progress=0,this.lesson=t,t&&t.AssetURL){this.loadState=l.Ready,null===(e=this.loadStateChanged)||void 0===e||e.call(this,this.loadState,0);var n=this,o=t.AssetURL;cc.assetManager.loadBundle(o,function(t,e){var o,i;t?(r.default.E("LessonAsset -> LoadAssets",JSON.stringify(t)),n.loadState=l.Failed,null===(o=n.loadStateChanged)||void 0===o||o.call(n,n.loadState,0)):(n.loadState=l.Loding,null===(i=n.loadStateChanged)||void 0===i||i.call(n,n.loadState,0),n.bundle=e,e.preloadDir("Asset",cc.Asset,function(t,e){var o;n.progress=t/e,null===(o=n.loadStateChanged)||void 0===o||o.call(n,n.loadState,n.progress)},function(t){var e,o;t?(n.loadState=l.Failed,null===(o=n.loadStateChanged)||void 0===o||o.call(n,n.loadState,1)):(n.loadComplate=!0,n.loadState=l.Complate,null===(e=n.loadStateChanged)||void 0===e||e.call(n,n.loadState,n.progress))}))})}},t.prototype.SetCallBack=function(t){this.loadStateChanged=t},t}();n.LessonAssetLoader=h;var f=function(){function t(){this.AssetsLoader=new Map,this.lessonAssets=null,this.gameConfig=null,this.currentLoader=null,this.assetCacheInfo=new p}return t.prototype.LoadGame=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return e="Prefab/Game/"+t,[4,new Promise(function(n){cc.resources.load(e,cc.Prefab,function(o,i){if(o)r.default.E("AssetManager -> LoadGame",t+"\u52a0\u8f7d\u5931\u8d25 Path:"+e),n(null);else{var s=cc.instantiate(i);n(s)}})})];case 1:return[2,n.sent()]}})})},Object.defineProperty(t,"Instance",{get:function(){return null==t.instance&&(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GameConfig",{get:function(){return this.gameConfig},enumerable:!1,configurable:!0}),t.prototype.LoadAssets=function(t,e){if(void 0===e&&(e=null),t&&t.AssetURL){var n=this.GetAssetLoder(t);if(n)n.LoadState==l.Failed||n.LoadState==l.None?n.ReloadAssets(e):n.LoadState==l.Ready||n.LoadState==l.Loding?n.SetCallBack(e):n.LoadState==l.Complate&&(null==e||e(n.LoadState,1));else{var o=new h(e);o.LoadAssets(t),this.AssetsLoader.set(t.AssetURL,o)}}else null==e||e(l.Failed,0)},t.prototype.GetAssetLoder=function(t){if(t&&t.AssetURL)return this.AssetsLoader.get(t.AssetURL);r.default.W("AssetManager -> LoadAssets","\u8981\u83b7\u53d6\u7684\u8bfe\u7a0b\u8d44\u6e90\u6570\u636e\u9519\u8bef",t)},t.prototype.GetVideoAsset=function(t){return void 0===t&&(t="video"),this.lessonAssets.GetVideo(t)},t.prototype.Release=function(t){if(t&&t.AssetURL){var e=this.GetAssetLoder(t);e&&(e.Release(),this.AssetsLoader.delete(t.AssetURL))}else r.default.W("AssetManager -> Release ","\u8981\u91ca\u653e\u7684\u8d44\u6e90\u6570\u636e\u9519\u8bef")},t.prototype.GetAssets=function(t,e,n){if(void 0===n&&(n=null),!t||!e)return r.default.W("AssetManager -> GetAssets","\u8d44\u6e90\u540d\u79f0\u6216\u56de\u8c03\u4e0d\u80fd\u4e3a\u7a7a"),void(null==e||e({msg:"\u8d44\u6e90\u540d\u79f0\u672a\u6307\u5b9a"},null));if(!n)return r.default.W("AssetManager -> GetAssets","\u4f60\u60f3\u52a0\u8f7d\u90a3\u4e00\u8bfe?"),void(null==e||e({msg:"\u672a\u6307\u5b9a\u8bfe\u7a0b"},null));var o=this.GetAssetLoder(n);return o?(o.LoadComplate||(r.default.W("AssetManager -> GetAssets","\u5f53\u524d\u8bfe\u8d44\u6e90\u6ca1\u6709\u4e0b\u8f7d\u5b8c\u6210"),null==e||e({msg:"\u5f53\u524d\u8bfe\u8d44\u6e90\u6ca1\u6709\u4e0b\u8f7d\u5b8c\u6210"},null)),o.LoadAsset(t,cc.Asset,null,e),o):(r.default.W("AssetManager -> GetAssets","\u5f53\u524d\u8bfe\u6ca1\u6709\u8bbe\u7f6e\u8d44\u6e90?"),void(null==e||e({msg:"\u5f53\u524d\u8bfe\u6ca1\u6709\u8bbe\u7f6e\u8d44\u6e90"},null)))},t.prototype.LoadLessonAsset=function(e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),r.default.D("AssetManager -> LoadLessonAsset");var i=this,s=t.Instance.GetAssets("Asset/interactive",function(t,o){if(t)r.default.E("AssetManager -> LoadLessonAsset Error",JSON.stringify(t));else try{var c=JSON.parse(o.text);if(i.gameConfig=c,c.assets){var u=c.assets;i.lessonAssets=(new a.default).LoadAsset(u,s,function(){null==e||e(c)},function(t){null==n||n(t)})}else null==e||e(c)}catch(l){r.default.E("AssetManager -> LoadLessonAsset Catch Error :\u4ea4\u4e92\u914d\u7f6e Json \u9519\u8bef",JSON.stringify(l))}},o);i.currentLoader=s},t.prototype.LoadLessenAssetByConfig=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.lessonAssets=new a.default,this.lessonAssets.LoadAssetSingle(t,e,n,o)},t.prototype.GetAsset=function(t,e){return this.lessonAssets?this.lessonAssets.Load(t,e):null},t.prototype.LoadAssetTest=function(t,e,n){return o(this,void 0,Promise,function(){var o;return i(this,function(i){switch(i.label){case 0:return this.lessonAssets?[3,2]:(this.lessonAssets=new a.default,o=this,[4,new Promise(function(e){var n=new h(null);n.ReloadAssets(null),o.lessonAssets.LoadAsset(JSON.parse(t).assets,n,function(){e(null)},null)})]);case 1:i.sent(),i.label=2;case 2:return[2,this.lessonAssets.Load(e,n)]}})})},t.prototype.GetSPAnimation=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n="default"),!t)return r.default.W("AssetManager -> GetSPAnimation","\u52a0\u8f7dSpine\u52a8\u753b\u5931\u8d25,Spine \u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),null;var o=this.GetAsset(t,a.AssetType.Spine);if(!o)return r.default.W("AssetManager -> GetSPAnimation","\u52a0\u8f7dSpine \u52a8\u753b\u5931\u8d25,\u6ca1\u6709\u627e\u5230Spine\u914d\u7f6e: "+t+" "),null;var i=null;e?e instanceof cc.Node?i=e:"string"==typeof e&&(i=new cc.Node(e)):i=new cc.Node("SPAnimation");var s=i.getComponent(c.default);return s?s.anima||(s.anima=i.getComponent(sp.Skeleton),s.anima||(s.anima=i.addComponent(sp.Skeleton))):(s=i.addComponent(c.default)).anima=s.addComponent(sp.Skeleton),s.anima.skeletonData=o,n||(n="default"),s.SetSkin(n),s},t.prototype.GetParticle=function(t,e){if(!t)return r.default.W("AssetManager -> GetParticle","\u52a0\u8f7d\u7c92\u5b50\u7279\u6548\u5931\u8d25,\u7c92\u5b50\u7279\u6548\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),null;var n=this.GetAsset(t,a.AssetType.Partical);if(!n)return r.default.W("AssetManager -> GetParticle","\u52a0\u8f7d\u7c92\u5b50\u7279\u6548\u52a8\u753b\u5931\u8d25,\u6ca1\u6709\u627e\u5230\u7c92\u5b50\u7279\u6548\u914d\u7f6e: "+t+" "),null;var o=null;e?e instanceof cc.Node?o=e:"string"==typeof e&&(o=new cc.Node(e)):o=new cc.Node("Particle");var i=o.getComponent(cc.ParticleSystem);return i||(i=o.addComponent(cc.ParticleSystem)),i.file=n,i.playOnLoad=!1,i.autoRemoveOnFinish=!1,i},t.prototype.ReleaseLessonAsset=function(){this.lessonAssets&&(this.lessonAssets.Release(),this.lessonAssets=null),this.currentLoader&&(this.currentLoader.Release(),this.currentLoader=null)},t.prototype.OnEnterSectionLesson=function(){this.ReleaseLessonAsset()},t.prototype.GetAppImage=function(t,e,n){void 0===n&&(n=!0),n?this.GetAppAsset(t,a.AssetType.Image,e):cc.assetManager.loadRemote(t,cc.Texture2D,function(t,n){if(t)r.default.W("AssetManager -> GetPageImage",JSON.stringify(t)),null==e||e(null);else{var o=new cc.SpriteFrame;o.setTexture(n),null==e||e(o)}})},t.prototype.GetAppClip=function(t,e){return void 0===e&&(e=null),o(this,void 0,Promise,function(){return i(this,function(n){switch(n.label){case 0:return[4,this.GetAppAsset(t,a.AssetType.Sound,e)];case 1:return[2,n.sent()]}})})},t.prototype.GetAppAsset=function(t,e,n){return void 0===n&&(n=null),o(this,void 0,void 0,function(){var o,s,c,u=this;return i(this,function(i){switch(i.label){case 0:return t?(o=null,(s={})[a.AssetType.Image]="\u56fe\u7247",s[a.AssetType.Sound]="\u97f3\u9891",this.assetCacheInfo.HasUrl(t)?((o=this.assetCacheInfo.GetInfo(t)).OnLoadComplate.AddListenner(this,n,!1),o.IsComplate?(r.default.DColor("AssetManager -> GetAppAsset \u5df2\u7f13\u5b58"+s[e]+" "+t,"#00ff00"),null==n||n(o.Asset),[2,o.Asset]):[3,1]):[3,4]):(null==n||n(null),[2]);case 1:return r.default.DColor("AssetManager -> GetAppAsset \u7b49\u5f85\u52a0\u8f7d"+s[e]+" "+t,"#Af782A"),[4,new Promise(function(t){o.OnLoadComplate.AddListenner(u,function(){t(o.Asset)})})];case 2:return i.sent(),[2,o.Asset];case 3:return[3,5];case 4:(o=this.assetCacheInfo.Add(t)).OnLoadComplate.AddListenner(this,n,!1),r.default.DColor("AssetManager -> GetAppAsset \u52a0\u8f7d"+s[e]+" "+t,"#404367"),i.label=5;case 5:return c=this,[4,new Promise(function(n){cc.assetManager.loadRemote(t,function(i,u){var l=u;if(e==a.AssetType.Image){var p=new cc.SpriteFrame;p.setTexture(u),l=p}o.OnLoadAsset(l),i&&(r.default.W("AssetManager -> GetAppAsset","\u52a0\u8f7d"+s[e]+"\u5931\u8d25 "+t),r.default.W("AssetManager -> GetAppAsset",JSON.stringify(i)),c.assetCacheInfo.Remove(t)),o.OnLoadComplate.Clear(),n(l)})})];case 6:return[2,i.sent()]}})})},t.instance=null,t}();n.default=f,cc._RF.pop()},{"../Action":"Action","../Log":"Log","../SPAnimation":"SPAnimation","./Assets":"Assets"}],AssetsLoder:[function(t,e,n){"use strict";cc._RF.push(e,"80c843ITuJP85aYL4EdDN4O","AssetsLoder");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Assets/AssetManager"),c=t("./Assets/Lesson"),a=t("./VideoPlayer/GameController"),u=cc._decorator,l=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.local=!1,e.AssetURL="http://127.0.0.1/L2_25_2_2/",e.GameController=null,e}return i(e,t),e.prototype.start=function(){var t=this;if(this.local){var e=new c.Lesson({name:this.AssetURL,id:this.AssetURL,contentUrl:this.AssetURL});r.default.Instance.LoadAssets(e,function(n){n==r.AssetLoadState.Complate&&r.default.Instance.LoadLessonAsset(function(){t.GameController.OnAssetLoadComplate()},function(){},e)})}else cc.assetManager.loadRemote(this.AssetURL+"/Asset/interactive.txt",{cacheEnabled:!1},function(e,n){e?console.error(e):t.LoadAssetByConfig(n)})},e.prototype.LoadAssetByConfig=function(t){var e=this;try{console.log(t);var n=JSON.parse(t.text).assets;r.default.Instance.LoadLessenAssetByConfig(this.AssetURL,n,function(){},function(){e.GameController.OnAssetLoadComplate()})}catch(o){console.error(o)}},s([p()],e.prototype,"local",void 0),s([p()],e.prototype,"AssetURL",void 0),s([p(a.default)],e.prototype,"GameController",void 0),s([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./Assets/AssetManager":"AssetManager","./Assets/Lesson":"Lesson","./VideoPlayer/GameController":"GameController"}],Assets:[function(t,e,n){"use strict";cc._RF.push(e,"97bbbTJcMpJKIne2kEu5qMO","Assets");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetData=n.AssetConfig=n.AssetType=void 0;var s,r=t("../Log"),c=["\u89c6\u5c4f","\u56fe\u7247","\u97f3\u9891","\u9884\u5236\u4f53","\u6e38\u620f\u914d\u7f6e\u6587\u4ef6","Spine\u52a8\u753b","\u7c92\u5b50\u7279\u6548"],a=[cc.Asset,cc.SpriteFrame,cc.AudioClip,cc.Prefab,cc.TextAsset,sp.SkeletonData,cc.ParticleAsset];(function(t){t[t.Video=0]="Video",t[t.Image=1]="Image",t[t.Sound=2]="Sound",t[t.Prefab=3]="Prefab",t[t.GameConfig=4]="GameConfig",t[t.Spine=5]="Spine",t[t.Partical=6]="Partical"})(s=n.AssetType||(n.AssetType={}));n.AssetConfig=function(){this.video=[],this.image=[],this.sound=[],this.prefab=[],this.gameConfig=[],this.spine=[],this.particle=[]};n.AssetData=function(){this.name="",this.path=""};var u=function(){function t(){this.Video=new Map,this.Images=new Map,this.Sound=new Map,this.Prefab=new Map,this.GameConfig=new Map,this.SkeletonData=new Map,this.Particle=new Map,this.getData=function(t){var e=[];if(!t)return e;for(var n in t)e.push({name:n,path:t[n]});return e}}return t.prototype.Release=function(){this.Video.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release Video \u91ca\u653e\u8d44\u6e90",e)}),this.Video.clear(),this.Images.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release Images \u91ca\u653e\u8d44\u6e90",e)}),this.Images.clear(),this.Sound.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release Sound \u91ca\u653e\u8d44\u6e90",e)}),this.Sound.clear(),this.Prefab.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release Prefab \u91ca\u653e\u8d44\u6e90",e)}),this.Prefab.clear(),this.GameConfig.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release GameConfig \u91ca\u653e\u8d44\u6e90",e)}),this.GameConfig.clear(),this.SkeletonData.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release SkeletonData \u91ca\u653e\u8d44\u6e90",e)}),this.SkeletonData.clear(),this.Particle.forEach(function(t,e){t&&t.decRef&&t.decRef(),r.default.D("Assets -> Release Particle \u91ca\u653e\u8d44\u6e90",e)}),this.Particle.clear()},t.prototype.GetVideo=function(t){return this.Video.get(t)},t.prototype.GetSpriteFrame=function(t){return this.Images.get(t)||null},t.prototype.GetSound=function(t){return this.Sound.get(t)},t.prototype.GetPrefab=function(t){return this.Prefab.get(t)},t.prototype.GetConfig=function(t){return this.GameConfig.get(t)},t.prototype.GetSpineData=function(t){return this.SkeletonData.get(t)},t.prototype.GetParticleData=function(t){return this.Particle.get(t)},t.prototype.GetAssetCount=function(t){return(t.video?Object.keys(t.video).length:0)+(t.image?Object.keys(t.image).length:0)+(t.sound?Object.keys(t.sound).length:0)+(t.prefab?Object.keys(t.prefab).length:0)+(t.gameConfig?Object.keys(t.gameConfig).length:0)+(t.spine?Object.keys(t.spine).length:0)+(t.particle?Object.keys(t.particle).length:0)},t.prototype.Load=function(t,e){switch(e){case s.Video:return this.GetVideo(t);case s.Image:return this.GetSpriteFrame(t);case s.Sound:return this.GetSound(t);case s.Prefab:return this.GetPrefab(t);case s.GameConfig:return this.GetConfig(t);case s.Spine:return this.GetSpineData(t);case s.Partical:return this.GetParticleData(t);default:return null}},t.prototype.LoadAssetSingle=function(t,e,n,a){var u=this;void 0===n&&(n=null),void 0===a&&(a=null);var l=this,p=this.GetAssetCount(e),h=0,f={};f[s.Image]=".png",f[s.Sound]=".mp3",f[s.GameConfig]=".txt",f[s.Spine]=".skel";var d=function(t,e){cc.assetManager.loadRemote(t,{cacheEnabled:!1},function(t,n){e&&e(t,n)})},m=function(t,e,o,i){if(i){if(i.addRef(),o==s.Video)l.Video.set(t,i);else if(o==s.Image)l.Images.set(t,i);else if(o==s.Sound)l.Sound.set(t,i);else if(o==s.Prefab)l.Prefab.set(t,i);else if(o==s.GameConfig)try{var u=JSON.parse(i.text);l.GameConfig.set(t,u),i.decRef()}catch(f){r.default.E("Assets -> LoadAsset ->onAssetLoadComplate Error","Josn \u89e3\u6790\u5931\u8d25")}else o==s.Spine?l.SkeletonData.set(t,i):o==s.Partical&&l.Particle.set(t,i);r.default.DColor(c[o]+"\u52a0\u8f7d\u5b8c\u6210:"+t+"=>"+e,"#00ff66")}else r.default.DColor(c[o]+"\u52a0\u8f7d\u5931\u8d25:"+t+"=>"+e,"#DC143C");h++,null==n||n(h/p),h>=p&&(null==a||a())},g=function(e,n,o){if(e&&!(n>=e.length)){var i=t+"/"+e[n].path+f[o];d(i,function(t,s){t?r.default.W("AssetManager -> LoadAssetSingle -> loadImage \u52a0\u8f7d\u56fe\u7247\u5931\u8d25"):m(e[n].name,i,o,s),g(e,++n,o)})}},y=function(e,n,o){if(e&&!(n>=e.length)){var i=t+"/"+e[n].path+f[o];d(i,function(t,s){if(t)r.default.W("AssetManager -> LoadAssetSingle -> loadImage \u52a0\u8f7d\u56fe\u7247\u5931\u8d25");else{var c=new cc.SpriteFrame;c.setTexture(s),m(e[n].name,i,o,c)}y(e,++n,o)})}},_=function(t,e,n,o,i){var s=new sp.SkeletonData;s.atlasText=t,s.textures=e.texture,s.textureNames=e.names,n?s._nativeAsset=n._buffer:i&&(s.skeletonJson=i),m(o,"",5,s)},A=function(e,n){return o(u,void 0,void 0,function(){var o,s,c,a,u,l,p,h,f,g,y;return i(this,function(i){switch(i.label){case 0:return!e||n>=e.length?[2]:(o=t+"/"+e[n].path+".atlas",s=o.substring(0,o.lastIndexOf("/")),[4,new Promise(function(t){d(o,function(e,n){if(e)r.default.W("loadSpine\uff1a\u56fe\u7247\u4fe1\u606f\u52a0\u8f7d\u5931\u8d25 ",o),t(null);else{var i=n.text;n.decRef(),t(i)}})})]);case 1:if(!(c=i.sent()))return m(e[n].name,o,5,null),A(e,++n),[2];for(a=[],u=c.split("\n"),l=0,p=u;l<p.length;l++)-1!=(h=p[l]).indexOf(".png")&&a.push(h);return[4,new Promise(function(t){var e=[],n=function(o){void 0===o&&(o=0),d(s+"/"+a[o],function(i,s){if(i){r.default.W("loadSpine\uff1a\u56fe\u7247\u52a0\u8f7d\u5931\u8d25 ",a[o]);for(var c=0,u=e;c<u.length;c++)u[c].decRef();t(null)}else e.push(s),++o>=a.length?t({texture:e,names:a}):n(o)})};a.length>0?n():t(null)})];case 2:return null!=(f=i.sent())&&f.texture&&0!=f.texture.length&&f.texture.length==a.length?[4,new Promise(function(i){o=t+"/"+e[n].path+".skel",d(o,function(t,e){i(e)})})]:(m(e[n].name,a.toString(),5,null),A(e,++n),[2]);case 3:return g=i.sent(),y=null,g?[3,5]:(o=t+"/"+e[n].path+".json",r.default.D("\u5c1d\u8bd5\u52a0\u8f7dJosn ",o),[4,new Promise(function(t){d(o,function(e,n){t(e?null:n.json)})})]);case 4:if(!(y=i.sent()))return m(e[n].name,o,5,null),A(e,++n),[2];r.default.D("\u5c1d\u8bd5\u52a0\u8f7dJosn\u6210\u529f "),i.label=5;case 5:return _(c,f,g,e[n].name,y),A(e,++n),[2]}})})},v=function(e,n){return o(u,void 0,void 0,function(){var o,r,c;return i(this,function(i){switch(i.label){case 0:return null==e||n>=e.length?[2]:(o=t+"/"+e[n].path+".plist",[4,new Promise(function(t){d(o,function(e,n){t(e?null:n)})})]);case 1:return(r=i.sent())?(c=t+"/"+e[n].path+".png",[4,new Promise(function(t){d(c,function(e,n){t(e?null:n)})})]):(m(e[n].name,o,s.Partical,null),v(e,++n),[2]);case 2:return i.sent()?(m(e[n].name,"",s.Partical,r),v(e,++n),[2]):(m(e[n].name,c,s.Partical,null),v(e,++n),[2])}})})};p<=0?null==a||a():(y(this.getData(e.image),0,s.Image),g(this.getData(e.sound),0,s.Sound),g(this.getData(e.gameConfig),0,s.GameConfig),A(this.getData(e.spine),0),v(this.getData(e.particle),0))},t.prototype.LoadAsset=function(t,e,n,o){if(void 0===o&&(o=null),t&&e){r.default.D("Assets -> LoadAsset",t);var i=0,u=this.GetAssetCount(t),l=this,p=function(t,e,a,p){if(p){if(p.addRef(),a==s.Video)l.Video.set(t,p);else if(a==s.Image)l.Images.set(t,p);else if(a==s.Sound)l.Sound.set(t,p);else if(a==s.Prefab)l.Prefab.set(t,p);else if(a==s.GameConfig)try{var h=JSON.parse(p.text);l.GameConfig.set(t,h),p.decRef()}catch(f){r.default.E("Assets -> LoadAsset ->onAssetLoadComplate Error","Josn \u89e3\u6790\u5931\u8d25")}else a==s.Spine?l.SkeletonData.set(t,p):a==s.Partical&&l.Particle.set(t,p);r.default.DColor(c[a]+"\u52a0\u8f7d\u5b8c\u6210:"+t+"=>"+e,"#00ff66")}else r.default.DColor(c[a]+"\u52a0\u8f7d\u5931\u8d25:"+t+"=>"+e,"#DC143C");i++,null==o||o(i/u),i>=u&&(null==n||n())},h=function(t,n,o){if(!(null==t||n>=t.length)){var i=t[n].name,s=t[n].path;if(!s||!i)return p(i,s,o,null),h(t,++n,o),void r.default.W("Assets -> LoadAsset -> loadAsset","\u8d44\u6e90\u914d\u7f6e\u9519\u8bef");e.LoadAsset(s,a[o],null,function(e,a){e&&r.default.E("Assets -> LoadAsset -> loadAsset",c[o]+" \u52a0\u8f7d\u5931\u8d25 "+JSON.stringify(e)),p(i,s,o,e?null:a),h(t,++n,o)})}};return 0==u?null==n||n():(h(this.getData(t.video),0,s.Video),h(this.getData(t.image),0,s.Image),h(this.getData(t.sound),0,s.Sound),h(this.getData(t.prefab),0,s.Prefab),h(this.getData(t.gameConfig),0,s.GameConfig),h(this.getData(t.spine),0,s.Spine),h(this.getData(t.particle),0,s.Partical)),this}null==n||n(null)},t}();n.default=u,cc._RF.pop()},{"../Log":"Log"}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"2a43bIyKD1LNoTqdZj2esH7","AudioManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./Assets/AssetManager"),r=t("./Assets/Assets"),c=t("./Log"),a=function(){function t(){this.soundMap=new Map}return Object.defineProperty(t,"Instance",{get:function(){return t.instance||(t.instance=new t),t.instance},enumerable:!1,configurable:!0}),t.Play=function(t,e,n,o){if(void 0===e&&(e=!1),void 0===n&&(n=null),void 0===o&&(o=1),!t||!t.isValid)return null==n||n(),-1;var i=cc.audioEngine.playEffect(t,e);return cc.audioEngine.setVolume(i,o),n&&cc.audioEngine.setFinishCallback(i,n),i},t.PlayBGM=function(t,e){if(void 0===e&&(e=1),!t||!t.isValid)return-1;var n=cc.audioEngine.playMusic(t,!0);return cc.audioEngine.setVolume(n,e),n},t.PlayByAsset=function(e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=null),void 0===i&&(i=1);var c=s.default.Instance.GetAsset(e,r.AssetType.Sound);return t.Play(c,n,o,i)},t.PlayBGMByAsset=function(e,n){void 0===n&&(n=1);var o=s.default.Instance.GetAsset(e,r.AssetType.Sound);return t.PlayBGM(o,n)},t.GetSysSound=function(e,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return e?(o=t.Instance.soundMap.get(e))&&o.isValid?(null==n||n(o),[2,o]):[4,new Promise(function(n){cc.resources.load("Sound/"+e,function(o,i){o?c.default.D("AudioManager -> PlaySysSound","\u52a0\u8f7d\u7cfb\u7edf\u97f3\u6548\u5931\u8d25 "+e):(t.Instance.soundMap.set(e,i),c.default.D("AudioManager -> PlaySysSound","\u521d\u6b21\u64ad\u653e\u7cfb\u7edf\u97f3\u6548\u6210\u529f "+e)),n(i)})})]:(c.default.W("AudioManager -> PlaySysSound","\u97f3\u9891\u540d\u79f0\u65e0\u6548"),null==n||n(null),[2,null]);case 1:return o=i.sent(),null==n||n(o),[2,o]}})})},t.PlaySysSound=function(e,n,s){return void 0===n&&(n=!1),void 0===s&&(s=null),o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return[4,t.GetSysSound(e,null)];case 1:return o=i.sent(),c.default.D("AudioManager -> PlaySysSound","\u5c1d\u8bd5\u83b7\u53d6\u97f3\u9891 "+e+" "+(o?"\u6210\u529f":"\u5931\u8d25")),o?[2,t.Play(o,n,s)]:(null==s||s(),[2,-1])}})})},t.PlayRemote=function(e,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),o(this,void 0,void 0,function(){var o,c;return i(this,function(i){switch(i.label){case 0:return[4,s.default.Instance.GetAppClip(e)];case 1:return(o=i.sent())?(c=t.Play(o,!1,function(){null==n||n(!0)}),null==r||r(c),[2,c]):(null==r||r(-1),null==n||n(!1),[2,-1])}})})},t.UI_Eixt="",t.Reward_Step="",t.Right="",t.Wrong="",t.Btn_Normal="btn_press",t}();n.default=a,cc._RF.pop()},{"./Assets/AssetManager":"AssetManager","./Assets/Assets":"Assets","./Log":"Log"}],BGImageLoader:[function(t,e,n){"use strict";cc._RF.push(e,"589ad3FlnlKUK9hnHAJME3J","BGImageLoader");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ImageLoader"),c=t("./SPLoder"),a=cc._decorator,u=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgImage=new Map,e.bgSpine=null,e}return i(e,t),e.prototype.Init=function(){var t=this;this.getComponentsInChildren(r.default).forEach(function(e){t.bgImage.set(e.Type,e)}),this.bgSpine=this.getComponentInChildren(c.default)},e.prototype.SetImage=function(t,e){e&&(t&&(this.setImage(r.BGImageType.Left,t[0]),this.setImage(r.BGImageType.Center,t[1]),this.setImage(r.BGImageType.Right,t[2])),e.spine&&this.bgSpine.LoadSpineByData(e.spine,null))},e.prototype.setImage=function(t,e){e&&this.bgImage.get(t).SetImage(e)},s([u],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./ImageLoader":"ImageLoader","./SPLoder":"SPLoder"}],Btn:[function(t,e,n){"use strict";cc._RF.push(e,"7b338MXbBFK5YSmG/nQVTlY","Btn");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Assets/AssetManager"),c=t("../../../Assets/Assets"),a=t("../../../Comp/SwitchSp"),u=t("../../../M010/common/units/M_Tool"),l=cc._decorator,p=l.ccclass,h=l.property,f=l.menu,d=["M001_BUTTON_RECT1","M001_BUTTON_RECT1","M001_BUTTON_RECT3","M001_BUTTON_RECT4","M001_BUTTON_RECT5"],m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reward=null,e.Data=null,e._buttonTween=[],e._buttonTimerAfter=[],e._btnNum=0,e.buttonGuideBlinkDuration=.5,e.inValiClick=!1,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){},e.prototype.setBtnRes=function(t){null!=t&&(d=t),this.node.children.forEach(function(t){for(var e=0;e<d.length;e++)t.getComponent(a.default).updateFrame(e,r.default.Instance.GetAsset(d[e],c.AssetType.Image));t.getComponent(a.default).setSpriteFrame(0)})},e.prototype.addBlink=function(t,e){this.node.children.forEach(function(n){switch(e){case 0:var o=null;n.getChildByName("frame_blink").getComponent(cc.Sprite)||(o=n.getChildByName("frame_blink").addComponent(cc.Sprite)),(o=n.getChildByName("frame_blink").getComponent(cc.Sprite)).trim=!1,o.sizeMode=cc.Sprite.SizeMode.RAW,o.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image);break;case 1:n.getChildByName("frame_blink").getComponent(cc.ParticleSystem)||n.getChildByName("frame_blink").addComponent(cc.ParticleSystem),n.getChildByName("frame_blink").getComponent(cc.ParticleSystem).file=r.default.Instance.GetAsset(t,c.AssetType.Partical);break;case 1:n.getChildByName("frame_blink").getComponent(sp.Skeleton)||n.getChildByName("frame_blink").addComponent(sp.Skeleton),n.getChildByName("frame_blink").getComponent(sp.Skeleton).skeletonData=r.default.Instance.GetAsset(t,c.AssetType.Spine)}})},e.prototype.show=function(){this.node.active=!0,cc.tween(this.node).to(.3,{opacity:255}).start()},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(.3,{opacity:0}).call(function(){t.node.active=!1}).start()},e.prototype.addEvent=function(t){var e=this;this.node.children.some(function(n,o){if(o>t-1)return!0;var i=n.getBoundingBoxToWorld().clone();n.on(cc.Node.EventType.TOUCH_START,function(){e.inValiClick||cc.tween(n).to(.1,{scale:e.btnScale}).start()},e),n.on(cc.Node.EventType.TOUCH_END,function(){e.inValiClick||(null==e||e._callBack(n,o,e.Data[o]),cc.tween(n).to(.1,{scale:1}).start())},e),n.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.inValiClick||(u.default.getIns().pointInRect(t.getLocation(),i)&&(null==e||e._callBack(n,o,e.Data[o])),cc.tween(n).to(.1,{scale:1}).start())},e)})},e.prototype.setClickBtnCb=function(t){t&&(this._callBack=t)},e.prototype.closeEvent=function(){var t=this;this.node.children.forEach(function(e){e.targetOff(t)})},e.prototype.cleanAllTimeOut=function(){this._buttonTween.forEach(function(t){var e;t&&t.timerID&&(clearTimeout(t.timerID),clearInterval(t.timerID),null===(e=t.tween)||void 0===e||e.stop(),t={tween:null,timerID:null})});for(var t=0;t<this._buttonTimerAfter.length;++t)this._buttonTimerAfter[t]&&(clearTimeout(this._buttonTimerAfter[t]),clearInterval(this._buttonTimerAfter[t]),this._buttonTimerAfter[t]=null)},e.prototype.getRightAnwserID=function(){var t=null;return this.Data.some(function(e,n){if(e.isRight)return t=n,!0}),t},e.prototype.setClickScale=function(t){t<0||(this.btnScale=t)},e.prototype.reSetPos=function(t){this.StopTipAnim(),this.cleanAllTimeOut(),this.closeEvent();var e=this.node.children;e.forEach(function(t){t.active=!1}),e.some(function(e,o){var i=n._BtnPos[t],s=e;if(s.active=!(o>=i.size.length),!s.active)return!0;var r=s.getChildByName("label");s.getComponent(a.default).setSpriteFrame(i.spID),s.width=i.size[o].x,s.height=i.size[o].y,s.position=i.pos[o],r.width=i.labelSize[o].x,r.height=i.labelSize[o].y,s.getChildByName("image").width=i.size[o].x,s.getChildByName("image").height=i.size[o].y,s.getChildByName("frame_blink").getComponent(cc.Widget).updateAlignment(),r.getComponent(cc.Label)._forceUpdateRenderData()}),this._btnNum=n._BtnPos[t].pos.length,this.node.active=!0,this.addEvent(n._BtnPos[t].pos.length)},e.prototype.getBtnNum=function(){return this._btnNum},e.prototype.getBtnWordPos=function(t){return this._btnNum-1<t?new cc.Vec3(0,0,0):this.node.convertToWorldSpaceAR(this.node.children[t].position)},e.prototype.StopTipAnim=function(){this.cleanAllTimeOut(),this.node.children.forEach(function(t){t.getChildByName("frame_blink").opacity=0,t.getChildByName("frame_blink").removeComponent(a.default),t.getChildByName("frame_blink").removeComponent(sp.Skeleton),t.getChildByName("frame_blink").removeComponent(cc.ParticleSystem),t.getChildByName("frame_blink").active=!1})},e.prototype.PlayTipAnim=function(t,e,n,o,i){var s=this;this.addBlink(n,e),o||(o=0),i||(i=0),this._buttonTimerAfter[t]&&(clearTimeout(this._buttonTimerAfter[t]),this._buttonTimerAfter[t]=null),this._buttonTimerAfter[t]=setTimeout(function(){var n;if(cc.isValid(s.node)){var o=s.node.children[t].getChildByName("frame_blink");switch((null===(n=s._buttonTween[t])||void 0===n?void 0:n.tween)&&(o.active=!1,s._buttonTween[t].tween.stop(),clearTimeout(s._buttonTween[t].timerID),s._buttonTween[t]=null),s._buttonTween[t]={tween:null,timerID:0},o.active=!0,o.opacity=255,e){case 0:o.opacity=0;var r=cc.tween().to(.2*s.buttonGuideBlinkDuration,{opacity:255}).delay(.3*s.buttonGuideBlinkDuration),c=cc.tween().to(.2*s.buttonGuideBlinkDuration,{opacity:0}).delay(.3*s.buttonGuideBlinkDuration);s._buttonTween[t].tween=cc.tween(o).sequence(r,c).repeatForever().start(),i>0&&(s._buttonTween[t].timerID=setTimeout(function(){var e;(null===(e=null==s?void 0:s._buttonTween[t])||void 0===e?void 0:e.tween)&&(o.active=!1,s._buttonTween[t].tween.stop(),s._buttonTween[t]={tween:null,timerID:null})},1e3*i));break;case 1:s.node.children[t].getChildByName("frame_blink").removeComponent(cc.Sprite);var a=s.node.children[t].getChildByName("frame_blink").getComponent(cc.ParticleSystem);setTimeout(function(){var e=1e3*(a.duration+a.life),n=function(){a.node.isValid&&(a.playOnLoad=!0,a.node.active=!0,a.resetSystem())};n(),s._buttonTween[t].timerID=setInterval(n,e),i>0&&(s._buttonTween[t].timerID=setTimeout(function(){a.stopSystem(),o.active=!1,o.removeComponent(cc.ParticleSystem)},1e3*i))},0);break;case 2:var u=s.node.children[t].getChildByName("frame_blink").getComponent(sp.Skeleton);u.clearTracks(),u.setAnimation(0,"default",!0),i>0&&(s._buttonTween[t].timerID=setTimeout(function(){u.clearTracks(),o.active=!1,o.removeComponent(sp.Skeleton)},1e3*i))}}},1e3*o)},e.prototype.hideButton=function(t){void 0!==t?this._btnNum-1<t||(this.node.children[t].active=!1):this.node.children.forEach(function(t){t.active=!1})},e.prototype.getBtnPos=function(t){return this._btnNum-1<t?new cc.Vec2(0,0):new cc.Vec2(this.node.children[t].position.x,this.node.children[t].position.y)},e.prototype.onDestroy=function(){this.cleanAllTimeOut()},e.prototype.setBtnContent=function(t){this.Data=t;for(var e=0;e<this.getBtnNum();e++){var n=t[e];n.image&&0===n.label.length?(cc.find("image",this.node.children[e]).getComponent(cc.Sprite).spriteFrame=r.default.Instance.GetAsset(n.image,c.AssetType.Image),cc.find("image",this.node.children[e]).active=!(cc.find("label",this.node.children[e]).active=!1)):(cc.find("label",this.node.children[e]).getComponent(cc.Label).string=n.label,cc.find("image",this.node.children[e]).active=!(cc.find("label",this.node.children[e]).active=!0))}},e.prototype.stopClick=function(){this.inValiClick=!0},e.prototype.resumClick=function(){this.inValiClick=!1},e._BtnPos=[{spID:0,pos:[new cc.Vec3(-473,-200,0),new cc.Vec3(473,-200,0),new cc.Vec3(-473,-410,0),new cc.Vec3(473,-410)],size:[new cc.Vec2(914,200),new cc.Vec2(914,200),new cc.Vec2(914,200),new cc.Vec2(914,200)],labelSize:[new cc.Vec2(800,130),new cc.Vec2(800,130),new cc.Vec2(800,130),new cc.Vec2(800,130)]},{spID:1,pos:[new cc.Vec3(-473,-200,0),new cc.Vec3(473,-200,0),new cc.Vec3(0,-410,0)],size:[new cc.Vec2(914,200),new cc.Vec2(914,200),new cc.Vec2(914,200)],labelSize:[new cc.Vec2(800,130),new cc.Vec2(800,130),new cc.Vec2(800,130)]},{spID:2,pos:[new cc.Vec3(-473,-305,0),new cc.Vec3(473,-305,0)],size:[new cc.Vec2(914,410),new cc.Vec2(914,410)],labelSize:[new cc.Vec2(800,300),new cc.Vec2(800,300)]},{spID:3,pos:[new cc.Vec3(-630,-305,0),new cc.Vec3(0,-305,0),new cc.Vec3(630,-305,0)],size:[new cc.Vec2(600,410),new cc.Vec2(600,410),new cc.Vec2(600,410)],labelSize:[new cc.Vec2(500,300),new cc.Vec2(500,300),new cc.Vec2(500,300)]},{spID:4,pos:[new cc.Vec3(-708,-305,0),new cc.Vec3(-236,-305,0),new cc.Vec3(236,-305,0),new cc.Vec3(708,-305)],size:[new cc.Vec2(440,410),new cc.Vec2(440,410),new cc.Vec2(440,410),new cc.Vec2(440,410)],labelSize:[new cc.Vec2(360,300),new cc.Vec2(360,300),new cc.Vec2(360,300),new cc.Vec2(360,300)]},{spID:0,pos:[new cc.Vec3(-473,-200,0),new cc.Vec3(473,-200,0),new cc.Vec3(-473,-410,0),new cc.Vec3(479,-410)],size:[new cc.Vec2(914,200),new cc.Vec2(914,200),new cc.Vec2(914,200),new cc.Vec2(914,200)],labelSize:[new cc.Vec2(800,130),new cc.Vec2(800,130),new cc.Vec2(800,130),new cc.Vec2(800,130)]},{spID:1,pos:[new cc.Vec3(-473,-200,0),new cc.Vec3(473,-200,0),new cc.Vec3(0,-410,0)],size:[new cc.Vec2(914,200),new cc.Vec2(914,200),new cc.Vec2(914,200)],labelSize:[new cc.Vec2(800,130),new cc.Vec2(800,130),new cc.Vec2(800,130)]},{spID:2,pos:[new cc.Vec3(-473,-305,0),new cc.Vec3(473,-305,0)],size:[new cc.Vec2(914,410),new cc.Vec2(914,410)],labelSize:[new cc.Vec2(800,300),new cc.Vec2(800,300)]},{spID:3,pos:[new cc.Vec3(-630,-305,0),new cc.Vec3(0,-305,0),new cc.Vec3(630,-305,0)],size:[new cc.Vec2(600,410),new cc.Vec2(600,410),new cc.Vec2(600,410)],labelSize:[new cc.Vec2(500,300),new cc.Vec2(500,300),new cc.Vec2(500,300)]},{spID:4,pos:[new cc.Vec3(-708,-305,0),new cc.Vec3(-236,-305,0),new cc.Vec3(236,-305,0),new cc.Vec3(708,-305)],size:[new cc.Vec2(440,410),new cc.Vec2(440,410),new cc.Vec2(440,410),new cc.Vec2(440,410)],labelSize:[new cc.Vec2(360,300),new cc.Vec2(360,300),new cc.Vec2(360,300),new cc.Vec2(360,300)]}],s([h(cc.Prefab)],e.prototype,"reward",void 0),n=s([p,f("release/M001/Btn")],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","../../../Comp/SwitchSp":"SwitchSp","../../../M010/common/units/M_Tool":"M_Tool"}],Collector:[function(t,e,n){"use strict";cc._RF.push(e,"fb87ei6np1CP7QR2br5sqVW","Collector");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../TimeSystem"),c=t("../../UIBase"),a=cc._decorator,u=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tweenHid=null,e.tweenShow=null,e.timer=new r.default,e.bindScale=[],e}return i(e,t),e.prototype.ShowUp=function(){var t=this;this.tweenHid&&this.tweenHid.stop(),this.tweenShow&&this.tweenShow.stop(),this.node.scale=0,this.timer.CancelAllInvoke(),this.timer.Invoke(function(){t.hid()},1),this.tweenShow=cc.tween(this.node).to(1,{scale:1},{easing:"elasticOut"}).start()},e.prototype.hid=function(){var t=this;this.tweenHid=cc.tween(this.node).to(1,{scale:0},{easing:"elasticIn"}).call(function(){t.Show(!1)}).start()},e.prototype.ShowDown=function(){},e.prototype.onDestroy=function(){this.timer.CancelAllInvoke()},e.prototype.onDisable=function(){this.bindScale.length>0&&this.bindScale.forEach(function(t){t.active=!1})},e.prototype.onEnable=function(){this.bindScale.length>0&&this.bindScale.forEach(function(t){t.active=!0})},e.prototype.update=function(){var t=this;this.bindScale.length>0&&this.bindScale.forEach(function(e){e.scale=t.node.scale})},s([l(cc.Node)],e.prototype,"bindScale",void 0),s([u],e)}(c.default);n.default=p,cc._RF.pop()},{"../../TimeSystem":"TimeSystem","../../UIBase":"UIBase"}],Config:[function(t,e,n){"use strict";cc._RF.push(e,"99725mCITFMrqHzcItZm8qe","Config"),Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0;var o=t("../Assets/AssetManager"),i=t("../Assets/Assets"),s=t("./release/units/Tool"),r=function(){function t(e){this.config=null,this.config=o.default.Instance.GetAsset(e,i.AssetType.GameConfig),this.config&&(t._baseConfig=s.default.cloneObject(this.config.BaseConfig),t._otherList=s.default.cloneObject(this.config.OtherList),this.checkConfig())}return t.prototype.checkConfig=function(){this.baseConfig.Select_Error.tipRightNum},Object.defineProperty(t.prototype,"baseConfig",{get:function(){return t._baseConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherList",{get:function(){return t._otherList},enumerable:!1,configurable:!0}),t}();n.Config=r,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","./release/units/Tool":"Tool"}],DrawCircleProgress:[function(t,e,n){"use strict";cc._RF.push(e,"4f0a91I2WpI3oPiJ1WaavwS","DrawCircleProgress");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../UIBase"),c=cc._decorator,a=c.ccclass,u=c.property,l=c.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.errorNode=null,e.errorTween=null,e}return i(e,t),e.prototype.Init=function(){this.sprite=this.getComponent(cc.Sprite)},Object.defineProperty(e.prototype,"FileRange",{get:function(){return this.sprite.fillRange},enumerable:!1,configurable:!0}),e.prototype.SetData=function(t){t=-90-t;var e=(t%=360)/360;this.sprite.fillStart=e,this.errorNode.fillStart=e},e.prototype.errorAnimation=function(t,e){var n=this;void 0===e&&(e=null),this.errorNode.node.active=!0,this.errorNode.fillRange=t,this.errorNode.node.opacity=255,this.errorTween&&this.errorTween.stop();var o=cc.tween(this.errorNode.node).to(.2,{opacity:0}),i=cc.tween(this.errorNode.node).to(.2,{opacity:255});this.errorTween=cc.tween(this.errorNode.node).sequence(o,i).repeat(2).call(function(){n.errorNode.node.active=!1,null==e||e()}).start()},e.prototype.StopErrorAnimation=function(){this.errorTween&&this.errorTween.stop(),this.errorNode.node.active=!1},e.prototype.SetProgress=function(t){this.sprite.fillRange=t},s([u(cc.Sprite)],e.prototype,"errorNode",void 0),s([a,l("GameUI/Interaction/UI/DrawCircleProgress")],e)}(r.default);n.default=p,cc._RF.pop()},{"../UIBase":"UIBase"}],FeedBack:[function(t,e,n){"use strict";cc._RF.push(e,"ff99dKUbypOh7iy/ZgDqnO4","FeedBack");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FeedAnimType=n.FeedBack=void 0;var a,u=t("../../../Assets/AssetManager"),l=t("../../../Assets/Assets"),p=t("../../../AudioManager"),h=cc._decorator,f=h.ccclass,d=h.property,m=h.menu,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.spineName=[],e.stopAsync=!1,e.audioID=-1,e}return i(e,t),e.prototype.setRightWrongAnimName=function(t){this.spineName[a.RIGHT]={anim:"",voice:""},this.spineName[a.RIGHT].anim=t&&t.right&&0!==t.right.anim.length?t.right.anim:"right",this.spineName[a.RIGHT].voice=t&&t.right&&0!==t.right.voice.length?t.right.voice:"",this.spineName[a.WRONG]={anim:"",voice:""},this.spineName[a.WRONG].anim=t&&t.wrong&&0!==t.wrong.anim.length?t.wrong.anim:"wrong",this.spineName[a.WRONG].voice=t&&t.wrong&&0!==t.wrong.voice.length?t.wrong.voice:"",this.spineName[a.PLOT]={anim:"",voice:""},this.spineName[a.PLOT].anim=t&&t.plot&&0!==t.plot.anim.length?t.plot.anim:"",this.spineName[a.PLOT].voice=t&&t.plot&&0!==t.plot.voice.length?t.plot.voice:""},e.prototype.setAnim=function(t,e){if(0!==e.length){for(var n=0;n<a.RIGHT;++n)this.spineName[n]=t[n];this.spine.skeletonData=u.default.Instance.GetAsset(e,l.AssetType.Spine)}},e.prototype.playFeedBack=function(t,e){return void 0===e&&(e=!0),r(this,void 0,Promise,function(){var n=this;return c(this,function(){return this.stopAsync=!1,[2,new Promise(function(o){if(n.spine.skeletonData&&n.spineName[t]&&n.spineName[t].anim){var i=0;new Promise(function(t){i=setInterval(function(){n.stopAsync&&(n.stopAsync=!1,clearInterval(i),cc.audioEngine.stopEffect(n.audioID),n.spine.setAnimation(0,n.spineName[a.IDLE].anim,!0),o(!1),t())},32)}),n.spine.node.active=!0,n.spine.setAnimation(0,n.spineName[t].anim,!1),n.spine.setStartListener(function(t){var e,o,i,s,r;switch(t.animation.name){case null===(e=n.spineName[a.IDLE])||void 0===e?void 0:e.anim:p.default.Play(u.default.Instance.GetAsset(n.spineName[a.IDLE].voice,l.AssetType.Sound));break;case null===(o=n.spineName[a.FINISH])||void 0===o?void 0:o.anim:n.audioID=p.default.Play(u.default.Instance.GetAsset(n.spineName[a.FINISH].voice,l.AssetType.Sound));break;case null===(i=n.spineName[a.WRONG])||void 0===i?void 0:i.anim:n.audioID=p.default.Play(u.default.Instance.GetAsset(n.spineName[a.WRONG].voice,l.AssetType.Sound));break;case null===(s=n.spineName[a.RIGHT])||void 0===s?void 0:s.anim:n.audioID=p.default.Play(u.default.Instance.GetAsset(n.spineName[a.RIGHT].voice,l.AssetType.Sound));break;case null===(r=n.spineName[a.INIT])||void 0===r?void 0:r.anim:p.default.Play(u.default.Instance.GetAsset(n.spineName[a.INIT].voice,l.AssetType.Sound))}}),n.spine.setCompleteListener(function(){e&&(n.spine.setAnimation(0,n.spineName[a.IDLE].anim,!0),n.spine.node.active=!0),n.stopAsync=!0})}else o(!0)})]})})},s([d(sp.Skeleton)],e.prototype,"spine",void 0),s([f,m("release/M001/FeedBack")],e)}(cc.Component);n.FeedBack=g,function(t){t[t.FINISH=0]="FINISH",t[t.IDLE=1]="IDLE",t[t.INIT=2]="INIT",t[t.RIGHT=3]="RIGHT",t[t.WRONG=4]="WRONG",t[t.PLOT=5]="PLOT"}(a=n.FeedAnimType||(n.FeedAnimType={})),cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","../../../AudioManager":"AudioManager"}],GameController:[function(t,e,n){"use strict";cc._RF.push(e,"5237fGTbIJJOaJ+717vYe05","GameController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Action"),c=t("../AlertMenu/AlertMenu"),a=t("../AudioManager"),u=t("../InteractionController"),l=t("../Log"),p=t("../UIManager"),h=cc._decorator,f=h.ccclass,d=h.property,m=h.menu,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AssetLoadCallBack=new r.Action,e.gameController=null,e.star=0,e.OnEixtButton=new r.Action,e.eixtSound=-1,e}return i(e,t),e.prototype.OnAssetLoadComplate=function(){this.AssetLoadCallBack.Invoke()},Object.defineProperty(e.prototype,"Star",{get:function(){return this.star},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AdaptScale",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.Init=function(){this.star=0},e.prototype.EixtGame=function(t){void 0===t&&(t=null),l.default.W("\u9000\u51fa\u6e38\u620f")},e.prototype.ComplateGame=function(t){void 0===t&&(t=null),this.gameController.Find("GameComplate").active=!0},e.prototype.Reward_Step=function(t,e,n,o,i){this.gameController?(this.star++,l.default.D("GameController-> Reward_LvEnd ","\u5956\u52b1\u661f\u661f1\u4e2a "+this.star),this.gameController.OnReward_Step(t,e,n,o,i)):(l.default.W("GameController -> Reward_Step","\u6e38\u620f\u6253\u5f00\u65b9\u5f0f\u4e0d\u5bf9\u5934"),i&&i())},e.prototype.Reward_LvEnd=function(t,e,n,o,i){void 0===t&&(t=1),void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===i&&(i=!0),this.gameController?(this.star+=3,l.default.D("GameController-> Reward_LvEnd ","\u5956\u52b1\u661f\u661f3\u4e2a "+this.star),this.gameController.OnReward_LvEnd(t,e,n,o,i)):(l.default.W("GameController -> Reward_LvEnd","\u6e38\u620f\u6253\u5f00\u65b9\u5f0f\u4e0d\u5bf9\u5934"),o&&o())},e.prototype.Reward_GameEnd=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=!1),this.gameController?(this.star+=5,l.default.D("GameController-> Reward_LvEnd ","\u5956\u52b1\u661f\u661f5\u4e2a "+this.star),this.gameController.OnReward_GameEnd(t,e,o,n)):(l.default.W("GameController -> Reward_GameEnd","\u6e38\u620f\u6253\u5f00\u65b9\u5f0f\u4e0d\u5bf9\u5934"),n&&n())},e.prototype.ShowEixtAlert=function(t,e,n){var o,i,s=this;void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null);var r=this;null===(o=p.default.Instance)||void 0===o||o.ShowUI(p.default.AlertMenu,function(o){cc.audioEngine.stop(s.eixtSound),o&&(n&&(s.eixtSound=a.default.PlayBGMByAsset(n.sound),o.SetSkin(n)),o.SetData(new c.AlertMenuArgs(c.AlertMenuType.OKCancle).AddCallBack(function(){cc.audioEngine.stop(s.eixtSound),null==t||t(),r.EixtGame()},function(){cc.audioEngine.stop(s.eixtSound),null==e||e()}).SetMessage(n?n.message:"\u786e\u5b9a\u8981\u79bb\u5f00\u5417?")))}),p.default.Instance||null===(i=this.OnEixtButton)||void 0===i||i.Invoke()},e.prototype.OnAnswer=function(t,e){void 0===e&&(e=!0)},e.prototype.GetGameConfigName=function(){return""},e.prototype.ScreenShoot=function(t,e){void 0===e&&(e=!1)},s([d(u.default)],e.prototype,"gameController",void 0),s([f,m("Manager/GameController")],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../Action":"Action","../AlertMenu/AlertMenu":"AlertMenu","../AudioManager":"AudioManager","../InteractionController":"InteractionController","../Log":"Log","../UIManager":"UIManager"}],GameMenu:[function(t,e,n){"use strict";cc._RF.push(e,"527d29mSk1ByYZa7t8WZTga","GameMenu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./AudioManager"),c=t("./UIBase"),a=t("./UIManager"),u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShow=!1,e.LoadUIName=[],e}return i(e,t),Object.defineProperty(e.prototype,"IsShow",{get:function(){return this.isShow},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;if(this.LoadUIName&&this.LoadUIName.length>0){var e=0,n=function(){e>=t.LoadUIName.length?t.OnInit():a.default.Instance.GetUI(t.LoadUIName[e],function(o){o&&(t.OnLoadUI(o),++e,n())})};n()}else this.OnInit()},e.prototype.OnLoadUI=function(){},e.prototype.OnInit=function(){},e.prototype.OnPause=function(){},e.prototype.OnReset=function(){},e.prototype.OnHid=function(){this.isShow=!1,this.Show(!1)},e.prototype.OnShow=function(){this.SetLastSibling(),this.isShow=!0,this.Show(!0)},e.prototype.ShowMenu=function(t,e){a.default.Instance.ShowUI(t,e)},e.prototype.Close=function(t){void 0===t&&(t=!1),a.default.Instance.Close(t?this:null)},e.prototype.PlayButtonNormalSound=function(){return r.default.PlaySysSound(r.default.Btn_Normal)},s([p({type:cc.String})],e.prototype,"LoadUIName",void 0),s([l,h("GameUI/UI/GameMenu")],e)}(c.default);n.default=f,cc._RF.pop()},{"./AudioManager":"AudioManager","./UIBase":"UIBase","./UIManager":"UIManager"}],Game_Abstract:[function(t,e,n){"use strict";cc._RF.push(e,"61db1HAQ+lJs6KCAcyVBXkX","Game_Abstract");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Game_Abstract=void 0;var s=t("./units/M_Tool"),r=t("./units/M_ConfigT"),c=t("./units/M_Timer"),a=t("./units/M_AnimLayer"),u=t("../../Assets/AssetManager"),l=t("../../Assets/Assets"),p=t("../../AudioManager"),h=t("./units/Game_Method"),f=t("./units/M_Audio"),d=t("./units/M_Toast"),m=function(){function t(t,e,n,o,i){var u,l=this;if(this.AudioId=null,this.levelEnd=!1,this._comp=o,this.Config=new r.default(n),!this.Config.checkConfig())return null===(u=null===d.default||void 0===d.default?void 0:d.default.Instance)||void 0===u||u.Show(d.ToastType.THROWERROR,"\u914d\u7f6e\u8868\u672a\u6210\u529f\u8bfb\u53d6,\u8bf7\u68c0\u67e5\u683c\u5f0f!"),void this.quitButtonCb(!0);this.GameMethod=new h.default(o.GameController),this.BaseConfig=this.Config.getBaseConfig(),this.OtherList=this.Config.getOtherList(),this.AllQuesNum=this.Config.getBaseConfig().DataBase.length,this.Tool=s.default.getIns(),this.Timer=c.M_Timer.getIns(),this.Anim=new a.default,this.Timer.StartTimer(),this.Timer.pauseTimer(),this.animNode=e,this.Anim.bgSprite=i,this.Anim.rootNode=e,this.AudioId={},this.QuitNode=t,this.QuitNode.on(cc.Node.EventType.TOUCH_START,function(){cc.tween(l.QuitNode).to(.1,{scale:.8}).start()},this),this.QuitNode.on(cc.Node.EventType.TOUCH_END,function(){cc.tween(l.QuitNode).to(.1,{scale:1}).start()},this),this.QuitNode.on(cc.Node.EventType.TOUCH_CANCEL,function(){cc.tween(l.QuitNode).to(.1,{scale:1}).start()},this)}return t.prototype.quitButtonCb=function(t){var e=this;void 0===t&&(t=!1),setTimeout(function(){e._comp.GameController.EixtGame()},t?500:0)},t.prototype.playStartAnim=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return(t=this.Config.getBaseConfig().Anim_plot).isEnable?(this.Anim.setOpacity(t.bgOpacity),[4,this.Anim.playStoryAnim(this.Config.getOtherList().Spine_AnimPlot,t.hasVoice?this.Config.getOtherList().Voice_Plot:null,t.clickStop,t.finishedAutoToGuide)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[4,this.playGuideAnim()];case 3:return e.sent(),this.startAnimIsFinish(),[2]}})})},t.prototype.playGuideAnim=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return(t=this.Config.getBaseConfig().Anim_Guide).isEnable?(this.Anim.setOpacity(t.bgOpacity),[4,this.Anim.playGuideAnim(this.Config.getOtherList().Spine_AnimGuide,this.Config.getOtherList().Name_AnimGuide,t.hasVoice?this.Config.getOtherList().Voice_Guide:null,t.clickStop,t.finishedAutoToNextStep)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.run=function(){var t=this;this.Config.checkConfig()&&(cc.game.on(cc.game.EVENT_HIDE,this.gameHideEvent.bind(this)),cc.game.on(cc.game.EVENT_SHOW,this.gameShowEvent.bind(this)),this.QuitNode.getChildByName("texture").getComponent(cc.Sprite).spriteFrame=u.default.Instance.GetAsset(this.Config.getOtherList().Image_BtnQuit,l.AssetType.Image),this.QuitNode.on("touchend",function(){var e=f.default.playEff(u.default.Instance.GetAsset(t.Config.getOtherList().Voice_BtnPress,l.AssetType.Sound));f.default.hideEffVolume(),cc.audioEngine.setVolume(e,1),t._comp.GameController.ShowEixtAlert(function(){t.quitButtonCb(),f.default.resumeEffVolume()},function(){f.default.resumeEffVolume()})}),p.default.PlayBGM(u.default.Instance.GetAsset(this.Config.getOtherList().Voice_Bgm,l.AssetType.Sound)),this.sortQuesDataBase(),this.init(),this.createQues(),this.flushUI(),this.playStartAnim())},t.prototype.onDestroy=function(){this.Config.checkConfig()&&(this.stopAudioID(),this.QuitNode.targetOff(this),this.quit(),cc.audioEngine.stopAllEffects())},t.prototype.getGameTime=function(){return this.GameMethod.getGameTime()},t.prototype.getGameScore=function(){return this.GameMethod.getGameScore()},t.prototype.stopAudioID=function(){this.AudioId.noActionAudioId&&(cc.audioEngine.stopEffect(this.AudioId.noActionAudioId),this.AudioId.noActionAudioId=null),this.AudioId.clickGameItemId&&(cc.audioEngine.stopEffect(this.AudioId.clickGameItemId),this.AudioId.clickGameItemId=null),this.AudioId.tipTimeAudioId&&(cc.audioEngine.stopEffect(this.AudioId.tipTimeAudioId),this.AudioId.tipTimeAudioId=null)},t}();n.Game_Abstract=m,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../AudioManager":"AudioManager","./units/Game_Method":"Game_Method","./units/M_AnimLayer":"M_AnimLayer","./units/M_Audio":"M_Audio","./units/M_ConfigT":"M_ConfigT","./units/M_Timer":"M_Timer","./units/M_Toast":"M_Toast","./units/M_Tool":"M_Tool"}],Game_Method:[function(t,e,n){"use strict";cc._RF.push(e,"f99cf2Bmn5D+6mXlfaNOCbo","Game_Method"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Assets/AssetManager"),i=t("../../../Assets/Assets"),s=t("./M_Audio"),r=t("./M_Tool"),c=function(){function t(t){this._cacheActionResult=[],this.gameController=t}return t.prototype.playStepRewardAnim=function(t,e){var n=this;return new Promise(function(o){e.isEnable?n.gameController.Reward_Step(t,1,e.toScoreBoard,e.canBreak,function(){o(!0)}):o(!0)})},t.prototype.stopVoiceAndEff=function(){var t;cc.audioEngine.stopEffect(this.effect),cc.audioEngine.stopEffect(this.voice),cc.audioEngine.stopEffect(this.manualEffect),null===(t=this.voiceAndEffFunction)||void 0===t||t.call(this),this.voiceAndEffFunction=null},t.prototype.playVoiceAndEff=function(t,e,n,c,a,u){var l=this;void 0===u&&(u=null),this.stopVoiceAndEff(),this.voiceAndEffFunction=u;for(var p=function(){l.voiceAndEffFunction=null,null==u||u()},h=[],f=0;f<e.length;f++)h.push(n[e[f]]);var d="";if(0!==h.length&&(d=h[r.default.getIns().randomAccess(0,e.length-1)]),0===c.length&&0===e.length&&0===a.length)return this.voiceAndEffFunction=null,void p();if(!o.default.Instance.GetAsset(c,i.AssetType.Sound)&&!o.default.Instance.GetAsset(a,i.AssetType.Sound)&&!o.default.Instance.GetAsset(d,i.AssetType.Sound))return this.voiceAndEffFunction=null,void p();if(t)if(0!==c.length)this.voice=s.default.playEff(o.default.Instance.GetAsset(c,i.AssetType.Sound),!1,function(){var t=!0,e=!0;if(o.default.Instance.GetAsset(a,i.AssetType.Sound)&&(t=!1),o.default.Instance.GetAsset(d,i.AssetType.Sound)&&(e=!1),t&&e)return l.voiceAndEffFunction=null,void p();l.manualEffect=s.default.playEff(o.default.Instance.GetAsset(a,i.AssetType.Sound),!1,function(){(t=!0)&&e&&p()}),l.effect=s.default.playEff(o.default.Instance.GetAsset(d,i.AssetType.Sound),!1,function(){e=!0,t&&e&&p()})});else{var m=!0,g=!0;if(o.default.Instance.GetAsset(a,i.AssetType.Sound)&&(m=!1),o.default.Instance.GetAsset(d,i.AssetType.Sound)&&(g=!1),m&&g)return void u(!0);s.default.playEff(o.default.Instance.GetAsset(a,i.AssetType.Sound),!1,function(){(m=!0)&&g&&p()}),s.default.playEff(o.default.Instance.GetAsset(d,i.AssetType.Sound),!1,function(){g=!0,m&&g&&p()})}else{var y=!0,_=!0,A=!0;if(o.default.Instance.GetAsset(a,i.AssetType.Sound)&&(y=!1),o.default.Instance.GetAsset(d,i.AssetType.Sound)&&(_=!1),o.default.Instance.GetAsset(c,i.AssetType.Sound)&&(A=!1),y&&_&&A)return void p();this.manualEffect=s.default.playEff(o.default.Instance.GetAsset(a,i.AssetType.Sound),!1,function(){(y=!0)&&_&&A&&p()}),this.voice=s.default.playEff(o.default.Instance.GetAsset(c,i.AssetType.Sound),!1,function(){A=!0,y&&_&&A&&p()}),this.effect=s.default.playEff(o.default.Instance.GetAsset(d,i.AssetType.Sound),!1,function(){_=!0,y&&_&&A&&p()})}},t.prototype.Reward_LvEnd=function(t){var e=this;return new Promise(function(n){t.isEnable?e.gameController.Reward_LvEnd(1,t.toScoreBoard,t.isClickStop,function(){n(!0)},t.autoToNextStep):n(!0)})},t.prototype.gameEndCB=function(){this.gameController.ComplateGame()},t.prototype.Reward_AllLevelPass=function(t){var e=this;t.isEnable?this.gameController.Reward_GameEnd(1,t.toScoreBoard,function(){e.gameEndCB()},!1):this.gameEndCB()},t.prototype.OnAnswer=function(t){this.gameController.OnAnswer(t,!1)},t.prototype.getGameTime=function(){var t={allTime:0,levelTime:[]};return this._cacheActionResult.forEach(function(e,n){t.levelTime[n]=[],e.forEach(function(e){t.allTime+=e.time,t.levelTime[n].push(e.time)})}),t},t.prototype.getGameScore=function(){var t=0,e=0;return this._cacheActionResult.forEach(function(n){n.forEach(function(n){t+=1,e+=n.score})}),t>0?r.default.getIns().toDecimal2(e/t):"0.00"},t.prototype.ScreenShoot=function(){this.gameController.ScreenShoot(!0,!1)},t}();n.default=c,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","./M_Audio":"M_Audio","./M_Tool":"M_Tool"}],ImageLoader:[function(t,e,n){"use strict";cc._RF.push(e,"7b856tb5IZDYrIHZMjPUxvp","ImageLoader");var o,i,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BGImageType=void 0,function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(i=n.BGImageType||(n.BGImageType={}));var c=cc._decorator,a=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.Left,e.sprite=null,e}return s(e,t),Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!1,configurable:!0}),e.prototype.SetImage=function(t){this.sprite.spriteFrame=t},r([u({type:cc.Enum(i)})],e.prototype,"type",void 0),r([u(cc.Sprite)],e.prototype,"sprite",void 0),r([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],InteractionController:[function(t,e,n){"use strict";cc._RF.push(e,"194f0TcgBNJmInwCjwLj5Cx","InteractionController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Action"),c=t("./AudioManager"),a=t("./GameMenu"),u=t("./LessonPerformance"),l=t("./VideoPlayer/GameReward/StarCollector"),p=cc._decorator,h=p.ccclass,f=p.property,d=p.menu,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OnInteractionComplate=new r.Action,e.stepStar=null,e.lvStar=null,e.endStar=null,e.starCollector=null,e.OnEnterInteractive=new r.Action,e.lessonPerformance=null,e}return i(e,t),e.prototype.onLoad=function(){this.Init()},e.prototype.Init=function(){var t=this;this.starCollector.Init(),this.lessonPerformance=new u.default(null),this.lessonPerformance.OnCombo.AddListenner(this,function(e,n,o,i){t.starCollector.Combo(e,o,i)})},e.prototype.OnReward_Step=function(t,e,n,o,i){c.default.Play(this.stepStar),this.starCollector.ActiveMask(!1),c.default.PlaySysSound(c.default.Reward_Step),this.starCollector.CreateStar_Line(1,e,t,0,1,n,this.starCollector.SetData(1,o,i))},e.prototype.OnReward_LvEnd=function(t,e,n,o,i){void 0===i&&(i=!0),c.default.Play(this.lvStar),this.starCollector.ActiveMask(!0),c.default.PlaySysSound(c.default.Reward_LvEnd),this.starCollector.CreateStar_Line(2,t,cc.Vec2.ZERO,200,1,e,this.starCollector.SetData(2,n,o))},e.prototype.OnReward_GameEnd=function(t,e,n,o){void 0===n&&(n=!1),c.default.Play(this.endStar),this.starCollector.ActiveMask(!0),c.default.PlaySysSound(c.default.Reward_LvEnd),this.starCollector.CreateStar_Circle(3,t,cc.v2(0,-150),36,90,300,1,e,this.starCollector.SetData(3,n,o))},e.prototype.EixtGme=function(){cc.audioEngine.stopAll()},e.prototype.AnswerCombo=function(t,e,n,o){void 0===n&&(n=!0),void 0===o&&(o=null),e?this.lessonPerformance.Combo(n,o):(this.lessonPerformance.ComboBreak(),this.starCollector.ClearCombo(),null==o||o())},s([f(cc.AudioClip)],e.prototype,"stepStar",void 0),s([f(cc.AudioClip)],e.prototype,"lvStar",void 0),s([f(cc.AudioClip)],e.prototype,"endStar",void 0),s([f(l.default)],e.prototype,"starCollector",void 0),s([h,d("GameUI/Interaction/InteractionController")],e)}(a.default);n.default=m,cc._RF.pop()},{"./Action":"Action","./AudioManager":"AudioManager","./GameMenu":"GameMenu","./LessonPerformance":"LessonPerformance","./VideoPlayer/GameReward/StarCollector":"StarCollector"}],LayoutHeight:[function(t,e,n){"use strict";cc._RF.push(e,"37be7EyQZZEo6ln9yEfMDRU","LayoutHeight");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.menu,a=r.ccclass,u=r.property,l=r.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._spacingY=0,e._childHeight=0,e._top=0,e._buttom=0,e}return i(e,t),Object.defineProperty(e.prototype,"spacingY",{get:function(){return this._spacingY},set:function(t){this._spacingY=t,this.resizeLayout()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childHeight",{get:function(){return this._childHeight},set:function(t){this._childHeight=t,this.resizeLayout()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){this._top=t,this.resizeLayout()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttom",{get:function(){return this._buttom},set:function(t){this._buttom=t,this.resizeLayout()},enumerable:!1,configurable:!0}),e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.CHILD_ADDED,this.resizeLayout.bind(this))},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.resizeLayout.bind(this)),this.resizeLayout()},e.prototype.resizeLayout=function(){for(var t=this.top,e=0;e<this.node.children.length;++e){var n=0;0===e?n=this.node.children[e].height*this.node.children[e].anchorY:(n=this.node.children[e].height*this.node.children[e].anchorY+this.node.children[e-1].height*this.node.children[e-1].anchorY,0!=this.childHeight&&(n=this.childHeight)),t+=(0==e?0:this.spacingY)+n,this.node.children[e].y=-t}0!==this.node.children.length?this.node.height=t+this.node.children[e-1].height*this.node.children[e-1].anchorY+this.buttom:this.node.height=0},e.prototype.getSizeHeight=function(t){for(var e=this.top,n=0;n<t;++n){var o=0;0===n?o=this.node.children[n].height*this.node.children[n].anchorY:(o=this.node.children[n].height*this.node.children[n].anchorY+this.node.children[n-1].height*this.node.children[n-1].anchorY,0!=this.childHeight&&(o=this.childHeight)),e+=(0==n?0:this.spacingY)+o}return 0!==this.node.children.length?e+this.node.children[n-1].height*this.node.children[n-1].anchorY+this.buttom:0},e.prototype.onLoad=function(){this.node.anchorY=1},e.prototype.start=function(){},s([u({serializable:!0})],e.prototype,"_spacingY",void 0),s([u({type:cc.Integer,serializable:!0})],e.prototype,"spacingY",null),s([u({serializable:!0})],e.prototype,"_childHeight",void 0),s([u({type:cc.Integer,serializable:!0})],e.prototype,"childHeight",null),s([u({serializable:!0})],e.prototype,"_top",void 0),s([u({type:cc.Integer,serializable:!0})],e.prototype,"top",null),s([u({serializable:!0})],e.prototype,"_buttom",void 0),s([u({type:cc.Integer,serializable:!0})],e.prototype,"buttom",null),s([a,l,c("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/LayoutHeight")],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],Layout:[function(t,e,n){"use strict";cc._RF.push(e,"9d0fdeLX91NoL2YZfNmhefW","Layout");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Layout=void 0;var r=t("./FeedBack"),c=t("./QuesContet"),a=cc._decorator,u=a.ccclass,l=(a.property,a.menu),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.useLayout=!1,e._layoutID=-1,e.layoutButtonNum=[4,3,2,3,4],e}var n;return i(e,t),n=e,e.prototype.getLayoutBtnNumber=function(t){return this.layoutButtonNum[t%5]},e.prototype.onLoad=function(){},e.prototype.hideAll=function(){this.useLayout=this.node.getChildByName("layout").active=!1},e.prototype.showLayout=function(t){return t in n.LayoutID&&(this.useLayout=!0,this._layoutID=t,this._layoutID>n.LayoutID.A5&&(cc.find("layout/layer_animfeedback/A",this.node).active=!(cc.find("layout/layer_animfeedback/B",this.node).active=!0),cc.find("layout/layer_content/A",this.node).active=!(cc.find("layout/layer_content/B",this.node).active=!0)),this._quesContent=this._layoutID>n.LayoutID.A5?cc.find("layout/layer_content/B",this.node).getComponent(c.default):cc.find("layout/layer_content/A",this.node).getComponent(c.default),this._feedBack=this._layoutID>n.LayoutID.A5?cc.find("layout/layer_animfeedback/B",this.node).getComponent(r.FeedBack):cc.find("layout/layer_animfeedback/A",this.node).getComponent(r.FeedBack),this.node.getChildByName("layout").active=!0,!0)},Object.defineProperty(e.prototype,"quesContent",{get:function(){return this.useLayout?this._quesContent:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"feedBack",{get:function(){return this.useLayout?this._feedBack:null},enumerable:!1,configurable:!0}),n=s([u,l("release/M001/Layout")],e)}(cc.Component);n.Layout=p,function(t){(function(t){t[t.Null=-1]="Null",t[t.A1=0]="A1",t[t.A2=1]="A2",t[t.A3=2]="A3",t[t.A4=3]="A4",t[t.A5=4]="A5",t[t.B1=5]="B1",t[t.B2=6]="B2",t[t.B3=7]="B3",t[t.B4=8]="B4",t[t.B5=9]="B5"})(t.LayoutID||(t.LayoutID={}))}(p=n.Layout||(n.Layout={})),n.Layout=p,cc._RF.pop()},{"./FeedBack":"FeedBack","./QuesContet":"QuesContet"}],LessonPerformance:[function(t,e,n){"use strict";cc._RF.push(e,"5fcb5YpqBNNUpfaCt4WvBom","LessonPerformance"),Object.defineProperty(n,"__esModule",{value:!0}),n.LessonCombo=void 0;var o=t("./Action");n.LessonCombo=function(){};var i=function(){function t(t){void 0===t&&(t=null),this.CurrentRightCount=0,this.MaxRightCount=0,this.OnCombo=new o.Action,t&&(this.CurrentRightCount=t.CurrentRightCount?t.CurrentRightCount:0,this.MaxRightCount=t.MaxRightCount?t.MaxRightCount:0)}return t.prototype.Combo=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=null),this.CurrentRightCount++,this.CurrentRightCount>this.MaxRightCount&&(this.MaxRightCount=this.CurrentRightCount),this.CurrentRightCount>=2?this.OnCombo.Invoke(this.CurrentRightCount,this.MaxRightCount,t,e):null==e||e(),this.CurrentRightCount},t.prototype.ComboBreak=function(){this.CurrentRightCount=0},t}();n.default=i,cc._RF.pop()},{"./Action":"Action"}],Lesson:[function(t,e,n){"use strict";cc._RF.push(e,"29e22zRe1JHs6cZ7IVeO6gA","Lesson"),Object.defineProperty(n,"__esModule",{value:!0}),n.Lesson=void 0;var o=t("../Log");n.Lesson=function(t){this.Name="",this.Id="",this.AssetURL="",t?(this.Name=t.name,this.Id=t.id,this.AssetURL=t.contentUrl):o.default.W("SectionLesson -> constructor"," data \u662f\u7a7a\u7684")},cc._RF.pop()},{"../Log":"Log"}],Logic:[function(t,e,n){"use strict";cc._RF.push(e,"23c9fmkJtpAioTG6u0gz7zG","Logic");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Logic=void 0;var c,a=t("./units/Tool"),u=t("./comp/FeedBack"),l=t("../../AudioManager"),p=t("../../Assets/AssetManager"),h=t("../../Assets/Assets"),f=t("../Config"),d=t("../../M010/common/units/M_Toast"),m=t("../../M010/common/units/M_Tool"),g=t("../../M010/common/units/Game_Method"),y=t("../../M017/comp/M017_BackGround"),_=["M001_BUTTON_FLASH1","M001_BUTTON_FLASH1","M001_BUTTON_FLASH3","M001_BUTTON_FLASH4","M001_BUTTON_FLASH5"],A=function(t){function e(e){var n=t.call(this,e.GameController.GetGameConfigName()||"Json_m001_main")||this;return n._curAnswerID=-1,n._allQueNum=0,n.LogicEnum=c.GAMEEND,n.scoreRecord=[],n._quesDataBase=[],n.clickStopFeedBack=0,n._comp=e,n.GameMethod=new g.default(n._comp.GameController),n.baseConfig&&n.otherList?(n.otherList.ButtonFlash&&(_=n.otherList.ButtonFlash),n._comp.Btn.setBtnRes(n.otherList.Button),n):(d.default.Instance.Show(d.ToastType.THROWERROR,"\u6e38\u620f\u914d\u7f6e\u8868\u8bfb\u53d6\u5931\u8d25,\u8bf7\u68c0\u67e5\u683c\u5f0f\u540e\u91cd\u8bd5!"),n)}return i(e,t),e.prototype.LoadQuesDataBase=function(){var t=this;if(this.baseConfig.Question_DataBase.forEach(function(e){var n=e;t._quesDataBase.push(n),n.forEach(function(e){var n=e;t._allQueNum+=n.repeatThisQuesNum})}),this.baseConfig.Database.radomSort){for(var e=[],n=0;n<this._quesDataBase.length;++n)e.push(n);var o=[];for(n=0;n<this._quesDataBase.length;++n){var i=a.default.getInstance().randomAccess(0,e.length-1);o[n]=this._quesDataBase[e[i]],e.splice(i,1)}this._quesDataBase=o}var s=0;this._quesDataBase.forEach(function(t){t.forEach(function(t){t.ID=s++})})},e.prototype.createQues=function(){var t=this;if(0!=this._curAnswerID||this._curQuesStruct&&!this._curQuesStruct.repeatThisQuesNum){if(0!=this._curAnswerID&&(this._curQuesStruct?this._curQuesStruct.repeatThisQuesNum--:this._quesDataBase[0][0].repeatThisQuesNum--),this._curAnswerID++,this.scoreRecord.push({wrongNum:0,score:100}),this._curQuesStruct&&this._curQuesStruct.repeatThisQuesNum||(this._curQuesStruct=this._quesDataBase.shift()[0],this._lastQuesRightRandomId=null),!this.baseConfig.SubScoreValue_N&&(this.baseConfig.SubScoreValue_N=1),this._curQuesStruct.select_Fixed.length&&(this._curQuesStruct.radom_Fixed.right.length||this._curQuesStruct.radom_Fixed.wrong.length))return void d.default.Instance.Show(d.ToastType.THROWERROR,"\u952e:select_Fixed \u952e:radom_Fixed \u51b2\u7a81 result:\u56fa\u5b9a\u9009\u9879\u4e0e\u968f\u673a\u9009\u9879\u4e0d\u53ef\u540c\u65f6\u9009\u62e9,\u8bf7\u5c06\u672a\u4f7f\u7528\u7684\u952e\u53ca\u5176\u5b50\u952e\u7f6e\u4e3a\u7a7a");if(this._curQuesStruct.radom_Fixed.right.length||this._curQuesStruct.radom_Fixed.wrong.length){if(this._curQuesStruct.select_Fixed=[],1==this._curQuesStruct.radom_Fixed.right.length&&1==this._curQuesStruct.repeatThisQuesNum&&d.default.Instance.Show(d.ToastType.WARRN,"\u952e:radom_Fixed result:\u968f\u673a\u9009\u9879\u65f6\u914d\u7f6e\u7684\u6b63\u786e\u9009\u9879\u6570\u91cf\u4e0d\u6ee1\u8db3\u4f01\u5212\u89c4\u5b9a\u91cd\u590d\u672c\u9898\u65f6\u76f8\u90bb2\u9898\u6b63\u786e\u7b54\u6848\u4e0d\u91cd\u590d\u7684\u8981\u6c42,\u5c06\u4f1a\u9020\u6210\u6b63\u786e\u7b54\u6848\u552f\u4e00\u8bf7\u77e5\u6653!"),this._curQuesStruct.radom_Fixed.wrong.length<this._comp.Layout.getLayoutBtnNumber(this._curQuesStruct.layoutID)-1)return void d.default.Instance.Show(d.ToastType.THROWERROR,"\u952e:radom_Fixed result:\u968f\u673a\u9009\u9879\u65f6\u914d\u7f6e\u7684\u9519\u8bef\u9009\u9879\u6570\u91cf\u4e0d\u8db3\u8bf7\u6dfb\u52a0");var e=0;do{e=Math.floor(Math.random()*this._curQuesStruct.radom_Fixed.right.length)}while(this._lastQuesRightRandomId==e);this._lastQuesRightRandomId=e,this._curQuesStruct.rightAwserID=e,this._curQuesStruct.select_Fixed.push(this._curQuesStruct.radom_Fixed.right[e]);for(var n=[],o=0;o<this._comp.Layout.getLayoutBtnNumber(this._curQuesStruct.layoutID)-1;++o){do{e=Math.floor(Math.random()*this._curQuesStruct.radom_Fixed.wrong.length)}while(-1!==n.indexOf(e));n.push(e),this._curQuesStruct.select_Fixed.push(this._curQuesStruct.radom_Fixed.wrong[e])}}this._curQuesStruct.select_Fixed.forEach(function(e,n){e.isRight=n==t._curQuesStruct.rightAwserID}),this._curQuesStruct.radomSelectPos&&(this._curQuesStruct.select_Fixed=m.default.getIns().radomArrValue(this._curQuesStruct.select_Fixed))}this.flushUI()},e.prototype.InitUI=function(){this.baseConfig.BgSetting||(this.baseConfig.BgSetting={centerRes:this.otherList.BG_IMAGE?this.otherList.BG_IMAGE:"M001_BG",leftRes:"M001_BGIMG_L",rightRes:"M001_BGIMG_R",spineRes:this.otherList.spine.bgAnim.src?this.otherList.spine.bgAnim.src:"",idle:this.otherList.BgAnim.stop,run:this.otherList.BgAnim.play}),this._comp.BackGround.setBgRes(this.baseConfig.BgSetting),this._comp.BackGround.bgType!==y.M017_BGTYPE.BOTHOF&&this._comp.BackGround.bgType!==y.M017_BGTYPE.SPINE||this._comp.BackGround.playBgAnim(this.baseConfig.BgSetting.run,this.baseConfig.BgSetting.idle),l.default.PlayBGM(p.default.Instance.GetAsset(this.otherList.BGM?this.otherList.BGM:"M001_BGM",h.AssetType.Sound)),this._comp.AnimPolt.setPoltAnim(this.otherList.spine.poltAnim.audio,this.otherList.spine.poltAnim.src),"string"==typeof this.otherList.spine.guideAnim.src?this._comp.AnimPolt.setGuideAnim(this.otherList.spine.guideAnim.animName,this.otherList.spine.guideAnim.src):this._comp.AnimPolt.setGuideAnim(this.otherList.spine.guideAnim.animName,["M001_GUIDE01_ANIMA1","M001_GUIDE01_ANIMA2","M001_GUIDE01_ANIMA3","M001_GUIDE01_ANIMA4","M001_GUIDE01_ANIMA5"][this._quesDataBase[0][0].layoutID]),this._comp.FeedBack.setAnim(this.otherList.spine.feedBackAnim.anim,this.otherList.spine.feedBackAnim.src),this._comp.QuesContent.setReadPlayAnim(this.otherList.spine.replayAnim.src,this.otherList.ReadBackButtonEffect?this.otherList.ReadBackButtonEffect:"M001_BTN_REPLAY"),this._comp.QuesContent.setQuestionBaseFrame(this.otherList.QuestionBarImage?this.otherList.QuestionBarImage:"M001_QUES_BAR"),this._comp.QuesContent.setQuitButton(this._comp.Quit,this._comp.GameController),this._comp.QuesContent.setQuestionNumBaseFrame(this.otherList.QuestionNumBgRes?this.otherList.QuestionNumBgRes:"M001_QUESNUMBG"),1==this._allQueNum&&this._comp.QuesContent.hideQuestionNumTip(),this._comp.Btn.setClickScale(this.baseConfig.Select_Button.clickScaleValue),this._comp.Btn.buttonGuideBlinkDuration=this.baseConfig.Select_Button.frameBlinkTime,this._comp.OutTimer.setOutTimer(this.baseConfig.TimeOut_GuideVoice,this.otherList.OutTimeVoice?this.otherList.OutTimeVoice:"M001_TIMEOUT_VOICE",this.PlayRightTip.bind(this),this.ClickAllScreen.bind(this)),this._comp.FeedBack.playFeedBack(u.FeedAnimType.INIT)},e.prototype.ClickAllScreen=function(){switch(this.LogicEnum){case c.TARGETGUIDEVOICE:this._curQuesStruct.voiceTargetGuide.clickStop&&(this._comp.QuesContent.stopGuideVoice(),this._comp.Btn.StopTipAnim(),this.GameStart());case c.GAMESTARTVOICE:0!=this._curAnswerID&&this._curQuesStruct.questionVoice.playOnLoadClickStop&&this._comp.QuesContent.stopReadBack();break;case c.GAMESTART:this._comp.QuesContent.stopReadBack(),255!==this.clickStopFeedBack&&(this.clickStopFeedBack>0?(console.log("\u6b63\u786e\u6253\u65ad"),this.GameMethod.stopVoiceAndEff(),this._comp.FeedBack.stopAsync=!0,this._comp.Btn.StopTipAnim(),this.baseConfig.Select_Right.selectedEnd&&this._comp.Btn.hideButton(this.clickStopFeedBack-1)):this.clickStopFeedBack<0&&(console.log("\u9519\u8bef\u6253\u65ad"),this.GameMethod.stopVoiceAndEff(),this._comp.FeedBack.stopAsync=!0,this.baseConfig.Select_Error.selectedEnd&&(this._comp.Btn.StopTipAnim(),this._comp.Btn.hideButton(Math.abs(this.clickStopFeedBack)-1)),this._comp.Btn.resumClick())),0!==this.clickStopFeedBack&&(this.clickStopFeedBack=255)}},e.prototype.flushUI=function(){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this.UpdateCompRef(),this.clickStopFeedBack=0,this._comp.FeedBack.setRightWrongAnimName(this._curQuesStruct.feedBackAnim),this._comp.QuesContent.setQuestionImage(this._curQuesStruct.questionImage),this._comp.QuesContent.setQuestion(this._curQuesStruct.questionContent,this._curQuesStruct.questionContentColor),this._comp.QuesContent.setQuesNum(this._curAnswerID,this._allQueNum),this._comp.Btn.setBtnRes(this.otherList.Button),this._comp.Btn.setBtnContent(this._curQuesStruct.select_Fixed),this._comp.Btn.setClickBtnCb(this.OnSelect.bind(this)),this._comp.QuesContent.setReadBack(this._curQuesStruct.questionVoice),[4,this.setUIState(!0)];case 1:return t.sent(),0!=this._curAnswerID&&this.PlayTargetGuide(),[2]}})})},e.prototype.PlayLvRewardAnim=function(t){this._curAnswerID===this._allQueNum-1?this.baseConfig.Anim_EveryQuestion.lastQuestionPlayEveryRewardAnim&&this.baseConfig.Anim_EveryQuestion.isEnable?this._comp.GameController.Reward_LvEnd(1,this.baseConfig.Anim_EveryQuestion.toScoreBoard,this.baseConfig.Anim_EveryQuestion.clickStop,function(){null==t||t()}):null==t||t():this.baseConfig.Anim_EveryQuestion.isEnable?this._comp.GameController.Reward_LvEnd(1,this.baseConfig.Anim_EveryQuestion.toScoreBoard,this.baseConfig.Anim_EveryQuestion.clickStop,function(){null==t||t()}):null==t||t()},e.prototype.OnSelect=function(t,e,n){return s(this,void 0,void 0,function(){var t,o,i,a,l,p=this;return r(this,function(){for(this._comp.Btn.stopClick(),t=0,o=0,i=function(n){return s(p,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return++t>=o?n?(this.LogicEnum=c.PLAYFEEDBACKPLOT,[4,this.setUIState(!1)]):[3,3]:[3,4];case 1:return i.sent(),[4,this._comp.FeedBack.playFeedBack(u.FeedAnimType.PLOT)];case 2:return i.sent(),this.PlayLvRewardAnim(this._curAnswerID==this._allQueNum-1?this.GameMethod.Reward_AllLevelPass.bind(this.GameMethod,this.baseConfig.Anim_LevelPass):this.createQues.bind(this)),[3,4];case 3:this.baseConfig.Select_Error.selectedEnd&&(this._comp.Btn.StopTipAnim(),this._comp.Btn.hideButton(e)),this._comp.Btn.resumClick(),i.label=4;case 4:return[2]}})})},a=[],l=0;l<(n.isRight?this._curQuesStruct.voiceAnwserRight.length:this._curQuesStruct.voiceAnwserWrong.length);++l)a.push(l);return n.isRight?(this._comp.OutTimer.cleanTimer(),this.GameMethod.OnAnswer(!0),this.baseConfig.Select_Right.isClickStop&&(this.clickStopFeedBack=e+1),o=3,(void 0===this._curQuesStruct.ScreenShoot||this._curQuesStruct.ScreenShoot)&&this.GameMethod.ScreenShoot(),this._comp.QuesContent.ReadBackIsClick=!1,this._comp.Btn.StopTipAnim(),this.PlayStepAnimation(this._comp.Btn.getBtnPos(e),function(){void 0!==p.baseConfig.Select_Button.clickedHide&&p.baseConfig.Select_Button.clickedHide&&p._comp.Btn.hideButton(),p.baseConfig.Select_Right.selectedEnd&&p._comp.Btn.hideButton(e),i(!0)}),this.GameMethod.playVoiceAndEff(this._curQuesStruct.voiceAndEffPlay,a,this._curQuesStruct.voiceAnwserRight,n.voice,this.baseConfig.Select_Rightff,function(){(p.baseConfig.VoiceComplateToPoltFeedBack||void 0===p.baseConfig.VoiceComplateToPoltFeedBack)&&i(!0)}),!1===this.baseConfig.VoiceComplateToPoltFeedBack&&i(!0),this._comp.FeedBack.playFeedBack(u.FeedAnimType.RIGHT).then(function(){i(!0)})):(this.baseConfig.Select_Error.isClickStop&&(this.clickStopFeedBack=-(e+1)),this.GameMethod.OnAnswer(!1),o=2,this.scoreRecord[this.scoreRecord.length-1].score=this.scoreRecord[this.scoreRecord.length-1].score-this.baseConfig.SubScoreValue_N>0?this.scoreRecord[this.scoreRecord.length-1].score-this.baseConfig.SubScoreValue_N:0,0!==this.baseConfig.Select_Error.tipRightNum&&++this.scoreRecord[this.scoreRecord.length-1].wrongNum==this.baseConfig.Select_Error.tipRightNum&&this._comp.Btn.PlayTipAnim(this._comp.Btn.getRightAnwserID(),this.baseConfig.Anim_TipRightPlane,this.baseConfig.Anim_TipRightRes?this.baseConfig.Anim_TipRightRes:"M001_RightTip"),this.GameMethod.playVoiceAndEff(this._curQuesStruct.voiceAndEffPlay,a,this._curQuesStruct.voiceAnwserWrong,n.voice,this.baseConfig.Select_WrongEff,function(){i(!1)}),this._comp.FeedBack.playFeedBack(u.FeedAnimType.WRONG).then(function(){i(!1)})),[2]})})},e.prototype.setUIState=function(t){return s(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return t?(this._comp.Btn.show(),[4,this._comp.QuesContent.show()]):[3,2];case 1:return e.sent(),[3,4];case 2:return this._comp.Btn.hide(),[4,this._comp.QuesContent.hide()];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.PlayStepAnimation=function(t,e){this.baseConfig.Select_Right.playRewardAnim?this._comp.GameController.Reward_Step(t,1,this.baseConfig.Select_Right.toScoreBoard,!1,e.bind(this)):null==e||e()},e.prototype.UpdateCompRef=function(){this._comp.Layout.showLayout(this._curQuesStruct.layoutID),this._comp.Btn.reSetPos(this._curQuesStruct.layoutID),this._comp.QuesContent=this._comp.Layout.quesContent,this._comp.FeedBack=this._comp.Layout.feedBack},e.prototype.PlayRightTip=function(){var t=this._comp.Btn.getRightAnwserID();this._comp.Btn.PlayTipAnim(t,this.baseConfig.Anim_TipRightPlane,this.baseConfig.Anim_TipRightRes?this.baseConfig.Anim_TipRightRes:"M001_RightTip")},e.prototype.PlayTargetGuide=function(){var t=this;this.LogicEnum=c.TARGETGUIDEVOICE,this._comp.Btn.stopClick(),this.baseConfig.Database.guideaAndVoiceFirst&&0!==this._curAnswerID?this.GameStart():this._curQuesStruct.voiceTargetGuide.res?(this.PlayGuideAnim(),this._comp.QuesContent.playGuideVoice(this._curQuesStruct.voiceTargetGuide,function(){t._comp.Btn.StopTipAnim(),t.GameStart()})):this.GameStart()},e.prototype.PlayGuideAnim=function(){for(var t=!1,e=0;e<this._comp.Layout.getLayoutBtnNumber(this._curQuesStruct.layoutID);++e)if((o=this._curQuesStruct.selectGuide[e])&&o.start!==o.end&&0!==o.end){t=!0;break}if(t){var n;for(n=null!=this.otherList.animTargetGuidePlane?this.otherList.animTargetGuidePlane:this._curQuesStruct.animTargetGuidePlane,e=0;e<this._comp.Layout.getLayoutBtnNumber(this._curQuesStruct.layoutID);++e){var o;if((o=this._curQuesStruct.selectGuide[e])&&o.start!==o.end&&0!==o.end){var i;i=this.otherList.AnimTargetGuideRes&&0!=n?1!=n||this.otherList.AnimTargetGuideRes?this.otherList.AnimTargetGuideRes:"M001_RightTip":_[this._curQuesStruct.layoutID],this._comp.Btn.PlayTipAnim(e,n,i,o.start,o.end-o.start)}}}},e.prototype.GameStart=function(){var t=this;this.LogicEnum=c.GAMESTARTVOICE,this._comp.QuesContent.ReadBackIsClick=!0,this._curQuesStruct.questionVoice.playOnLoadClickStop||(this._curQuesStruct.questionVoice.playOnLoadClickStop=!1),0==this.baseConfig.Select_Error.tipRightNum&&this._comp.Btn.PlayTipAnim(this._comp.Btn.getRightAnwserID(),this.baseConfig.Anim_TipRightPlane,this.baseConfig.Anim_TipRightRes);var e=!1;!this._curQuesStruct.questionVoice.playOnLoadClickStop&&this._curQuesStruct.questionVoice.whenStartPlayVoice||(e=!0,this._comp.Btn.resumClick(),this._comp.OutTimer.startOutTimer(),this.LogicEnum=c.GAMESTART),this._curQuesStruct.questionVoice.whenStartPlayVoice&&this._comp.QuesContent.playReadBack(function(){e||(t._comp.Btn.resumClick(),t._comp.OutTimer.startOutTimer(),t.LogicEnum=c.GAMESTART)})},e.prototype.run=function(){return s(this,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return this.LoadQuesDataBase(),this.createQues(),this.InitUI(),this.baseConfig.Anim_polt.isEnable?(this._comp.AnimPolt.setBgOpacity(255*this.baseConfig.Anim_polt.bgOpacity),this._comp.AnimPolt.PoltConfig=this.baseConfig.Anim_polt,[4,this._comp.AnimPolt.runPoltAnim()]):[3,2];case 1:e.sent(),e.label=2;case 2:return this.baseConfig.Anim_Guide.isEnable&&(this._comp.AnimPolt.setBgOpacity(255*this.baseConfig.Anim_Guide.bgOpacity),this._comp.AnimPolt.GuideConfig=this.baseConfig.Anim_Guide,"string"==typeof this.baseConfig.Anim_Guide.src&&(this.baseConfig.Anim_Guide.src=[this.baseConfig.Anim_Guide.src]),this._comp.AnimPolt.runGuide(this.otherList.spine.guideAnim.animName,this.baseConfig.Anim_Guide.src).then(function(){var e;null===(e=t.PlayTargetGuide)||void 0===e||e.call(t)})),[2]}})})},e.prototype.getGameScore=function(){var t=0;return this.scoreRecord.forEach(function(e){t+=e.score}),this.scoreRecord.length>0?m.default.getIns().toDecimal2(t/this.scoreRecord.length):"0.00"},e}(f.Config);n.Logic=A,function(t){t[t.TARGETGUIDEVOICE=0]="TARGETGUIDEVOICE",t[t.GAMESTARTVOICE=1]="GAMESTARTVOICE",t[t.GAMESTART=2]="GAMESTART",t[t.PLAYFEEDBACKPLOT=3]="PLAYFEEDBACKPLOT",t[t.GAMEEND=4]="GAMEEND"}(c||(c={})),cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../AudioManager":"AudioManager","../../M010/common/units/Game_Method":"Game_Method","../../M010/common/units/M_Toast":"M_Toast","../../M010/common/units/M_Tool":"M_Tool","../../M017/comp/M017_BackGround":"M017_BackGround","../Config":"Config","./comp/FeedBack":"FeedBack","./units/Tool":"Tool"}],Log:[function(t,e,n){"use strict";cc._RF.push(e,"b4947tqcnBPopF1CPZYgBln","Log");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,c=s.length;r<c;r++,i++)o[i]=s[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.D=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.Debug&&console.log.apply(console,o([e],n))},t.E=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.Debug&&console.error.apply(console,o([e],n))},t.W=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.Debug&&console.warn.apply(console,o([e],n))},t.DColor=function(e,n){t.Debug&&console.log("%c"+e,"color:"+n)},t.Debug=!0,t}();n.default=i,cc._RF.pop()},{}],M003AnimationSequence:[function(t,e,n){"use strict";cc._RF.push(e,"9a11e4p0UZCpqFePdD3BLVc","M003AnimationSequence"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.data=[],this.index=0}return t.prototype.Add=function(t,e){return e&&e.isOn?(this.data.push({type:t,config:e}),this):this},t.prototype.Play=function(t,e,n,o){var i=this.GetNextAnimation(),s=this;i?t(i.type,i.config,function(){null==e||e(i.type,i.config)},function(){null==n||n(i.type,i.config),s.Play(t,e,n,o)}):o&&o()},t.prototype.GetNextAnimation=function(){return this.index>=this.data.length?null:this.data[this.index++]},t}();n.default=o,cc._RF.pop()},{}],M003AnimationType:[function(t,e,n){"use strict";cc._RF.push(e,"afa14DMHlpEq7dP8cqP9CcD","M003AnimationType"),Object.defineProperty(n,"__esModule",{value:!0}),n.M003AnimationType=void 0,function(t){t[t.None=0]="None",t[t.Polt=1]="Polt",t[t.Guide=2]="Guide",t[t.LvPass=3]="LvPass",t[t.LvLose=4]="LvLose",t[t.Summary=5]="Summary",t[t.Ready=6]="Ready"}(n.M003AnimationType||(n.M003AnimationType={})),cc._RF.pop()},{}],M003AnswerAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"d61a43FVS9OqJxz67cjn+Mq","M003AnswerAnimation");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../SPLoder"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animation=null,e.aniName="",e.target=null,e}return i(e,t),e.prototype.Init=function(t){this.target=t},e.prototype.SetAnimation=function(t){return r(this,void 0,void 0,function(){var e,n,o;return c(this,function(i){switch(i.label){case 0:return t&&t.name?this.aniName==t.name?[3,2]:(this.target.Show(!1),this.animation&&(this.target.SetTarget(null),this.animation.DestroyAllNodes()),e=this,[4,this.LoadSpineByData(t,this.node)]):[2];case 1:e.animation=i.sent(),this.animation&&(this.SetSpeed(.01),n=this.animation.GenerateSomeNodes("hook"),(o=new cc.Node("pTemp")).setParent(n),o.setPosition(cc.Vec2.ZERO),this.target.SetTarget(null),this.target.node.setParent(o),this.target.node.setPosition(cc.Vec2.ZERO),this.target.node.angle=-90,this.target.Show(!0)),i.label=2;case 2:return[2]}})})},e.prototype.OnRight=function(t){this.scheduleOnce(function(){null==t||t()},this.animation.Play("right").animation.duration)},e.prototype.OnWrong=function(t){this.scheduleOnce(function(){null==t||t()},this.animation.Play("wrong").animation.duration)},e.prototype.OnEnter=function(){this.animation.Play("initialize"),this.animation.Next("wait",!0)},e.prototype.SetSpeed=function(t){this.animation&&(this.animation.anima.timeScale=t)},s([l],e)}(a.default));n.default=p,cc._RF.pop()},{"../SPLoder":"SPLoder"}],M003AnswerFollw:[function(t,e,n){"use strict";cc._RF.push(e,"bb4a1Mcw7ZMp5BKFxhgUVau","M003AnswerFollw");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),s([c],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],M003AnswerItem:[function(t,e,n){"use strict";cc._RF.push(e,"af534+pG+5GnaF4UM/TTaHh","M003AnswerItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Assets/AssetManager"),u=t("../Assets/Assets"),l=t("../Log"),p=t("../UIBase"),h=t("./M003AnswerAnimation"),f=t("./M003Articulated"),d=cc._decorator,m=d.ccclass,g=(d.property,d.menu),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isActive=!0,e.answerBG=null,e.answerIamge=null,e.answerText=null,e.bgName="",e.clickRect=null,e.answer=null,e.isEnabled=!1,e.subButton=null,e.pressScale=1,e.animation=null,e}return i(e,t),Object.defineProperty(e.prototype,"IsActeve",{get:function(){return this.isActive},enumerable:!1,configurable:!0}),e.prototype.EnabledItem=function(t){this.isEnabled&&!this.isActive||(this.isEnabled=t)},e.prototype.GetItemPosition=function(){return this.node.getPosition()},Object.defineProperty(e.prototype,"Answer",{get:function(){return this.answer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Enabled",{get:function(){return this.isEnabled},set:function(t){this.isEnabled!=t&&(this.maskNode&&(this.maskNode.active=!t),this.isEnabled=t)},enumerable:!1,configurable:!0}),e.prototype.SetPressScale=function(t){this.pressScale=t},e.prototype.GetData=function(){return this.answer},e.prototype.SetData=function(t){return r(this,void 0,void 0,function(){var e,n;return c(this,function(o){switch(o.label){case 0:return t?(this.isActive=!0,this.Show(!0),this.answer=t,this.bgName!=t.answerBG&&(this.bgName=t.answerBG,this.bgName?(e=a.default.Instance.GetAsset(this.bgName,u.AssetType.Image),this.answerBG.spriteFrame=e):(this.answerBG.spriteFrame=null,this.answerBG.node.width=this.answerBG.node.height=0)),t.answerImage?(e=a.default.Instance.GetAsset(t.answerImage,u.AssetType.Image),this.answerIamge.spriteFrame=e):(this.answerIamge.spriteFrame=null,this.answerIamge.node.width=this.answerIamge.node.height=0),this.answerText&&(this.answerText.string=t.text?t.text:""),this.answerText&&t.color&&(this.answerText.node.color=cc.color().fromHEX(t.color)),this.subButton&&(this.subButton.scale=1),this.node.scale=1,this.Enabled=!0,this.answerIamge&&(this.answerIamge.trim=!1,this.answerIamge.sizeMode=cc.Sprite.SizeMode.RAW),this.answerBG&&(this.answerBG.trim=!1,this.answerBG.sizeMode=cc.Sprite.SizeMode.RAW),n=p.default.StringToVec2(t.rect),this.clickRect.setContentSize(n.x,n.y),this.clickRect.getComponent(cc.Sprite).enabled=t.debug,[4,this.animation.SetAnimation(t.spine)]):(l.default.E("M003AnswerItem -> SetData","AnswerData Is Null"),[2]);case 1:return o.sent(),[2]}})})},e.prototype.Init=function(t){var e=this;this.maskNode=new cc.Node("mask"),this.maskNode.setParent(this.node),this.maskNode.setPosition(cc.Vec2.ZERO),this.maskNode.addComponent(cc.BlockInputEvents),this.maskNode.width=this.node.width,this.maskNode.height=this.node.height,this.answerBG=this.getComponent(cc.Sprite),this.answerIamge=this.Find("itemImage").getComponent(cc.Sprite),this.answerText=this.Find("itemImage/text").getComponent(cc.Label),this.subButton=this.answerIamge.node,this.animation=this.Find("fish").getComponent(h.default),this.animation.Init(this.answerIamge.getComponent(f.default)),this.clickRect=this.Find("clickRect"),this.clickRect.on(cc.Node.EventType.TOUCH_END,function(){e.isEnabled&&e.isActive&&t.OnSelectAnswer(e)})},e.prototype.ChangeSpeed=function(t){this.animation.SetSpeed(t)},e.prototype.ResetItem=function(t){this.isActive=t,t&&this.animation.OnEnter()},e.prototype.OnSetClickAction=function(t){var e=this,n=null,o=function(t,e){n&&(n.stop(),n=null);var o=.1-.1*Math.abs(e-t.scale);n=cc.tween(t).to(o,{scale:e}).start()},i=function(n){var i;o((null===(i=e.answer)||void 0===i?void 0:i.bindBottomBox)?e.node:e.subButton,1),e.isEnabled&&n&&t.OnSelectAnswer(e)};this.subButton.on(cc.Node.EventType.TOUCH_END,function(){i(!0)}),this.subButton.on(cc.Node.EventType.TOUCH_CANCEL,function(){i(!1)})},e.prototype.OnSelect=function(t,e){return void 0===e&&(e=null),!!this.isActive&&(this.isActive=!1,t?this.animation.OnRight(e):this.animation.OnWrong(e),!0)},e.prototype.HidItem=function(){this.isEnabled=!1,this.answer&&(this.answer.bindBottomBox?this.Show(!1):this.subButton.active=!1)},e.prototype.GetTipsNode=function(){return this.node},s([m,g("Game/Game003/M003AnswerItem")],e)}(p.default);n.default=y,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../Log":"Log","../UIBase":"UIBase","./M003AnswerAnimation":"M003AnswerAnimation","./M003Articulated":"M003Articulated"}],M003AnswerTipsTool:[function(t,e,n){"use strict";cc._RF.push(e,"d37c8hxljFFUKglnlYAw7GO","M003AnswerTipsTool"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Action"),i=function(){function t(t){this.data=null,this.timer=0,this.time=0,this.showTips=!1,this.OnTips=new o.Action,this.OnReset=new o.Action,this.wrongCount=0,this.wrongCountMax=0,this.data=t,this.wrongCountMax=(null==t?void 0:t.tipsWrongCount)>0?null==t?void 0:t.tipsWrongCount:-1}return Object.defineProperty(t.prototype,"CurrentWrongCount",{get:function(){return this.wrongCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"MaxWrongCount",{get:function(){return this.wrongCountMax},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsMaxWrong",{get:function(){return this.wrongCount>=this.wrongCountMax},enumerable:!1,configurable:!0}),t.prototype.ShowAnswerTips=function(t){this.OnTips.Invoke(this.data,t,!0)},t.prototype.ResetRightAnswerTips=function(t){void 0===t&&(t=!1),this.data&&this.data.isOn&&(this.showTips=!0,this.timer=0,this.time=this.data.tipsTime,t&&(this.wrongCount=0),this.OnReset.Invoke())},t.prototype.StopTips=function(){this.showTips=!1},t.prototype.OnAnswerWrong=function(){this.wrongCountMax>0&&(this.wrongCount++,this.wrongCount>=this.wrongCountMax&&this.ShowAnswerTips(!1))},t.prototype.Update=function(t){this.data&&this.data.isOn&&this.time>0&&this.showTips&&(this.timer+=t,this.timer>=this.time&&(this.ShowAnswerTips(!0),this.showTips=!1))},t}();n.default=i,cc._RF.pop()},{"../Action":"Action"}],M003Articulated:[function(t,e,n){"use strict";cc._RF.push(e,"5ee1cX9fSZPaLN7E5Ni/t/n","M003Articulated");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Transform"),c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return i(e,t),e.prototype.SetTarget=function(t){this.target=t},e.prototype.lateUpdate=function(){if(this.target&&this.target.isValid){this.target.parent?this.position=this.target.parent.convertToWorldSpaceAR(this.target.getPosition()):this.localPosition=this.target.getPosition();var t=this.target;for(t.scale;t;)console.error(t.name,t.scale),(t=t.parent)&&t.scale}},s([a],e)}(r.default));n.default=u,cc._RF.pop()},{"../Transform":"Transform"}],M003EffectCache:[function(t,e,n){"use strict";cc._RF.push(e,"d0b1aNznmdKfK9iNwg1vbqo","M003EffectCache"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Assets/AssetManager"),i=t("./M003Effect"),s=["right","wrong"],r=function(){function t(t){this.data=new Map,this.effectConfig=null,this.effectConfig=t}return t.prototype.GetEffect=function(t,e){if(void 0===e&&(e=null),!this.effectConfig)return null;var n=this.data.get(t);n||(n=[],this.data.set(t,n));var r=this.find(n);if(!r){var c=o.default.Instance.GetParticle(this.effectConfig[s[t]],"particle");c&&((r=c.node.addComponent(i.default)).Init(c,t),n.push(r))}return r&&e&&r.node.setParent(e),r},t.prototype.find=function(t){for(var e=0,n=t;e<n.length;e++){var o=n[e];if(!o.node.active)return o}return null},t}();n.default=r,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","./M003Effect":"M003Effect"}],M003Effect:[function(t,e,n){"use strict";cc._RF.push(e,"d957f1MCmxNCYdBqDpG61eG","M003Effect");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.M003EffectType=void 0;var r,c=t("../Transform");(function(t){t[t.Right=0]="Right",t[t.Wrong=1]="Wrong"})(r=n.M003EffectType||(n.M003EffectType={}));var a=cc._decorator,u=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.Right,e.particle=null,e}return i(e,t),Object.defineProperty(e.prototype,"Type",{get:function(){return this.type},enumerable:!1,configurable:!0}),e.prototype.Init=function(t,e){this.particle=t,this.type=e},e.prototype.Play=function(t,e){var n=this;void 0===t&&(t=cc.Vec2.ZERO),void 0===e&&(e=3),this.localPosition=t,this.Show(!0),this.particle&&this.particle.resetSystem(),this.scheduleOnce(function(){n.Show(!1)},e)},s([u],e)}(c.default));n.default=l,cc._RF.pop()},{"../Transform":"Transform"}],M003GameAniamtion:[function(t,e,n){"use strict";cc._RF.push(e,"c2a42a0AmlJPJ4lUNKQLFk0","M003GameAniamtion");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../SPLoder"),u=t("./M003AnimationType"),l=t("../AudioManager"),p=cc._decorator,h=p.ccclass,f=p.property,d=p.menu,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=u.M003AnimationType.None,e.animation=null,e.switch=!1,e.complateCB=null,e.complateOne=!1,e.lastAnimationName="",e.voiceID=-1,e.aniPos=cc.Vec2.ZERO,e}return i(e,t),Object.defineProperty(e.prototype,"AnimationType",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Switch",{get:function(){return this.switch},enumerable:!1,configurable:!0}),e.prototype.Init=function(){var t=this;this.Show(!1),this.node.on(cc.Node.EventType.TOUCH_START,function(){var e;t.data?(t.data.clickBreak||t.complateOne)&&(t.unscheduleAllCallbacks(),null===(e=t.complateCB)||void 0===e||e.call(t),cc.audioEngine.stop(t.voiceID),t.Show(!1)):t.Show(!1)})},e.prototype.SetData=function(t){return r(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.data==t?[3,2]:(this.data=t,t?(this.switch=t.isOn,[4,this.loadSP(0)]):[3,2]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.loadSP=function(t){var e,n,o;return r(this,void 0,Promise,function(){var i,s,r;return c(this,function(c){switch(c.label){case 0:return(null===(n=null===(e=this.data)||void 0===e?void 0:e.spine)||void 0===n?void 0:n.length)>0&&t<this.data.spine.length&&(i=null===(o=this.data)||void 0===o?void 0:o.spine[t])?this.lastAnimationName==i.name?[3,2]:(this.lastAnimationName=i.name,s=null,this.animation?s=this.animation.node:((s=new cc.Node("animation")).setParent(this.node),s.setPosition(cc.Vec2.ZERO)),r=this,[4,this.LoadSpineByData(i,s)]):[3,3];case 1:r.animation=c.sent(),c.label=2;case 2:return[2,i];case 3:return[2,null]}})})},e.prototype.Play=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=0),r(this,void 0,void 0,function(){var n,o=this;return c(this,function(i){switch(i.label){case 0:return this.data&&this.data.isOn?(this.Show(!0),this.complateCB=t,this.complateOne=!1,n=0,this.voiceID=l.default.PlayByAsset(this.data.voice,!1,function(){2==++n&&(null==t||t())}),[4,r(o,void 0,void 0,function(){var o,i,s,r=this;return c(this,function(c){switch(c.label){case 0:return[4,this.loadSP(e++)];case 1:return o=c.sent(),this.Show(!0),o&&this.animation?(i=this.animation.Play(o.animation,o.loop),s=i&&i.animation?i&&i.animation.duration:0,this.scheduleOnce(function(){r.complateOne=!0,o.loop||t&&r.data.autoEnterNext&&(2==++n&&(null==t||t()),r.Show(!1))},s)):(2==++n&&(null==t||t()),this.Show(!1)),[2]}})})]):(null==t||t(),[2]);case 1:return i.sent(),[2]}})})},e.prototype.SetAnimatiomPos=function(t){this.aniPos=t,this.animation&&this.animation.node.setPosition(t)},e.prototype.SetAnimationTarget=function(t,e){var n=this;void 0===e&&(e=-1),this.target=t,e>0&&this.scheduleOnce(function(){n.target=null},e)},e.prototype.lateUpdate=function(){this.target&&this.animation&&(this.target.parent?this.animation.node.setPosition(this.animation.node.parent.convertToNodeSpaceAR(this.target.parent.convertToWorldSpaceAR(this.target.getPosition()))):this.animation.node.parent.convertToNodeSpaceAR(this.target.getPosition()))},s([f({type:cc.Enum(u.M003AnimationType),displayName:"\u52a8\u753b\u7c7b\u578b"})],e.prototype,"type",void 0),s([h,d("Game/Game003/M003GameAniamtion")],e)}(a.default);n.default=m,cc._RF.pop()},{"../AudioManager":"AudioManager","../SPLoder":"SPLoder","./M003AnimationType":"M003AnimationType"}],M003GameUI:[function(t,e,n){"use strict";cc._RF.push(e,"0f3f5mcS9lDS6TRHCy8N3zk","M003GameUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Assets/AssetManager"),c=t("../Assets/Assets"),a=t("../AudioManager"),u=t("../BGImageLoader"),l=t("../UIBase"),p=cc._decorator,h=p.ccclass,f=(p.property,p.menu),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionNumBG=null,e.questionNum=null,e.questionLable=null,e.questionBarBG=null,e.questionBarImage=null,e.btn_Replay=null,e.clickSound="",e.replayBtn_State=!1,e.bgImage=null,e.isReplayAni=!1,e}return i(e,t),Object.defineProperty(e.prototype,"ReplayButtonState",{set:function(t){this.replayBtn_State=t},enumerable:!1,configurable:!0}),e.prototype.SetBackground=function(t){var e=[];e[0]=r.default.Instance.GetAsset(t.left,c.AssetType.Image),e[1]=r.default.Instance.GetAsset(t.center,c.AssetType.Image),e[2]=r.default.Instance.GetAsset(t.right,c.AssetType.Image),this.bgImage.SetImage(e,t)},e.prototype.Init=function(t){this.questionNumBG=this.Find("questionCount").getComponent(cc.Sprite),this.questionNum=this.Find("questionCount/countLable").getComponent(cc.Label),this.questionNum.string="",this.questionBarImage=this.Find("question/questionImage").getComponent(cc.Sprite),this.questionBarBG=this.Find("question/questionBG").getComponent(cc.Sprite),this.questionLable=this.Find("question/questionLabel").getComponent(cc.Label),this.questionLable.string="",this.bgImage=this.Find("bg").getComponent(u.default),this.bgImage.Init(),this.InitReplayButton(t)},e.prototype.InitReplayButton=function(t){var e=this;this.Find("readeRepeat").on(cc.Node.EventType.TOUCH_END,function(){e.replayBtn_State&&!e.isReplayAni&&e.btn_Replay&&(e.clickSound&&a.default.PlayByAsset(e.clickSound),e.btn_Replay.Play("play",!0),e.isReplayAni=!0,t.ReadQuestion(e.StopReplayAnim.bind(e)))})},e.prototype.StopReplayAnim=function(){this.isReplayAni=!1,this.btn_Replay&&this.btn_Replay.Play("idle")},e.prototype.SetProgressNumberBGImage=function(t){this.questionNumBG.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image)},e.prototype.SetQuestionBarBG=function(t){this.questionBarBG.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image)},e.prototype.SetQuestionBarImage=function(t){this.questionBarImage.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image)},e.prototype.SetReplayButton=function(t){var e=this,n=t.spine,o=n.name;this.clickSound=t.clickSound,n&&(this.btn_Replay=r.default.Instance.GetSPAnimation(o,this.Find("readeRepeat")),this.btn_Replay&&(n.skin&&this.btn_Replay.SetSkin(n.skin),n.animation&&this.btn_Replay.Play(n.animation,n.loop),n.mix&&n.mix.length>0&&n.mix.forEach(function(t){t.from&&t.to&&e.btn_Replay.anima.setMix(t.from,t.to,t.value)})))},e.prototype.SetQuestion=function(t,e){this.questionBarBG.node.active=!(!t.image&&!t.text),this.questionNum.string=e,t.image?this.questionBarImage.spriteFrame=r.default.Instance.GetAsset(t.image,c.AssetType.Image):this.questionBarImage.spriteFrame=null,t.text?(this.questionLable.node.color=this.questionLable.node.color.fromHEX(t.textColor),this.questionLable.string=t.text):this.questionLable.string=""},s([h,f("Game/Game003/M003GameUI")],e)}(l.default);n.default=d,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../AudioManager":"AudioManager","../BGImageLoader":"BGImageLoader","../UIBase":"UIBase"}],M003Game:[function(t,e,n){"use strict";cc._RF.push(e,"2636dChVdtMloiORbq6MAyW","M003Game");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,c=s.length;r<c;r++,i++)o[i]=s[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var u=t("../AlertMenu/AlertMenu"),l=t("../Assets/AssetManager"),p=t("../Assets/Assets"),h=t("../AudioManager"),f=t("../Log"),d=t("../Transform"),m=t("../VideoPlayer/GameController"),g=t("./M003AnimationSequence"),y=t("./M003AnimationType"),_=t("./M003AnswerTipsTool"),A=t("./M003Effect"),v=t("./M003QuestionData"),S=t("./M003UIManager"),b=(function(){function t(t){this.gameController=null,this.configs=[],this.playIndex=0,this.gameController=t}t.prototype.Play=function(t){var e=this,n=this.getNextAnimation();if(n){var o=n.type,i=n.data;switch(o){case 0:this.gameController.Reward_Step(i.position,i.starNum,i.config.fly,i.config.clickBreak,function(){e.Play(t)});break;case 1:this.gameController.Reward_LvEnd(i.starNum,i.config.fly,i.config.clickBreak,function(){e.Play(t)},i.config.autoEnterNext);break;case 2:this.gameController.Reward_GameEnd(i.starNum,i.config.fly,function(){e.Play(t)},i.config.clickBreak)}}else t&&t()},t.prototype.AddReward=function(t,e){return e&&e.config?(this.configs.push({type:t,data:e}),this):this},t.prototype.getNextAnimation=function(){return this.configs[this.playIndex++]}}(),cc._decorator),C=b.ccclass,I=b.property,T=b.menu,w=b.requireComponent,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.setting=null,e.gameController=null,e.uiManager=null,e.question=null,e.questionProgress=0,e.questionTargetProgress=0,e.questionCount=0,e.IsComplate=!1,e.currentQuestion=null,e.btn_back=null,e.summaryAnim=null,e.configName="M003Config",e.controlHintVoiceID=-1,e.isReadQuestion=!1,e.questionVoice=-1,e}return i(e,t),Object.defineProperty(e.prototype,"CurrentQuestion",{get:function(){return this.currentQuestion},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.gameController=this.getComponent(m.default),this.gameController.AssetLoadCallBack.AddListenner(this,function(){t.Init()})},e.prototype.Init=function(){var t=this.gameController.GetGameConfigName(),e=l.default.Instance.GetAsset(t||this.configName,p.AssetType.GameConfig);this.OnGetGameConfig(e)},e.prototype.start=function(){this.uiManager=this.getComponentInChildren(S.default),this.uiManager.Init(this),this.IsComplate=!1,this.btn_back=this.Find("btn_Back/Background").getComponent(cc.Sprite)},e.prototype.OnSetUIState=function(t){return r(this,void 0,void 0,function(){return c(this,function(){return this.uiManager.SetEffectData(t.effect),this.uiManager.SetBG(t.bgSetting),this.uiManager.SetAnswerPressScale(t.pressScale),this.uiManager.SetReplayButton(t.btn_replay),this.uiManager.SetProgressNumberBGImage(t.number_bg),this.uiManager.SetQuestionBarBG(t.questionBG),[2]})})},e.prototype.PlayDefaultBGM=function(){this.setting.bgm&&h.default.PlayBGMByAsset(this.setting.bgm)},e.prototype.BreakControlHint=function(){var t;cc.audioEngine.stopEffect(this.controlHintVoiceID),null===(t=this.Tool)||void 0===t||t.ResetRightAnswerTips()},e.prototype.OnGetGameConfig=function(t){var e,n;return r(this,void 0,void 0,function(){var o,i=this;return c(this,function(s){switch(s.label){case 0:return t?(this.setting=t.setting,this.CreateQuestion(t.question,t.setting),this.PlayDefaultBGM(),[4,this.OnSetUIState(this.setting)]):[3,2];case 1:return s.sent(),this.Tool=new _.default(this.setting.tipsData),(null===(n=null===(e=this.setting)||void 0===e?void 0:e.tipsData)||void 0===n?void 0:n.isOn)&&console.error("this.BreakControlHint"),this.Tool.OnTips.AddListenner(this,function(t,e,n){if(t){var o=e?t.tipsVoice:"";i.uiManager.StopTips(),i.controlHintVoiceID=h.default.PlayByAsset(o,!1,function(){i.Tool.ResetRightAnswerTips()}),(t.showRightAnswer||n)&&i.uiManager.ShowAnswerTips(t.tips)}}),this.Tool.OnReset.AddListenner(this,function(){}),(o=l.default.Instance.GetAsset(this.setting.btn_back,p.AssetType.Image))&&(this.btn_back.spriteFrame=o),this.summaryAnim=(new g.default).Add(y.M003AnimationType.Summary,this.setting.summaryAnimation),this.SetStartAnimation(this.setting).Play(this.uiManager.PlayAnimation.bind(this.uiManager),this.OnStartAnimationStart.bind(this),this.OnStartAniationEnd.bind(this),null),[3,3];case 2:return f.default.W("M003Game -> OnGetGameConfig","M003 GameConfig \u6c92\u6709\u627e\u5230"),[2];case 3:return[2]}})})},e.prototype.OnStartAnimationStart=function(t){var e=this;if(t==y.M003AnimationType.Guide){this.questionProgress=0;var n=this.uiManager.GetAnimationMenu(y.M003AnimationType.Guide);n.SetAnimatiomPos(cc.v2(99999,0)),this.SetQuestion(this.questionProgress).then(function(t){if(t){var o=e.uiManager.GetRightItems();o&&o[0]&&n.SetAnimationTarget(o[0].node,2)}})}},e.prototype.OnStartAniationEnd=function(t){t==y.M003AnimationType.Guide&&this.PlayQuestionStep()},e.prototype.OnSetStartAnimation=function(t){var e=null==t?void 0:t.plot,n=null==t?void 0:t.guide;return[{type:y.M003AnimationType.Polt,config:e},{type:y.M003AnimationType.Guide,config:n}]},e.prototype.SetStartAnimation=function(t){for(var e=new g.default,n=0,o=this.OnSetStartAnimation(t);n<o.length;n++){var i=o[n];i.config&&(e=e.Add(i.type,i.config))}return e},e.prototype.PlayQuestionStep=function(){var t=this;this.isReadQuestion=!0,this.CurrentQuestion.startPlay?this.ReadQuestion(function(){t.isReadQuestion=!1,t.uiManager.EnabledReplayButton(!1),t.uiManager.ShowQuestionStepTips(t.currentQuestion.questionStepVoice,!1,function(){t.PlayReadyAnimation()})}):(this.isReadQuestion=!1,this.PlayReadyAnimation())},e.prototype.PlayReadyAnimation=function(){var t,e=this,n=function(){e.uiManager.EnabledReplayButton(!0),e.Tool.ResetRightAnswerTips(!0)},o=null===(t=this.setting)||void 0===t?void 0:t.ready;o&&o.isOn&&!0===this.CurrentQuestion.readyAnimation?(new g.default).Add(y.M003AnimationType.Ready,o).Play(this.uiManager.PlayAnimation.bind(this.uiManager),null,null,function(){n()}):n()},e.prototype.CreateQuestion=function(t,e){var n={questions:[]},o=[],i=[];t.questions.forEach(function(t){i.push({q:t,c:t.repeatCount-1}),o.push(t)});for(var s=function(){var t=!0;if(i.forEach(function(e){e.c>0&&(e.c--,o.push(e.q),t=!1)}),t)return"break"};"break"!==s(););if(e.randomQuestion)for(e.fixFirstQuestion&&(n.questions.push(o[0]),o.splice(0,1));o.length>0;){var r=Math.floor(Math.random()*o.length);n.questions.push(o[r]),o.splice(r,1)}else n.questions=o;this.questionCount=n.questions.length,this.question=n},e.prototype.SetQuestion=function(t,e){var n;return void 0===e&&(e=!1),r(this,void 0,void 0,function(){var o,i=this;return c(this,function(s){switch(s.label){case 0:return o=null===(n=this.question)||void 0===n?void 0:n.questions[t],this.currentQuestion=o,o?[4,this.SetQuestionData(o,e)]:[3,2];case 1:return s.sent(),[2,!0];case 2:return this.setting.summaryAnimation&&this.setting.summaryAnimation.isOn?this.summaryAnim.Play(this.uiManager.PlayAnimation.bind(this.uiManager),null,null,function(){i.complateGame()}):this.complateGame(),[2,!1]}})})},e.prototype.OnReadQuestionOne=function(){},e.prototype.SetQuestionData=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,function(){var n,o,i,s,r,l,p;return c(this,function(c){switch(c.label){case 0:if(n=[],o=a(t.answer),t.layout<0||t.layout>3)return f.default.W("SetQuestionData ","\u5e03\u5c40\u53c2\u6570\u4e0d\u5bf9"),u.default.Show((new u.AlertMenuArgs).SetMessage("\u5e03\u5c40\u53c2\u6570\u4e0d\u5bf9")),[2];if(t.random){if(i=function(t,e){if(!t||e<=0)return[];for(var n=[],o=0;o<e&&t.length>0;){var i=Math.floor(Math.random()*t.length);n.push(t[i]),t.splice(i,1),o++}return n},t.wrongAnswer&&t.wrongAnswer.length>0){if(s=t.rightAnswerCount,n.push.apply(n,i(o,s)),n.length<s)return f.default.W("SetQuestionData ","\u6b63\u786e\u7b54\u6848\u6570\u91cf\u4e0d\u8db3"),u.default.Show((new u.AlertMenuArgs).SetMessage("\u6b63\u786e\u7b54\u6848\u6570\u91cf\u4e0d\u8db3")),[2];if(r=4-t.layout-s,t.wrongAnswer.length<r)return f.default.W("SetQuestionData ","\u9519\u8bef\u7b54\u6848\u6570\u91cf\u4e0d\u8db3"),u.default.Show((new u.AlertMenuArgs).SetMessage("\u9519\u8bef\u7b54\u6848\u6570\u91cf\u4e0d\u8db3\t\u81f3\u5c11\u5dee"+(r-t.wrongAnswer.length)+"\u4e2a")),[2];l=a(t.wrongAnswer),n.push.apply(n,i(l,r))}else n=i(o,o.length);p=a(n),(n=[]).push.apply(n,i(p,p.length))}else n=o;return!n||n.length<1?(f.default.E("SetQuestionData ","\u7b54\u6848\u9009\u9879\u4e2a\u6570\u4e0d\u5bf9"),u.default.Show((new u.AlertMenuArgs).SetMessage("\u7b54\u6848\u9009\u9879\u4e2a\u6570\u4e0d\u5bf9")),[2]):(this.Tool.ResetRightAnswerTips(!0),this.questionTargetProgress=0,this.OnTargetProgressChanged(this.questionTargetProgress,t.needRight),[4,this.uiManager.SetQuestion(t,n,this.GetQuestionProgress())]);case 1:return c.sent(),e&&this.PlayQuestionStep(),[2]}})})},e.prototype.OnTargetProgressChanged=function(){},e.prototype.GetQuestionProgress=function(){var t=this.questionCount<=9?"0"+this.questionCount:this.questionCount;return(this.questionProgress<9?"0"+(this.questionProgress+1):this.questionProgress+1)+":"+t},e.prototype.StopReadQuestion=function(){cc.audioEngine.stop(this.questionVoice)},e.prototype.ReadQuestion=function(t){var e=this;void 0===t&&(t=null),this.uiManager.EnabledReplayButton(!1),this.Tool.ResetRightAnswerTips(),this.StopReadQuestion(),this.questionVoice=h.default.PlayByAsset(this.currentQuestion.voice,!1,function(){e.uiManager.EnabledReplayButton(!0),null==t||t()})},e.prototype.complateGame=function(){var t=this;this.IsComplate=!0;var e=this.setting.gameComplateAnim;e&&e.isOn?this.gameController.Reward_GameEnd(5,e.fly,function(){t.gameController.ComplateGame()},e.clickBreak):this.gameController.ComplateGame()},e.prototype.OnBtn_BackClick=function(){h.default.PlaySysSound(h.default.Btn_Normal),this.gameController.ShowEixtAlert(function(){},function(){},this.setting.eixtMenu)},e.prototype.OnSelectAnswer=function(t){var e,n,o=this;if(!this.IsComplate)if(t){if(t.IsActeve){this.BreakControlHint();var i=t.Answer;if(i){this.uiManager.ShowEffect(i.isRight?A.M003EffectType.Right:A.M003EffectType.Wrong,t.GetItemPosition());var s=0,r=function(){++s>=2&&o.setting.wrongRepeat&&(o.uiManager.EnableItems(!0),t.ResetItem(o.setting.wrongHid))};h.default.PlayByAsset(i.clickSound),t.OnSelect(i.isRight,function(){i.isRight||r()}),this.Tool.StopTips(),this.uiManager.StopTips(),this.uiManager.StopReplayAnim(),this.uiManager.EnableItems(!1),this.StopReadQuestion(),this.uiManager.EnabledReplayButton(!0);var c=function(){o.uiManager.ClearItems(function(){o.SetQuestion(++o.questionProgress,!0)})};this.gameController.OnAnswer(i.isRight,!1);var a=!1;if(i.isRight){a=!1;var l=this.question.questions[this.questionProgress];this.questionTargetProgress++,this.OnTargetProgressChanged(this.questionTargetProgress,l.needRight),(a=this.questionTargetProgress>=l.needRight)&&this.uiManager.EnabledReplayButton(!1);var p=function(){var t=l.lvReward&&l.lvReward.isOn;o.questionProgress+1>=o.questionCount&&!o.setting.lastQuestionReward&&(t=!1),l.lvReward&&t?o.gameController.Reward_LvEnd(3,l.lvReward.fly,l.lvReward.clickBreak,c.bind(o),l.lvReward.autoEnterNext):c()},f=0,d=function(){2==++f&&(l.lvPassAnimation&&l.lvPassAnimation.isOn?(new g.default).Add(y.M003AnimationType.LvPass,l.lvPassAnimation).Play(o.uiManager.PlayAnimation.bind(o.uiManager),null,null,function(){p()}):p())};if(l.stepReward&&l.stepReward.isOn){var m=t.GetItemPosition();this.gameController.Reward_Step(m,1,l.stepReward.fly,l.stepReward.clickBreak,function(){a&&d()})}else a&&d();this.playSelectSound(i,function(){a?d():o.uiManager.EnableItems(!0)})}else this.Tool.OnAnswerWrong(),this.playSelectSound(i,function(){r()})}else u.default.Show((new u.AlertMenuArgs).SetMessage("\u6570\u636e\u9519\u8bef"))}}else this.Tool.IsMaxWrong&&this.uiManager.ShowAnswerTips(null===(n=null===(e=this.setting)||void 0===e?void 0:e.tipsData)||void 0===n?void 0:n.tips)},e.prototype.playSelectSound=function(t,e){void 0===e&&(e=null);var n=[],o="";t.itemSelectSound&&(o=this.setting.itemSelectSound),o&&n.push(o),t.pressVoice&&n.push(t.pressVoice);var i=function(t){var e="";t&&t.length>0&&(e=t[Math.floor(Math.random()*t.length)]),e&&n.push(e)};i(t.freeBackSound),i(t.voice);var s=0,r=function(){return++s>=n.length&&(null==e||e(),!0)};if(this.currentQuestion.soundSequence==v.M003SoundSequenceType.Together)if(n.length>0)for(var c=0,a=n;c<a.length;c++){var u=a[c];h.default.PlayByAsset(u,!1,function(){r()})}else r();else if(this.currentQuestion.soundSequence==v.M003SoundSequenceType.Order){var l=function(){h.default.PlayByAsset(n[s],!1,function(){r()||l()})};l()}},e.prototype.update=function(t){var e,n,o;(null===(n=null===(e=this.setting)||void 0===e?void 0:e.tipsData)||void 0===n?void 0:n.isOn)&&(null===(o=this.Tool)||void 0===o||o.Update(t))},s([I()],e.prototype,"configName",void 0),s([C,T("Game/Game003/M003Game"),w(m.default)],e)}(d.default);n.default=R,cc._RF.pop()},{"../AlertMenu/AlertMenu":"AlertMenu","../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../AudioManager":"AudioManager","../Log":"Log","../Transform":"Transform","../VideoPlayer/GameController":"GameController","./M003AnimationSequence":"M003AnimationSequence","./M003AnimationType":"M003AnimationType","./M003AnswerTipsTool":"M003AnswerTipsTool","./M003Effect":"M003Effect","./M003QuestionData":"M003QuestionData","./M003UIManager":"M003UIManager"}],M003GuideAniamtion:[function(t,e,n){"use strict";cc._RF.push(e,"0daebATIsxD+rjlZ8Oorkyl","M003GuideAniamtion");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./M003GameAniamtion"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),s([a,u("Game/Game003/M003GuideAniamtion")],e)}(r.default);n.default=l,cc._RF.pop()},{"./M003GameAniamtion":"M003GameAniamtion"}],M003Layout:[function(t,e,n){"use strict";cc._RF.push(e,"957165GQAhAO4EpBaiuyyF+","M003Layout");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.M003LayoutType=void 0;var a,u=t("../UIBase"),l=t("./M003AnswerItem");(function(t){t[t.A=0]="A",t[t.B=1]="B",t[t.C=2]="C",t[t.D=3]="D"})(a=n.M003LayoutType||(n.M003LayoutType={}));var p=cc._decorator,h=p.ccclass,f=p.property,d=p.menu,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemY=340,e.itemX=[],e.itemPrefab=null,e.roadPosX=[-498,-166,166,498],e.LayoutType=a.A,e.answerItems=[],e.game=null,e.itemParent=null,e}return i(e,t),e.prototype.AddAnswer=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.Init=function(t){var e=this;this.game=t,this.itemParent=this.Find("items"),this.itemX.forEach(function(t){var n=e.CreateItem().node;n.x=t,n.y=e.itemY}),this.Show(!1)},e.prototype.CreateItem=function(){var t=cc.instantiate(this.itemPrefab);t.active=!0,t.setParent(this.itemParent);var e=t.getComponent(l.default);return e.Init(this.game),this.answerItems.push(e),e},e.prototype.SetAnswer=function(t){return r(this,void 0,Promise,function(){var e,n=this;return c(this,function(o){switch(o.label){case 0:this.itemParent.x=3e3,e=0,o.label=1;case 1:return e<t.length?e>=this.answerItems.length?[4,this.CreateItem().SetData(t[e])]:[3,3]:[3,6];case 2:return o.sent(),[3,5];case 3:return[4,this.answerItems[e].SetData(t[e])];case 4:o.sent(),o.label=5;case 5:return e++,[3,1];case 6:for(e=0;e<this.answerItems.length;e++)this.answerItems[e].animation.OnEnter(),this.answerItems[e].ChangeSpeed(.01);return cc.tween(this.itemParent).by(1,{x:-3e3}).call(function(){for(var t=0;t<n.answerItems.length;t++)n.answerItems[t].ChangeSpeed(1)}).start(),[2,this.answerItems]}})})},e.prototype.ClearItems=function(t){cc.tween(this.itemParent).by(1,{x:-3e3}).call(function(){null==t||t()}).start()},e.prototype.SetAnswerPressScale=function(t){for(var e=0;e<this.answerItems.length;e++)this.answerItems[e].SetPressScale(t)},e.prototype.EnabledItems=function(t){this.answerItems.forEach(function(e){e.EnabledItem(t)})},e.prototype.ShowQuestionStepTips=function(t,e){var n;if(t)for(var o=this.answerItems.length,i=0,s=this.answerItems;i<s.length;i++){var r=s[i];t(null===(n=r.Answer)||void 0===n?void 0:n.questionStep,r,function(){(o-=o>0?1:0)||null==e||e()})}},e.prototype.GetItemPosX=function(t){return this.roadPosX&&this.roadPosX[t]?this.roadPosX[t]:0},e.prototype.GetRightItems=function(){return this.answerItems.filter(function(t){var e;return t&&t.Active&&t.IsActeve&&(null===(e=t.Answer)||void 0===e?void 0:e.isRight)})},s([f()],e.prototype,"itemY",void 0),s([f({type:cc.Float})],e.prototype,"itemX",void 0),s([f(cc.Node)],e.prototype,"itemPrefab",void 0),s([f({type:cc.Enum(a)})],e.prototype,"LayoutType",void 0),s([h,d("Game/Game003/M003Layout")],e)}(u.default);n.default=m,cc._RF.pop()},{"../UIBase":"UIBase","./M003AnswerItem":"M003AnswerItem"}],M003PlotAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"c2be39uf8xMpLAk0Aj1TmtF","M003PlotAnimation");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./M003GameAniamtion"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),s([a,u("Game/Game003/M003PlatAnimation")],e)}(r.default);n.default=l,cc._RF.pop()},{"./M003GameAniamtion":"M003GameAniamtion"}],M003QuestionBar:[function(t,e,n){"use strict";cc._RF.push(e,"d431bQ9qFdG+JitKqp/iMuY","M003QuestionBar");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../UIBase"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionBG=null,e.questionImage=null,e.questionLable=null,e}return i(e,t),e.prototype.Init=function(){this.questionBG=this.getComponent(cc.Sprite),this.questionImage=this.Find("questionImage").getComponent(cc.Sprite),this.questionLable=this.Find("questionLabel").getComponent(cc.Label)},e.prototype.SetQuestion=function(){},s([a,u("Game/Game003/M003QuestionBar")],e)}(r.default);n.default=l,cc._RF.pop()},{"../UIBase":"UIBase"}],M003QuestionData:[function(t,e,n){"use strict";cc._RF.push(e,"88c260BVlFM9bQr91lWHaVr","M003QuestionData"),Object.defineProperty(n,"__esModule",{value:!0}),n.M003SoundSequenceType=void 0,function(t){t[t.Order=0]="Order",t[t.Together=1]="Together"}(n.M003SoundSequenceType||(n.M003SoundSequenceType={})),cc._RF.pop()},{}],M003SPLoader:[function(t,e,n){"use strict";cc._RF.push(e,"8bd65StksRJ66pEZvsoLioF","M003SPLoader");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Assets/AssetManager"),c=t("../Log"),a=t("../SPLoder"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.LoadSPAnimation=function(t,e,n){var o=this;if(void 0===e&&(e=null),void 0===n&&(n=null),t&&t.name){var i=r.default.Instance.GetSPAnimation(t.name,n,t.skin);if(!i)return c.default.W("M003SPLoader -> LoadSPAnimation",t.name+" \u52a0\u8f7d\u5931\u8d25"),void e(i,0);var s=0;setTimeout(function(){t.mix&&o.SetAnimationMix(i.anima,t.mix),t.animation&&(s=i.Play(t.animation,t.loop).animation.duration),null==e||e(i,s)},0)}},e.prototype.SetAnimationMix=function(t,e){if(t&&e&&0!=e.length)for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i&&i.from&&i.to&&i.value){var s=cc.misc.clamp01(i.value);t.setMix(i.from,i.to,s)}}},s([l],e)}(a.default));n.default=p,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Log":"Log","../SPLoder":"SPLoder"}],M003ScreenTouch:[function(t,e,n){"use strict";cc._RF.push(e,"d8b19ZLRe9NrZF6i+7LOu7G","M003ScreenTouch");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Action"),c=t("../UIBase"),a=cc._decorator,u=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OnTouchStart=new r.Action,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){var e;null===(e=t.OnTouchStart)||void 0===e||e.Invoke()},this,!0)},e.prototype.start=function(){},s([u],e)}(c.default));n.default=l,cc._RF.pop()},{"../Action":"Action","../UIBase":"UIBase"}],M003SettingData:[function(t,e,n){"use strict";cc._RF.push(e,"3dc99Q1BQpKU6NyC/GgwgRA","M003SettingData"),Object.defineProperty(n,"__esModule",{value:!0}),n.M003TipsType=void 0,function(t){t[t.None=0]="None",t[t.Flash=1]="Flash",t[t.Spine=2]="Spine",t[t.Particle=3]="Particle"}(n.M003TipsType||(n.M003TipsType={})),cc._RF.pop()},{}],M003Tips:[function(t,e,n){"use strict";cc._RF.push(e,"fe6230skw5OaaMFvdtB1L0I","M003Tips");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Assets/AssetManager"),c=t("../Assets/Assets"),a=t("../Log"),u=t("../Transform"),l=t("./M003SettingData"),p=cc._decorator,h=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e.flash=null,e.pNode=null,e.aNode=null,e.particle=null,e.animation=null,e.flashTween=null,e}return i(e,t),Object.defineProperty(e.prototype,"Type",{get:function(){return this.data?this.data.type:l.M003TipsType.None},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TipsData",{get:function(){return this.data},enumerable:!1,configurable:!0}),e.prototype.Init=function(){this.flash=this.Find("flashItem").getComponent(cc.Sprite),this.pNode=this.Find("particle"),this.aNode=this.Find("spine")},e.prototype.SetData=function(t){if(this.data=t,this.pNode.active=!1,this.flash.node.active=!1,this.aNode.active=!1,t)switch(t.type){case l.M003TipsType.Flash:this.flash.spriteFrame=r.default.Instance.GetAsset(t.name,c.AssetType.Image),this.flash.node.active=!0;break;case l.M003TipsType.Spine:this.animation=r.default.Instance.GetSPAnimation(t.name,this.aNode);break;case l.M003TipsType.Particle:this.particle=r.default.Instance.GetParticle(t.name,this.pNode)}},e.prototype.Play=function(t){switch(void 0===t&&(t=null),this.node.active=!0,this.Type){case l.M003TipsType.Flash:this.playFlash(t);break;case l.M003TipsType.Spine:this.playAnimation(t);break;case l.M003TipsType.Particle:this.playParticle(t);break;case l.M003TipsType.None:this.node.active=!1;break;default:a.default.W("M003Tips -> Play"),this.node.active=!0}},e.prototype.onDisable=function(){this.flashTween&&(this.flashTween.stop(),this.flashTween=null),this.unscheduleAllCallbacks()},e.prototype.playFlash=function(t){var e=this;if(void 0===t&&(t=null),a.default.D("M003Tips -> playFlash"),this.flash){this.flashTween&&this.flashTween.stop(),this.flash.node.opacity=0;var n=.5*this.data.flashTime,o=cc.tween(this.flash.node).delay(this.data.delay),i=cc.tween().to(n,{opacity:255}),s=cc.tween().to(n,{opacity:0});o=o.sequence(i,s),o=!this.data.keep||this.data.keep<=0?o.repeatForever():o.repeat(Math.ceil(2*this.data.keep)),this.flashTween=o.call(function(){null==t||t(e),e.Show(!1),e.flashTween&&e.flashTween.stop()}).start()}},e.prototype.playParticle=function(t){var e=this;if(void 0===t&&(t=null),a.default.D("M003Tips -> playParticle"),this.particle){this.particle.node.active=!1;var n=0;this.scheduleOnce(function(){e.particle.node.active=!0,e.particle.resetSystem(),e.schedule(function(){e.data.keep>0?(n+=e.data.flashTime)>=e.data.keep&&(null==t||t(e),e.Show(!1)):e.particle.resetSystem()},e.data.flashTime)},this.data.delay)}},e.prototype.playAnimation=function(t){var e=this;if(void 0===t&&(t=null),this.animation){a.default.D("M003Tips -> playAnimation"),this.animation.node.active=!1;var n=this.data.animation?this.data.animation:"default";this.scheduleOnce(function(){e.animation.node.active=!0,e.animation.Play(n,!0),e.data.keep>0&&e.scheduleOnce(function(){null==t||t(e),e.Show(!1)},e.data.keep)},this.data.delay>0?this.data.delay:.01)}else a.default.D("M003Tips -> playAnimation","\u52a8\u753b\u672a\u52a0\u8f7d")},s([h],e)}(u.default));n.default=f,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../Log":"Log","../Transform":"Transform","./M003SettingData":"M003SettingData"}],M003UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"b33c5U5TZ9LsLKOSCGJb3gw","M003UIManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./M003GameAniamtion"),u=t("./M003Layout"),l=t("./M003GameUI"),p=t("../Log"),h=t("./M003Tips"),f=t("../AudioManager"),d=t("../UIBase"),m=t("./M003EffectCache"),g=cc._decorator,y=g.ccclass,_=g.property,A=g.menu,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipsItem=null,e.tipsParent=null,e.effectParent=null,e.gameAnimation=new Map,e.layout=new Map,e.gameUI=null,e.tipsItems=[],e.effectData=null,e.currentLayout=null,e}return i(e,t),e.prototype.GetRightItems=function(){var t;return null===(t=this.currentLayout)||void 0===t?void 0:t.GetRightItems()},e.prototype.ClearItems=function(t){var e;null===(e=this.currentLayout)||void 0===e||e.ClearItems(t)},e.prototype.SetBG=function(t){this.gameUI.SetBackground(t)},e.prototype.Init=function(t){var e,n,o=this;this.gameUI=null===(e=this.Find("GameUI"))||void 0===e?void 0:e.getComponent(l.default),null===(n=this.gameUI)||void 0===n||n.Init(t),t.Find("Animaiton").getComponentsInChildren(a.default).forEach(function(t){t.Init(),o.gameAnimation.set(t.AnimationType,t)}),this.getComponentsInChildren(u.default).forEach(function(e){o.layout.set(e.LayoutType,e),e.Init(t)})},e.prototype.PlayAnimation=function(t,e,n,o){return void 0===n&&(n=null),void 0===o&&(o=null),r(this,void 0,void 0,function(){var i,s;return c(this,function(r){switch(r.label){case 0:return i=["\u65e0","\u5267\u60c5\u52a8\u753b","\u5f15\u5bfc\u52a8\u753b","\u5c0f\u5173\u8fc7\u5173\u52a8\u753b","\u5c0f\u5173\u5931\u8d25\u52a8\u753b","\u603b\u7ed3\u52a8\u753b"],p.default.DColor("M003UIManager -> PlayAnimation \u5f00\u59cb\u64ad\u653e "+i[t],"#87431a"),(s=this.GetAnimationMenu(t))?[4,s.SetData(e)]:[3,2];case 1:return r.sent(),null==n||n(),s.Play(o),[3,3];case 2:p.default.W("M003UIManager -> PlayAnimation"," \u6ca1\u6709\u627e\u5230"+t+" AnimationMenu"),r.label=3;case 3:return[2]}})})},e.prototype.GetAnimationMenu=function(t){return this.gameAnimation.get(t)},e.prototype.SetReplayButton=function(t){this.gameUI.SetReplayButton(t)},e.prototype.SetQuestion=function(t,e,n){return r(this,void 0,void 0,function(){var o,i;return c(this,function(s){switch(s.label){case 0:return o=["A","B","C","D"],this.gameUI.SetQuestion(t,n),this.layout.forEach(function(t){t.Show(!1)}),(i=this.layout.get(t.layout))?(p.default.D("M003UIManager -> SetQuestion ",o[i.LayoutType]),i.Show(!0),this.currentLayout=i,[4,i.SetAnswer(e)]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.SetAnswerPressScale=function(t){this.layout.forEach(function(e){e.SetAnswerPressScale(t)})},e.prototype.SetProgressNumberBGImage=function(t){this.gameUI.SetProgressNumberBGImage(t)},e.prototype.SetQuestionBarBG=function(t){this.gameUI.SetQuestionBarBG(t)},e.prototype.SetQuestionBarImage=function(t){this.gameUI.SetQuestionBarImage(t)},e.prototype.EnableItems=function(t){var e;null===(e=this.currentLayout)||void 0===e||e.EnabledItems(t)},e.prototype.StopTips=function(){for(var t=0,e=this.tipsItems;t<e.length;t++){var n=e[t];n.Active&&n.Show(!1)}},e.prototype.ShowTips=function(t,e,n){if(void 0===n&&(n=null),null!=t&&0!=t.type){for(var o=cc.Vec2.ZERO,i=e.GetTipsNode(),s=null,r=0,c=this.tipsItems;r<c.length;r++){var a=c[r];if(!a.Active){s=a;break}}if(!s){var u=cc.instantiate(this.tipsItem);u.setParent(this.tipsParent),(s=u.getComponent(h.default)).Init(),this.tipsItems.push(s)}if(i)if(t.followTarget){var l=cc.Vec2.ZERO;if("string"==typeof t.offset){var p=t.offset.split(",");l.x=parseFloat(p[0]),l.y=parseFloat(p[1]),Number.isNaN(l.x)&&(l.x=0),Number.isNaN(l.y)&&(l.y=0)}}else o=i.parent?i.parent.convertToWorldSpaceAR(i.getPosition()):i.getPosition(),s.position=o;s.SetData(t),s.Play(function(){null==n||n()})}else null==n||n()},e.prototype.ShowQuestionStepTips=function(t,e,n){var o=this;f.default.PlayByAsset(t),this.currentLayout?(this.currentLayout.EnabledItems(!1),this.currentLayout.ShowQuestionStepTips(this.ShowTips.bind(this),function(){o.currentLayout.EnabledItems(!0),null==n||n()})):null==n||n()},e.prototype.StopReplayAnim=function(){this.gameUI.StopReplayAnim()},e.prototype.EnabledReplayButton=function(t){this.gameUI.ReplayButtonState=t},e.prototype.ShowAnswerTips=function(t){var e;if(t){var n=null===(e=this.currentLayout)||void 0===e?void 0:e.GetRightItems();if(n&&n.length>0)for(var o=0,i=n;o<i.length;o++){var s=i[o];this.ShowTips(t,s)}}},e.prototype.SetEffectData=function(t){this.effectData=new m.default(t)},e.prototype.ShowEffect=function(t,e){var n=this.effectData.GetEffect(t,this.effectParent);n&&n.Play(e)},s([_(cc.Node)],e.prototype,"tipsItem",void 0),s([_(cc.Node)],e.prototype,"tipsParent",void 0),s([_(cc.Node)],e.prototype,"effectParent",void 0),s([y,A("Game/Game003/M003UIManager")],e)}(d.default);n.default=v,cc._RF.pop()},{"../AudioManager":"AudioManager","../Log":"Log","../UIBase":"UIBase","./M003EffectCache":"M003EffectCache","./M003GameAniamtion":"M003GameAniamtion","./M003GameUI":"M003GameUI","./M003Layout":"M003Layout","./M003Tips":"M003Tips"}],M010_GameAction:[function(t,e,n){"use strict";cc._RF.push(e,"fe499015shAa5Rs8xdqAGgU","M010_GameAction");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Assets/AssetManager"),c=t("../../Assets/Assets"),a=t("../../Comp/LayoutHeight"),u=t("../common/units/M_Tool"),l=cc._decorator,p=l.ccclass,h=l.property,f=l.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftCtrl=null,e.rightCtrl=null,e.touch=null,e.leftLayout=null,e.scrollView=null,e.putDown=null,e.leftFrame=null,e.cutLineFrame=null,e.scrollview=null,e.finishImage=null,e.putdownFrame=null,e.putDownResultCb=null,e.touchStart=null,e.touchNoded=null,e.useLayoutID=null,e.touchNodeCache=null,e._returnSpeed=1080,e._touchIndex=-1,e}var n;return i(e,t),n=e,Object.defineProperty(e.prototype,"returnSpeed",{set:function(t){this._returnSpeed=t<=0?1080:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"touchIndex",{get:function(){return this._touchIndex},set:function(t){this._touchIndex=t,-1==t&&(this.scrollview.enabled=!0),this.touchNodeCache=-1===t?null:this.leftCtrl.children[t]},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.touch.on("touchstart",this.isTouchNode.bind(this)),this.touch.on("touchcancel",this.cancelTouchNode.bind(this)),this.touch.on("touchend",this.cancelTouchNode.bind(this)),this.touch.on("touchmove",this.touchNodeMove.bind(this)),this.setTouch(!1)},e.prototype.resetLayout=function(t,e){-1!==this.touchIndex&&(this.touchNodeCache.parent=this.leftCtrl,this.touchIndex=-1),this.leftCtrl.children.forEach(function(t){t.destroy()}),this.rightCtrl.children.forEach(function(t){t.destroy()}),this.putDown.children.forEach(function(t){t.destroy()}),this.leftLayout.enabled=!1,this.leftLayout.spacingY=t.spacingY,this.leftLayout.childHeight=n.rectSize[e].pos.y,this.leftLayout.top=t.paddingTop,this.leftLayout.buttom=t.paddingTop},e.prototype.updataLayout=function(){var t=this;this.leftLayout.enabled=!1,setTimeout(function(){t.leftLayout&&(t.leftLayout.enabled=!0)},200)},e.prototype.cancelTouchNode=function(){var t,e=this;if(-1!==this.touchIndex&&this.touchNodeCache&&"moving"==this.touchNodeCache.putState){this.touchNodeCache.putState="cancle";var o=null;if(this.rightCtrl.children.some(function(t,n){var i=t.getBoundingBoxToWorld();if(u.default.getIns().pointInRect(e.touchNodeCache.parent.convertToWorldSpaceAR(e.touchNodeCache.position),i))return o=n,!0}),null!==o&&(console.log("\u653e\u7f6e\u7ed3\u679c:"+o,"\u6b63\u786e\u4f4d\u7f6e:"+this.touchNodeCache.putDownId),this.touchNodeCache.putDownId==o?this.putDownResultCb&&this.putDownResultCb(!0,this.node.convertToNodeSpaceAR(this.rightCtrl.convertToWorldSpaceAR(this.rightCtrl.children[o].position))):o=null),null===o&&u.default.getIns().pointInRect(this.touchNodeCache.parent.convertToWorldSpaceAR(this.touchNodeCache.position),this.putdownFrame.node.getBoundingBoxToWorld())&&(null===(t=this.putDownResultCb)||void 0===t||t.call(this,!1,new cc.Vec3(0,0,0))),null!==o){this.touchNodeCache.putState="PutDown";var i=this.putDown.convertToNodeSpaceAR(this.rightCtrl.convertToWorldSpaceAR(this.rightCtrl.children[o].position)),s=this.touch.convertToNodeSpaceAR(this.rightCtrl.convertToWorldSpaceAR(this.rightCtrl.children[o].position));this.touchNodeCache.anchorX=n.rectSize[this.useLayoutID].anchor[this.touchNodeCache.putDownId].x,this.touchNodeCache.anchorY=n.rectSize[this.useLayoutID].anchor[this.touchNodeCache.putDownId].y,this.touchNodeCache.getComponent(cc.Sprite).trim=!1,this.touchNodeCache.getComponent(cc.Sprite).sizeMode=2,cc.tween(this.touchNodeCache).to(.3,{position:s},{easing:cc.easing.fade}).call(function(){e.touchNodeCache.parent=e.putDown,e.touchNodeCache.position=i,e.rightCtrl.children.length===e.putDown.children.length&&e.setTouch(!1),e.sortLeftLayout(function(){e.leftLayout.enabled=!0,e.touchNodeCache&&(e.touchNodeCache.putState="ok"),e.touchIndex=-1})}).start()}else cc.tween(this.touchNodeCache).sequence(cc.tween().by(.03,{position:new cc.Vec2(10,5)}),cc.tween().by(.03,{position:new cc.Vec2(-10,-5)})).repeat(8).call(function(){var t=e.touchNodeCache.parent.name==e.leftCtrl.name?e.savePos:e.touch.convertToNodeSpaceAR(e.leftCtrl.convertToWorldSpaceAR(e.savePos)),n=u.default.getIns().getVectorD(t,e.touchNodeCache.position)/e._returnSpeed;n<.3&&(n=.3),cc.tween(e.touchNodeCache).to(n,{position:t,scale:e.touchNodeCache.leftScale,angle:e.touchNodeCache.leftAngle},{easing:cc.easing.fade}).call(function(){e.touchNodeCache.parent.name!==e.leftCtrl.name?(e.leftCtrl.insertChild(e.touchNodeCache,e.touchIndex),e.touchNodeCache.position=e.savePos,e.touchNodeCache.putState="ok",e.touchIndex=-1,e.leftLayout.enabled=!0,e.scrollView.enabled=!0):cc.tween(e.touchNodeCache).to(.3,{scale:e.touchNodeCache.leftScale,angle:e.touchNodeCache.leftAngle},{easing:cc.easing.fade}).call(function(){e.touchNodeCache.putState="ok",e.touchIndex=-1,e.leftLayout.enabled=!0,e.scrollView.enabled=!0}).start()}).start()}).start()}},e.prototype.sortLeftLayout=function(t){var e=this,o=n.rectSize[this.useLayoutID].pos.y;this.scrollView.enabled=!0;var i=[];if(this.touchIndex!==this.leftCtrl.children.length)if(0===this.touchIndex){for(var s=0;s<this.leftCtrl.children.length;++s)cc.tween(this.leftCtrl.children[s]).by(.3,{y:o+this.leftLayout.spacingY-this.leftCtrl.y}).start();cc.tween(this.leftCtrl).delay(.3).call(function(){e.leftCtrl.y=0,t()}).start()}else{var r=function(e){var n=new cc.Vec3(0,0),s=new cc.Vec3(0,-o/2);0!==e&&c.leftCtrl.children[e-1]&&(s.y=c.leftCtrl.children[e-1].y),n.y=0==e?s.y-c.leftCtrl.children[e].y:s.y-c.savePos.y,i[e]=!1,cc.tween(c.leftCtrl.children[e]).by(.3,{position:n}).call(function(){i[e]=!0;for(var n=!0,o=0;o<i.length;++o)if(!1===i[o]){n=!1;break}n&&t()}).start()},c=this;for(s=this.touchIndex;s<this.leftCtrl.children.length;++s)r(s)}else{var a=this.leftLayout.getSizeHeight(this.leftCtrl.children.length);cc.tween(this.leftCtrl).to(.3,{height:a}).call(function(){t()}).start()}},e.prototype.isTouchNode=function(t){var e=this;this.touchStart&&this.touchStart(),-1!==this.touchIndex&&"ok"!==this.touchNodeCache.putState||(this.leftCtrl.children.some(function(n,o){var i=n.getBoundingBoxToWorld();if(u.default.getIns().pointInRect(t.getLocation(),i))return cc.tween(n).to(.3,{scale:1,angle:0},{easing:cc.easing.quadIn}).start(),e.savePos=n.position,e.leftLayout.enabled=!1,e.scrollView.enabled=!1,e.touchIndex=o,e.touchNodeCache.putState="moving",e.touchNoded&&e.touchNoded(),!0}),this.touchNodeCache||(u.default.getIns().pointInRect(t.getLocation(),this.leftFrame.node.getBoundingBoxToWorld())?this.scrollview.enabled=!0:this.scrollview.enabled=!1))},e.prototype.touchNodeMove=function(t){if(-1!==this.touchIndex&&this.touchNodeCache&&(!this.touchNodeCache||"moving"===this.touchNodeCache.putState)){var e=this.touch.convertToNodeSpaceAR(t.getLocation());this.touchNodeCache.parent=this.touch,this.touchNodeCache.position=new cc.Vec3(e.x,e.y,0)}},e.prototype.setPutDownOkSize=function(t,e){this.rightCtrl.getComponent(cc.Layout).enabled=!1,this.rightCtrl.children.forEach(function(n){n.width=t,n.height=e})},e.prototype.setRectPos=function(t){this.rightCtrl.getComponent(cc.Layout).enabled=!0;for(var e=0;e<n.rectSize[t].length;++e){var o=new cc.Node("rect");o.width=n.rectSize[t].pos.x,o.height=n.rectSize[t].pos.y,o.color=cc.Color.ORANGE,o.parent=this.rightCtrl}this.useLayoutID=t,this.rightCtrl.getComponent(cc.Layout).updateLayout()},e.prototype.preLoadRect=function(t){var e=this;setTimeout(function(){for(var n=0;n<t.length;++n){var o=new cc.Node("rect"),i=o.addComponent(cc.Sprite);o.putDownId=t[n].putDownID,o.parent=e.putDown,i.trim=!1,i.sizeMode=2,i.spriteFrame=r.default.Instance.GetAsset(t[n].imageRes,c.AssetType.Image),o.position=new cc.Vec3(0,0,0),o.anchorX=.5,o.anchorY=1}},33)},e.prototype.setTouch=function(t){this.touch.active=t},e.prototype.setLeftCtrlFrame=function(t){0!==t.length&&(this.finishImage.node.active=!0,this.leftFrame.node.color=cc.Color.WHITE,this.leftFrame.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image))},e.prototype.setPutDownFrame=function(t){0!==t.length&&(this.putdownFrame.node.active=!0,this.putdownFrame.node.opacity=255,this.putdownFrame.node.color=cc.Color.WHITE,this.putdownFrame.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image))},e.prototype.setCutLineFrame=function(t){0!==t.length&&(this.cutLineFrame.node.active=!0,this.cutLineFrame.node.opacity=255,this.cutLineFrame.node.color=cc.Color.WHITE,this.cutLineFrame.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image))},e.prototype.setFinishImage=function(t){0!==t.length&&(this.leftCtrl.color=cc.Color.WHITE,this.finishImage.node.active=!0,this.finishImage.node.opacity=0,this.finishImage.node.color=cc.Color.WHITE,this.finishImage.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image),this.finishImage.node.active=!1)},e.prototype.setLeftCtrl=function(t,e){this.leftCtrl.children.forEach(function(t){t.destroy()}),this.leftLayout.enabled=!0;for(var n=0;n<t.length;++n){var o=new cc.Node("rect"),i=o.addComponent(cc.Sprite);i.trim=!0,i.sizeMode=1,o.putDownId=t[n].putDownID,o.achorID=t[n].anchorID,o.putState="ok",i.spriteFrame=r.default.Instance.GetAsset(t[n].imageRes,c.AssetType.Image),o.angle=e?u.default.getIns().randomAccess(0,360):0,o.parent=this.leftCtrl;var s=200/o.width;s>200/o.height&&(s=200/o.height),o.leftScale=s,o.leftAngle=o.angle,o.scale=s}},e.prototype.showFinishResult=function(t){var e=this;return void 0===t&&(t=0),new Promise(function(n){var o=!1,i=!1;cc.tween(e.cutLineFrame.node).to(.5,{opacity:0},{easing:cc.easing.quadOut}).delay(t).call(function(){(o=!0)&&i&&n(!0)}).start(),cc.tween(e.finishImage.node).to(.5,{opacity:255},{easing:cc.easing.quadIn}).delay(t).call(function(){i=!0,o&&i&&n(!0)}).start()})},e.prototype.getTargetWorldPos=function(t){return this.rightCtrl.convertToWorldSpaceAR(this.rightCtrl.children[t].position)},e.rectSize=[{length:6,pos:new cc.Vec2(360,360),position:[new cc.Vec2(-90,90),new cc.Vec2(270,90),new cc.Vec2(630,90),new cc.Vec2(-90,-270),new cc.Vec2(270,-270),new cc.Vec2(630,-270)],anchor:[new cc.Vec2(.166,.75),new cc.Vec2(.5,.75),new cc.Vec2(.833,.75),new cc.Vec2(.166,.25),new cc.Vec2(.5,.25),new cc.Vec2(.833,.25)]},{length:4,pos:new cc.Vec2(540,360),position:[new cc.Vec2(0,90),new cc.Vec2(540,90),new cc.Vec2(0,-270),new cc.Vec2(540,-270)],anchor:[new cc.Vec2(.25,.75),new cc.Vec2(.75,.75),new cc.Vec2(.25,.25),new cc.Vec2(.75,.25)]},{length:9,pos:new cc.Vec2(360,240),position:[new cc.Vec2(-90,150),new cc.Vec2(270,150),new cc.Vec2(630,150),new cc.Vec2(-90,-90),new cc.Vec2(270,-90),new cc.Vec2(630,-90),new cc.Vec2(-90,-330),new cc.Vec2(270,-330),new cc.Vec2(630,-330)],anchor:[new cc.Vec2(.166,.833),new cc.Vec2(.5,.833),new cc.Vec2(.833,.833),new cc.Vec2(.166,.5),new cc.Vec2(.5,.5),new cc.Vec2(.833,.5),new cc.Vec2(.166,.166),new cc.Vec2(.5,.166),new cc.Vec2(.833,.166)]}],s([h(cc.Node)],e.prototype,"leftCtrl",void 0),s([h(cc.Node)],e.prototype,"rightCtrl",void 0),s([h(cc.Node)],e.prototype,"touch",void 0),s([h(a.default)],e.prototype,"leftLayout",void 0),s([h(cc.ScrollView)],e.prototype,"scrollView",void 0),s([h(cc.Node)],e.prototype,"putDown",void 0),s([h(cc.Sprite)],e.prototype,"leftFrame",void 0),s([h(cc.Sprite)],e.prototype,"cutLineFrame",void 0),s([h(cc.ScrollView)],e.prototype,"scrollview",void 0),s([h(cc.Sprite)],e.prototype,"finishImage",void 0),s([h(cc.Sprite)],e.prototype,"putdownFrame",void 0),n=s([p,f("release/M010/M010_GameChild")],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../Comp/LayoutHeight":"LayoutHeight","../common/units/M_Tool":"M_Tool"}],M010_Logic:[function(t,e,n){"use strict";cc._RF.push(e,"3761caKFpdOG5G7+kgyAOLc","M010_Logic");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c,a=t("../Assets/AssetManager"),u=t("../Assets/Assets"),l=t("../AudioManager"),p=t("../M017/comp/M017_BackGround"),h=t("./common/Game_Abstract"),f=t("./common/units/M_Audio"),d=t("./comp/M010_GameAction"),m=t("./comp/M010_TimeCount"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._timeEnd=!1,e._curAnwserID=0,e._curQuesStruct=null,e.selectRightCb=null,e.selectWrongCb=null,e.runCheckResultSelf=!1,e.bgm=0,e.repeatQuestionOne=!1,e}return i(e,t),Object.defineProperty(e.prototype,"LogicController",{get:function(){return this._LogicController},set:function(t){this._LogicController=t,this.whileLogic(t)},enumerable:!1,configurable:!0}),e.prototype.timeAction=function(t){switch(t){case m.E_TimerCountCode.TIP:"boolean"==typeof this._curQuesStruct.LevelTime.tipTimePlayEff&&void 0!==this._curQuesStruct.LevelTime.tipTimePlayEff?this.AudioId.tipTimeAudioId=f.default.playEff(a.default.Instance.GetAsset(this.OtherList.Voice_TipTimeEff,u.AssetType.Sound),!0):(this._curQuesStruct.LevelTime.tipTimePlayVoice&&this._curQuesStruct.LevelTime.tipTimePlayVoice.length&&f.default.playEff(a.default.Instance.GetAsset(this._curQuesStruct.LevelTime.tipTimePlayVoice,u.AssetType.Sound),!1),this.OtherList.Voice_TipTimeEff&&(this.AudioId.tipTimeAudioId=f.default.playEff(a.default.Instance.GetAsset(this.OtherList.Voice_TipTimeEff,u.AssetType.Sound),!0))),this.bgm=1,l.default.PlayBGM(a.default.Instance.GetAsset(this.OtherList.Voice_TipTimeBgm,u.AssetType.Sound));break;case m.E_TimerCountCode.FINISH:if(this.runCheckResultSelf)return;this.runCheckResultSelf=!0,this.bgm=0,this.AudioId.tipTimeAudioId&&(cc.audioEngine.stopEffect(this.AudioId.tipTimeAudioId),this.AudioId.tipTimeAudioId=null),l.default.PlayBGM(a.default.Instance.GetAsset(this.OtherList.Voice_Bgm,u.AssetType.Sound)),this._timeEnd=!0,this._comp.GameAction.setTouch(!1);var e=this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID].length;this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][e-1].score=this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][e-1].score-this.BaseConfig.ScoreDeduction.b<0?0:this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][e-1].score-this.BaseConfig.ScoreDeduction.b,this.checkResult(this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][e-1].select.rightNum+this._curQuesStruct.GameItemRes.preLoadRect.fixedId.length===d.default.rectSize[this._curQuesStruct.LayoutID].length)}},e.prototype.whileLogic=function(t){return s(this,void 0,void 0,function(){return r(this,function(){switch(t){case c.PLAYVOICE:this.playVoice();break;case c.FLUSHUI:this.flushUI();break;case c.CREATQUES:1==this._curAnwserID&&this._dataBase.length===this.AllQuesNum?this.LogicController=c.PLAYVOICE:this.createQues(),this.LogicController=c.FLUSHUI;break;case c.GAMESTART:this.gameStart();break;case c.RESTARTTHISLEVEL:this.LogicController=c.FLUSHUI;break;case c.FAILED:this.failed();break;case c.SUCCESS:this.success();break;case c.NEXTLEVEL:this.LogicController=c.CREATQUES;break;case c.ENDGAME:this.endGame()}return[2]})})},e.prototype.putDownResult=function(t,e){return s(this,void 0,void 0,function(){var n,o,i,s,c,a,u,l=this;return r(this,function(){return n=this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID].length,this._timeEnd||this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.rightNum===d.default.rectSize[this._curQuesStruct.LayoutID].length?[2]:(t?(this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.rightNum+=1,this.GameMethod.OnAnswer(!0),o=!1,i=!1,s=!1,c=this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.rightNum+this._curQuesStruct.GameItemRes.preLoadRect.fixedId.length,a=function(t){o&&i&&s&&t===d.default.rectSize[l._curQuesStruct.LayoutID].length&&(l.runCheckResultSelf||l.GameMethod._cacheActionResult[l._curQuesStruct.QuesID][n-1].select.rightNum+l._curQuesStruct.GameItemRes.preLoadRect.fixedId.length!==d.default.rectSize[l._curQuesStruct.LayoutID].length||(l.runCheckResultSelf=!0,l._comp.GameContent.readBackOff(),l.checkResult(!0)))},this.GameMethod.playVoiceAndEff(this._curQuesStruct.VoiceAndEffPlaySame,this._curQuesStruct.SelectRightEff,this.OtherList.SelectRightVoice,"",this.BaseConfig.RightEff,function(){o=!0,a(c)}),this.runCheckResultSelf||this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.rightNum+this._curQuesStruct.GameItemRes.preLoadRect.fixedId.length!==d.default.rectSize[this._curQuesStruct.LayoutID].length||(this._comp.GameTime.pauseTimer(),cc.audioEngine.stopEffect(this.AudioId.tipTimeAudioId),this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].time=this.Timer.getTimeSharingMilliSecond(),this.Timer.pauseTimer()),this.BaseConfig.putRightSpecialEffects&&this.BaseConfig.putRightSpecialEffects.isEnable?(u=this.BaseConfig.putRightSpecialEffects,this.Anim.playSpecialEffects(u.isParticle,u.res,u.effsrc,u.isParticle?"":"default",u.isClickStop,function(){s=!0,a(c)},cc.v2(e.x,e.y))):(s=!0,a(c)),this.GameMethod.playStepRewardAnim(new cc.Vec2(e.x,e.y),this._curQuesStruct.StepRewardAnim).then(function(){i=!0,a(c)})):(this.GameMethod.OnAnswer(!1),this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.wrongNum+=1,this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].score=this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].score-this.BaseConfig.ScoreDeduction.a>=0?this.GameMethod._cacheActionResult[this._curQuesStruct.QuesID][n-1].score-this.BaseConfig.ScoreDeduction.a:0,this.GameMethod.playVoiceAndEff(this._curQuesStruct.VoiceAndEffPlaySame,this._curQuesStruct.SelectRightEff,this.OtherList.SelectWrongVoice,"",this.BaseConfig.WrongEff)),[2])})})},e.prototype.startOutTimer=function(){var t=this;this.BaseConfig.NoActionTimer>0&&(e.noActionTimerId=setTimeout(function(){t.AudioId.noActionAudioId=f.default.playEff(a.default.Instance.GetAsset(t.OtherList.Voice_ControlHint,u.AssetType.Sound),!1,function(){t.AudioId.noActionAudioId=null}),c.GAMESTART===t.LogicController&&(t.cleanOutTimer(!1),t.startOutTimer())},1e3*this.BaseConfig.NoActionTimer))},e.prototype.cleanOutTimer=function(t){void 0===t&&(t=!0),e.noActionTimerId&&(clearTimeout(e.noActionTimerId),e.noActionTimerId=null),t&&this.AudioId.noActionAudioId&&(cc.audioEngine.stopEffect(this.AudioId.noActionAudioId),this.AudioId.noActionAudioId=null)},e.prototype.flushUI=function(){1===this.bgm&&(this.AudioId.tipTimeAudioId&&(cc.audioEngine.stopEffect(this.AudioId.tipTimeAudioId),this.AudioId.tipTimeAudioId=null),l.default.PlayBGM(a.default.Instance.GetAsset(this.OtherList.Voice_Bgm,u.AssetType.Sound)),this.bgm=0),this.cleanOutTimer(),this.AudioId.tipTimeAudioId&&(cc.audioEngine.stopEffect(this.AudioId.tipTimeAudioId),this.AudioId.tipTimeAudioId=null),this.Anim.resetAllAnim(),this._comp.GameContent.readBackOn(),this._comp.GameAction.resetLayout(this._curQuesStruct.LeftCtrlSpacing,this._curQuesStruct.LayoutID),this._comp.GameContent.setReadBack(this._curQuesStruct.TitleVoice.res,null),this._comp.GameContent.setTitle(this._curQuesStruct.Title.imageRes,this._curQuesStruct.Title.content,this._curQuesStruct.Title.contentColor),this._comp.GameContent.updateQuesNum(this._curAnwserID,this.AllQuesNum),0!==this._curQuesStruct.LevelTime.maxTime?(this._comp.GameTime.setTimeSpine(this.OtherList.Spine_Time),this._comp.GameTime.setTipTimeSpine(this._curQuesStruct.LevelTime.tipTimeAnim?this.OtherList.Spine_TipTime:null),this._comp.GameTime.show()):this._comp.GameTime.hide(),this._comp.GameAction.setRectPos(this._curQuesStruct.LayoutID),this._comp.GameAction.setFinishImage(this._curQuesStruct.GameItemRes.finishImageRes),this._comp.GameAction.setCutLineFrame(this._curQuesStruct.GameItemRes.cutLineImageRes),this._comp.GameAction.setPutDownFrame(this._curQuesStruct.GameItemRes.putDownFramRes),this._comp.GameAction.setLeftCtrlFrame(this._curQuesStruct.GameItemRes.leftCtrlFrameRes),this._comp.GameAction.setLeftCtrl(this._curQuesStruct.GameItemRes.cutImageItem,this.BaseConfig.RadomAngle),this._comp.GameAction.setPutDownOkSize(this._curQuesStruct.PutDownOkSize.x,this._curQuesStruct.PutDownOkSize.y),this._comp.GameAction.preLoadRect(this._curQuesStruct.GameItemRes.preLoadRect.fixedId),this._comp.GameAction.putDownResultCb=this.putDownResult.bind(this),this._comp.GameTime.timerActionCb=this.timeAction.bind(this),(this._curAnwserID>1||this.repeatQuestionOne)&&(this.repeatQuestionOne=!1,this.LogicController=c.PLAYVOICE),this._comp.GameAction.updataLayout()},e.prototype.playVoice=function(){this._curQuesStruct.TitleVoice.playOnLoad&&this._comp.GameContent.playReadBack(),this.LogicController=c.GAMESTART},e.prototype.gameTouch=function(){this._comp.GameContent.stopReadBack(),this.AudioId.noActionAudioId&&(cc.audioEngine.stopEffect(this.AudioId.noActionAudioId),e.noActionTimerId=null),c.GAMESTART===this.LogicController&&(this.cleanOutTimer(),this.startOutTimer())},e.prototype.gameTouchNoded=function(){var t=this;this.AudioId.clickGameItemId&&(cc.audioEngine.stopEffect(this.AudioId.clickGameItemId),this.AudioId.clickGameItemId=null),this.AudioId.clickGameItemId=f.default.playEff(a.default.Instance.GetAsset(this.OtherList.Voice_TouchNoded,u.AssetType.Sound),!1,function(){t.AudioId.clickGameItemId=null})},e.prototype.gameStart=function(){this._timeEnd=!1,this.Timer.resumeTimer(),this.startOutTimer(),this._comp.GameTime.startSub(this._curQuesStruct.LevelTime.maxTime,this._curQuesStruct.LevelTime.tipTime),this._comp.GameAction.setTouch(!0),this.runCheckResultSelf=!1},e.prototype.success=function(){return s(this,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return this.cleanOutTimer(),(void 0===this._curQuesStruct.ScreenShoot||this._curQuesStruct.ScreenShoot)&&this.GameMethod.ScreenShoot(),[4,this._comp.GameAction.showFinishResult()];case 1:return e.sent(),this.Anim.playLvPassAndFaild(this._curQuesStruct.LevelPass.animRes,this._curQuesStruct.LevelPass.animVoice,"default",this._curQuesStruct.LevelPass.isClickStop,void 0!==this._curQuesStruct.LevelPass.isStay&&this._curQuesStruct.LevelPass.isStay,cc.v2(0,0),127).then(function(){return s(t,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return this._curAnwserID!==this.AllQuesNum?[3,3]:this.BaseConfig.EndQuesPlayLevelPassAnim?[4,this.GameMethod.Reward_LvEnd(this._curQuesStruct.ThisLevelRewardAnim)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.OtherList.Voice_Sumup?this.Anim.playReviewAnim(this.BaseConfig.Anim_Sumup?this.OtherList.Spine_AnimSumup:"",this.OtherList.Voice_Sumup,"default",!1,cc.v2(0,0),127).then(function(){t.LogicController=c.ENDGAME}):this.LogicController=c.ENDGAME,[2];case 3:return[4,this.GameMethod.Reward_LvEnd(this._curQuesStruct.ThisLevelRewardAnim)];case 4:return e.sent(),this.LogicController=c.NEXTLEVEL,[2]}})})}),[2]}})})},e.prototype.failed=function(){var t=this;this.cleanOutTimer(),this.Anim.playLvPassAndFaild(this._curQuesStruct.LevelFailed.animRes,this._curQuesStruct.LevelFailed.animVoice,"default",this._curQuesStruct.LevelFailed.isClickStop,!1,cc.v2(0,0),127).then(function(){if(!t._curQuesStruct.GameFailedLogic.EndGame)return t._curQuesStruct.GameFailedLogic.RestartThisLevel?(1===t._curAnwserID&&(t.repeatQuestionOne=!0),t.GameMethod._cacheActionResult[t._curQuesStruct.QuesID].push({select:{rightNum:0,wrongNum:0},id:t._curQuesStruct.QuesID,score:100,time:0}),void(t.LogicController=c.RESTARTTHISLEVEL)):void(t.LogicController=c.NEXTLEVEL);t.LogicController=c.ENDGAME})},e.prototype.checkResult=function(t){this.LogicController=t?c.SUCCESS:c.FAILED},e.prototype.endGame=function(){this.Timer.cleanTimer(),this.GameMethod.Reward_AllLevelPass(this.BaseConfig.Anim_LevelAllPassReward)},e.prototype.reLoadGuideAnim=function(t){var e=this,n=new cc.Node("parent");n.width=1920,n.height=1080,n.addComponent(cc.BlockInputEvents),n.parent=this.Anim.rootNode;var o=cc.instantiate(this._comp.GameAction.leftCtrl.children[0]),i=this._comp.GameAction.leftCtrl.convertToWorldSpaceAR(this._comp.GameAction.leftCtrl.children[0].position);n.addChild(o);var s=new cc.Node("hand");s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=a.default.Instance.GetAsset(this.OtherList.Image_GuideHand,u.AssetType.Image),s.parent=n,s.position=o.position=n.convertToNodeSpaceAR(i),o.anchorX=.5,o.anchorY=.5,o.getComponent(cc.Sprite).trim=!0,o.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM;var r=n.convertToNodeSpaceAR(this._comp.GameAction.getTargetWorldPos(this._curQuesStruct.GameItemRes.cutImageItem[0].putDownID));return new Promise(function(i){var c=!1,l=!1,p=!1;e.Anim.rootNode.active=!0,f.default.playEff(a.default.Instance.GetAsset(t,u.AssetType.Sound),!1,function(){p=!0,c&&l&&p&&(n.destroy(),e.Anim.rootNode.active=!1,i())}),s.scale=1;var h=e.BaseConfig.Guide_diyTime.click-.1;cc.tween(s).delay(.1).to(.8*h,{scale:.7}).to(.2*h,{scale:1}).call(function(){cc.tween(o).to(e.BaseConfig.Guide_diyTime.scale,{scale:1,angle:0}).call(function(){var t=e._curQuesStruct.GameItemRes.cutImageItem[0].anchorID;o.anchorX=d.default.rectSize[e._curQuesStruct.LayoutID].anchor[t].x,o.anchorY=d.default.rectSize[e._curQuesStruct.LayoutID].anchor[t].y,o.getComponent(cc.Sprite).trim=!1,o.getComponent(cc.Sprite).sizeMode=2,cc.tween(o).to(e.BaseConfig.Guide_diyTime.move,{position:r}).call(function(){l=!0,c&&l&&p&&(n.destroy(),e.Anim.rootNode.active=!1,i())}).start(),cc.tween(s).to(e.BaseConfig.Guide_diyTime.move,{position:r}).call(function(){c=!0,s.destroy(),c&&l&&p&&(n.destroy(),e.Anim.rootNode.active=!1,i())}).start()}).start()}).start()})},e.prototype.createQues=function(){if(0!==this._dataBase.length){var t;if(this._curAnwserID+=1,t=this._dataBase.shift(),this.GameMethod._cacheActionResult[t.QuesID].push({select:{rightNum:0,wrongNum:0},id:t.QuesID,score:100,time:0}),this._curQuesStruct=t,this._curQuesStruct.GameItemRes.cutImageItem.forEach(function(t,e){t.anchorID=e}),0!==this._curQuesStruct.GameItemRes.preLoadRect.radomItemNum)this._curQuesStruct.GameItemRes.preLoadRect.radomItemNum<this._curQuesStruct.GameItemRes.cutImageItem.length&&(this._curQuesStruct.GameItemRes.preLoadRect.fixedId=this.Tool.spliceRadomArrValue(this._curQuesStruct.GameItemRes.cutImageItem,this._curQuesStruct.GameItemRes.preLoadRect.radomItemNum));else if(this._curQuesStruct.GameItemRes.preLoadRect.fixedId.length<this._curQuesStruct.GameItemRes.cutImageItem.length)for(var e=0;e<this._curQuesStruct.GameItemRes.preLoadRect.fixedId.length;++e)for(var n=0;n<this._curQuesStruct.GameItemRes.cutImageItem.length;++n){var o=this._curQuesStruct.GameItemRes.cutImageItem[n];if(o.putDownID===this._curQuesStruct.GameItemRes.preLoadRect.fixedId[e].putDownID){this._curQuesStruct.GameItemRes.preLoadRect.fixedId[e]=o;break}}this._curQuesStruct.GameItemRes.cutImageItem=this.Tool.uniqureArray(this._curQuesStruct.GameItemRes.cutImageItem,this._curQuesStruct.GameItemRes.preLoadRect.fixedId),this._curQuesStruct.GameItemRes.radomItemPos&&(this._curQuesStruct.GameItemRes.cutImageItem=this.Tool.radomArrValue(this._curQuesStruct.GameItemRes.cutImageItem))}else this.LogicController=c.ENDGAME},e.prototype.sortQuesDataBase=function(){var t=this;this._dataBase=this.BaseConfig.DataBase;var e=[],n=this.BaseConfig.RadomDataBase;if(n.isEnable&&this._dataBase.length>1){var o=[],i=0;for(n.fixedFirst?(e.push(this._dataBase[0]),i=1):i=0;i<this._dataBase.length;++i)o.push(i);for(var s=e.length;s<this._dataBase.length;++s){var r=this.Tool.randomAccess(0,o.length-1);e.push(this._dataBase[o[r]]),o.splice(r,1)}}else e=this._dataBase;e.forEach(function(e,n){e.QuesID=n,t.GameMethod._cacheActionResult[n]=[]}),this._dataBase=e},e.prototype.init=function(){this.BaseConfig.BgSetting||(this.BaseConfig.BgSetting={centerRes:this.BaseConfig.hasBg?this.OtherList.Image_Bg:"",leftRes:"M010_IMAGE_BG_L",rightRes:"M010_IMAGE_BG_R",spineRes:this.BaseConfig.Anim_bg.isEnable?this.OtherList.Spine_AnimBg:"",idle:this.BaseConfig.Anim_bg.idle,run:this.BaseConfig.Anim_bg.Run}),this._comp.BackGround.setBgRes(this.BaseConfig.BgSetting),this._comp.BackGround.bgType!==p.M017_BGTYPE.BOTHOF&&this._comp.BackGround.bgType!==p.M017_BGTYPE.SPINE||this._comp.BackGround.playBgAnim(this.BaseConfig.BgSetting.run,this.BaseConfig.BgSetting.idle),this._comp.GameContent.setReadPlaySpine(this.OtherList.Spine_Replay),this._comp.GameContent.setQuesNumBg(this.OtherList.Image_NumberBg),this._comp.GameContent.setTittleFrame(this.OtherList.Image_QuesFrame),this._comp.GameAction.touchStart=this.gameTouch.bind(this),this._comp.GameAction.touchNoded=this.gameTouchNoded.bind(this)},e.prototype.startAnimIsFinish=function(){this.LogicController=c.PLAYVOICE},e.prototype.gameHideEvent=function(){this.cleanOutTimer(),this.Timer.pauseTimer()},e.prototype.gameShowEvent=function(){this.Timer.resumeTimer(),this.LogicController==c.GAMESTART&&(this.cleanOutTimer(),this.startOutTimer())},e.prototype.playGuideAnim=function(){return s(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return(t=this.BaseConfig.Anim_Guide).isEnable?(this.Anim.setOpacity(t.bgOpacity),[4,this.reLoadGuideAnim(this.OtherList.Voice_Guide[0])]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.quit=function(){this.cleanOutTimer()},e.noActionTimerId=null,e}(h.Game_Abstract);n.default=g,function(t){t[t.CREATQUES=0]="CREATQUES",t[t.FLUSHUI=1]="FLUSHUI",t[t.PLAYVOICE=2]="PLAYVOICE",t[t.GAMESTART=3]="GAMESTART",t[t.SUCCESS=4]="SUCCESS",t[t.FAILED=5]="FAILED",t[t.RESTARTTHISLEVEL=6]="RESTARTTHISLEVEL",t[t.NEXTLEVEL=7]="NEXTLEVEL",t[t.ENDGAME=8]="ENDGAME"}(c||(c={})),cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../AudioManager":"AudioManager","../M017/comp/M017_BackGround":"M017_BackGround","./common/Game_Abstract":"Game_Abstract","./common/units/M_Audio":"M_Audio","./comp/M010_GameAction":"M010_GameAction","./comp/M010_TimeCount":"M010_TimeCount"}],M010_Main:[function(t,e,n){"use strict";cc._RF.push(e,"6426aWwUPhLcIIE/xEoDJdX","M010_Main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../M017/comp/M017_BackGround"),c=t("../VideoPlayer/GameController"),a=t("./common/units/M_Content"),u=t("./comp/M010_GameAction"),l=t("./comp/M010_TimeCount"),p=t("./M010_Logic"),h=cc._decorator,f=h.ccclass,d=h.property,m=h.menu,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpineBgSprite=null,e}return i(e,t),e.prototype.start=function(){this.ENABLE_MULTI_TOUCH=cc.macro.ENABLE_MULTI_TOUCH,cc.macro.ENABLE_MULTI_TOUCH=!1,this.Logic=new p.default(this.node.getChildByName("btn_quit"),this.node.getChildByName("layer_rewardAndAnim"),this.node.getComponent(c.default).GetGameConfigName()||"M010_GAMELISTJSON",{GameController:this.node.getComponent(c.default),GameContent:this.node.getChildByName("layout_content").getComponent(a.default),BackGround:this.node.getChildByName("bg").getComponent(r.M017_BackGround),GameTime:this.node.getChildByName("layout_content").getChildByName("gametime").getComponent(l.default),GameAction:this.node.getChildByName("layer_game").getComponent(u.default)},this.SpineBgSprite),this.Logic.run()},e.prototype.onDestroy=function(){this.Logic.onDestroy(),cc.macro.ENABLE_MULTI_TOUCH=this.ENABLE_MULTI_TOUCH},s([d(cc.SpriteFrame)],e.prototype,"SpineBgSprite",void 0),s([f,m("\u6e38\u620f\u5165\u53e3/M010/Main")],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../M017/comp/M017_BackGround":"M017_BackGround","../VideoPlayer/GameController":"GameController","./M010_Logic":"M010_Logic","./common/units/M_Content":"M_Content","./comp/M010_GameAction":"M010_GameAction","./comp/M010_TimeCount":"M010_TimeCount"}],M010_TimeCount:[function(t,e,n){"use strict";cc._RF.push(e,"2e9f1qeqVxLkb2YOQgYXQO+","M010_TimeCount");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.E_TimerCountCode=void 0;var r,c=t("../../Assets/AssetManager"),a=t("../../Assets/Assets"),u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=null,e.tipTime=null,e._timerID=null,e.maxTime=0,e.timerActionCb=null,e.pauseTime=!1,e}return i(e,t),e.prototype.setTimeSpine=function(t){0!==t.length&&(this.time.skeletonData=c.default.Instance.GetAsset(t,a.AssetType.Spine))},e.prototype.setTipTimeSpine=function(t){0!==t.length&&(this.tipTime.skeletonData=c.default.Instance.GetAsset(t,a.AssetType.Spine))},e.prototype.startSub=function(t,e){var n=this;void 0===t&&(t=null),null!==t&&(this.maxTime=t),this.maxTime<1||(this._timerID&&this.cleanTimer(),this.show(),this.pauseTime=!1,this.time.paused=!1,this.tipTime.paused=!1,this.time.timeScale=this.time.skeletonData._skeletonCache.animations[0].duration/t,this.time.setCompleteListener(function(t){cc.log(93911,t.trackTime,t.animationEnd)}),this.time.setAnimation(0,"default",!1),this._curNum=this.maxTime,this._timerID=setInterval(function(){if(n._curNum!==e||n.pauseTime||(n.time.node.active=!0,n.tipTime.node.active=!0,n.tipTime.setAnimation(0,"default",!0),n.timerActionCb&&n.timerActionCb(r.TIP)),0===n._curNum&&!n.pauseTime)return n.cleanTimer(),void(n.timerActionCb&&n.timerActionCb(r.FINISH));n._curNum--},1e3))},e.prototype.pauseTimer=function(){this.time.paused=!0,this.tipTime.paused=!0,this.pauseTime=!0,this._timerID&&(clearInterval(this._timerID),this._timerID=null)},e.prototype.cleanTimer=function(){cc.isValid(this.tipTime.node,!0)&&(this.tipTime.clearTracks(),this.tipTime.node.active=!1),this._timerID&&(clearInterval(this._timerID),this._timerID=null)},e.prototype.show=function(){this.node.active=!0,this.time.node.active=!0,this.tipTime.node.active=!1,this.time.setToSetupPose(),this.time.clearTracks()},e.prototype.hide=function(){this.node.active=!1},e.prototype.onDestroy=function(){this.cleanTimer()},s([p(sp.Skeleton)],e.prototype,"time",void 0),s([p(sp.Skeleton)],e.prototype,"tipTime",void 0),s([l,h("release/M010/M010TimeCount")],e)}(cc.Component);n.default=f,function(t){t[t.TIP=0]="TIP",t[t.FINISH=1]="FINISH"}(r=n.E_TimerCountCode||(n.E_TimerCountCode={})),cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets"}],M017_BackGround:[function(t,e,n){"use strict";cc._RF.push(e,"1e564bpx3tBpIqCwcQWTJEn","M017_BackGround");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.M017_BackGround=n.M017_BGTYPE=void 0;var r,c=t("../../Assets/AssetManager"),a=t("../../Assets/Assets");(function(t){t[t.NULL=0]="NULL",t[t.IMAGE=1]="IMAGE",t[t.SPINE=2]="SPINE",t[t.BOTHOF=3]="BOTHOF"})(r=n.M017_BGTYPE||(n.M017_BGTYPE={}));var u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=u.executionOrder,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bgType=r.NULL,e._timeoutStart=null,e._timeoutEnd=null,e.spineName=["idle","loop"],e.leftImage=null,e.centerImage=null,e.rightImage=null,e.spineAnim=null,e}return i(e,t),Object.defineProperty(e.prototype,"bgType",{get:function(){return this._bgType},set:function(t){t in r&&(this._bgType=t,this.checkComponent())},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t;this.node.removeAllChildren();var e=null===(t=new cc.Node("image"))||void 0===t?void 0:t.addComponent(cc.Layout);e&&(this.node.addChild(e.node),e.type=cc.Layout.Type.HORIZONTAL,e.resizeMode=cc.Layout.ResizeMode.CONTAINER,e.updateLayout()),this.leftImage=this.HasChildNode("left",e.node,!0,0),this.centerImage=this.HasChildNode("center",e.node,!0,1),this.rightImage=this.HasChildNode("right",e.node,!0,2),this.spineAnim=this.HasChildNode("spineAnim",this.node,!0,3)},e.prototype.HasChildNode=function(t,e,n,o){if(void 0===e&&(e=this.node),void 0===n&&(n=!0),void 0===o&&(o=-1),!e.getChildByName(t)){if(n){var i=new cc.Node(t);return e.addChild(i),-1!==o&&(i.zIndex=o),i}return null}return e.getChildByName(t)},e.prototype.checkComponent=function(){var t=this;this.node.getComponent(cc.Widget)||this.node.addComponent(cc.Widget);var e=this.node.getComponent(cc.Widget);e.top=0,e.bottom=0,e.updateAlignment();var n=function(){t.leftImage.getComponent(cc.Sprite)||t.leftImage.addComponent(cc.Sprite),t.centerImage.getComponent(cc.Sprite)||t.centerImage.addComponent(cc.Sprite),t.rightImage.getComponent(cc.Sprite)||t.rightImage.addComponent(cc.Sprite),t.leftImage.getComponent(cc.Widget)||t.leftImage.addComponent(cc.Widget),t.centerImage.getComponent(cc.Widget)||t.centerImage.addComponent(cc.Widget),t.rightImage.getComponent(cc.Widget)||t.rightImage.addComponent(cc.Widget);var n=t.leftImage.getComponent(cc.Sprite);n.trim=!1,n.sizeMode=cc.Sprite.SizeMode.RAW,(n=t.centerImage.getComponent(cc.Sprite)).trim=!1,n.sizeMode=cc.Sprite.SizeMode.RAW,(n=t.rightImage.getComponent(cc.Sprite)).trim=!1,n.sizeMode=cc.Sprite.SizeMode.RAW;var o=t.leftImage.getComponent(cc.Widget);o.top=o.bottom=0,e.updateAlignment(),(o=t.centerImage.getComponent(cc.Widget)).top=o.bottom=0,e.updateAlignment(),(o=t.rightImage.getComponent(cc.Widget)).top=o.bottom=0,e.updateAlignment()};switch(this._bgType){case r.IMAGE:n();break;case r.SPINE:this.spineAnim.getComponent(sp.Skeleton)||this.spineAnim.addComponent(sp.Skeleton);break;case r.BOTHOF:n(),this.spineAnim.getComponent(sp.Skeleton)||this.spineAnim.addComponent(sp.Skeleton);break;case r.NULL:this.leftImage.removeComponent(cc.Sprite),this.leftImage.removeComponent(cc.Widget),this.centerImage.removeComponent(cc.Sprite),this.centerImage.removeComponent(cc.Widget),this.rightImage.removeComponent(cc.Sprite),this.rightImage.removeComponent(cc.Widget),this.spineAnim.removeComponent(sp.Skeleton)}},e.prototype.setBgRes=function(t,e,n,o,i,s){void 0===e&&(e=""),void 0===n&&(n=""),void 0===o&&(o=""),void 0===i&&(i=0),void 0===s&&(s=0);var u;(u="string"==typeof t?{centerRes:t,leftRes:e,rightRes:n,spineRes:o,run:i,idle:s}:t).spineRes.length&&u.centerRes.length?(this.bgType=r.BOTHOF,this.leftImage.getComponent(cc.Sprite)&&(this.leftImage.getComponent(cc.Sprite).spriteFrame=c.default.Instance.GetAsset(u.leftRes,a.AssetType.Image)),this.centerImage.getComponent(cc.Sprite)&&(this.centerImage.getComponent(cc.Sprite).spriteFrame=c.default.Instance.GetAsset(u.centerRes,a.AssetType.Image)),this.rightImage.getComponent(cc.Sprite)&&(this.rightImage.getComponent(cc.Sprite).spriteFrame=c.default.Instance.GetAsset(u.rightRes,a.AssetType.Image)),this.spineAnim.getComponent(sp.Skeleton)&&(this.spineAnim.getComponent(sp.Skeleton).skeletonData=c.default.Instance.GetAsset(u.spineRes,a.AssetType.Spine))):u.centerRes?(this.bgType=r.IMAGE,this.leftImage.getComponent(cc.Sprite)&&(this.leftImage.getComponent(cc.Sprite).spriteFrame=c.default.Instance.GetAsset(u.leftRes,a.AssetType.Image)),this.centerImage.getComponent(cc.Sprite)&&(this.centerImage.getComponent(cc.Sprite).spriteFrame=c.default.Instance.GetAsset(u.centerRes,a.AssetType.Image)),this.rightImage.getComponent(cc.Sprite)&&(this.rightImage.getComponent(cc.Sprite).spriteFrame=c.default.Instance.GetAsset(u.rightRes,a.AssetType.Image)),this.spineAnim.getComponent(sp.Skeleton)&&(this.spineAnim.getComponent(sp.Skeleton).skeletonData=null)):u.spineRes&&(this.bgType=r.SPINE,this.leftImage.getComponent(cc.Sprite)&&(this.leftImage.getComponent(cc.Sprite).spriteFrame=null),this.centerImage.getComponent(cc.Sprite)&&(this.centerImage.getComponent(cc.Sprite).spriteFrame=null),this.rightImage.getComponent(cc.Sprite)&&(this.rightImage.getComponent(cc.Sprite).spriteFrame=null),this.spineAnim.getComponent(sp.Skeleton)&&(this.spineAnim.getComponent(sp.Skeleton).skeletonData=c.default.Instance.GetAsset(u.spineRes,a.AssetType.Spine))),0==u.run&&0==u.idle||this.playBgAnim(u.run,u.idle)},e.prototype.playBgAnim=function(t,e){var n=this;this.onDestroy();var o=this.spineAnim.getComponent(sp.Skeleton);o&&o.skeletonData&&(o.setToSetupPose(),o.setAnimation(0,this.spineName[1],!0),0!=e&&(this._timeoutStart=setTimeout(function(){n._timeoutStart=null,o.setAnimation(0,n.spineName[0],!0),n._timeoutEnd=setTimeout(function(){n._timeoutEnd=null,n.playBgAnim(t,e)},1e3*e)},1e3*t)))},e.prototype.onDestroy=function(){this._timeoutStart&&(clearTimeout(this._timeoutStart),this._timeoutStart=null),this._timeoutEnd&&(clearTimeout(this._timeoutEnd),this._timeoutEnd=null)},s([p({serializable:!0})],e.prototype,"_bgType",void 0),s([p({type:cc.Enum(r),tooltip:"\u80cc\u666f\u7c7b\u578b"})],e.prototype,"bgType",null),s([l,f(-65535),h("release/M017/M017_BackGround")],e)}(cc.Component);n.M017_BackGround=d,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets"}],M017_ConfigT:[function(t,e,n){"use strict";cc._RF.push(e,"7abf68df0NCU7JGvMXhcc55","M017_ConfigT"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Assets/AssetManager"),i=t("../../Assets/Assets"),s=t("../../M001/release/units/Tool"),r=function(){function t(t){this.config=null,this.config=o.default.Instance.GetAsset(t,i.AssetType.GameConfig),this.config&&(this._baseConfig=s.default.cloneObject(this.config.BaseConfig),this._otherList=s.default.cloneObject(this.config.OtherList))}return t.prototype.getBaseConfig=function(){return JSON.parse(JSON.stringify(this._baseConfig))},t.prototype.getOtherList=function(){return this._otherList},t}();n.default=r,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../M001/release/units/Tool":"Tool"}],M017_Content:[function(t,e,n){"use strict";cc._RF.push(e,"ddb6chr+vdOh7l3Ht6OADb7","M017_Content");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Assets/AssetManager"),c=t("../../Assets/Assets"),a=t("../../AudioManager"),u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleFrameLeft=null,e.titleFrameRight=null,e.titleFrame=null,e.title=null,e.titleImage=null,e.readBack=null,e.quesNum=null,e.targetNum=null,e.readBackSpineName=["idle","play"],e.isPlayReadBack=-1,e.readBackFinishCb=null,e}return i(e,t),e.prototype.loadSprite=function(t,e){var n=r.default.Instance.GetAsset(e,c.AssetType.Image);n?(t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite),t.getComponent(cc.Sprite).trim=!1,t.getComponent(cc.Sprite).spriteFrame=n,t.color=cc.color(255,255,255,255)):(t.getComponent(cc.Sprite).spriteFrame=null,t.color=cc.color(210,149,255,255))},e.prototype.setQuesNumBg=function(t){this.loadSprite(this.quesNum.node.parent,t)},e.prototype.setTargetNumBg=function(t){this.loadSprite(this.targetNum.node.parent,t)},e.prototype.updateTargetNum=function(t,e){0!==e?(this.targetNum.string=(t<10?"0"+t:t)+":"+(e<10?"0"+e:e),this.targetNum.node.active=!0):this.targetNum.string=""},e.prototype.setTitle=function(t,e,n){t?(this.titleImage.spriteFrame=r.default.Instance.GetAsset(e,c.AssetType.Image),this.titleImage.node.active=!(this.title.node.active=!1)):(this.title.string=e,this.title.node.color=new cc.Color(n.r,n.g,n.b),this.title.node.active=!(this.titleImage.node.active=!1))},e.prototype.setTitleFrame=function(t,e,n){this.titleFrame.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image),this.titleFrameLeft.spriteFrame=r.default.Instance.GetAsset(e,c.AssetType.Image),this.titleFrameRight.spriteFrame=r.default.Instance.GetAsset(n,c.AssetType.Image)},e.prototype.updateQuesNum=function(t,e){1!==e?(1===e&&(this.quesNum.node.active=!1),this.quesNum.string=(t<10?"0"+t:t)+":"+(e<10?"0"+e:e),this.quesNum.node.active=!0):this.quesNum.string=""},e.prototype.setReadPlayAnim=function(t){0!==t.length&&(this.readBack.skeletonData=r.default.Instance.GetAsset(t,c.AssetType.Spine))},e.prototype.setReadBack=function(t,e){var n=this;void 0===e&&(e=null),-1!==this.isPlayReadBack&&cc.audioEngine.stopEffect(this.isPlayReadBack),this.readBack.node.targetOff("touchend"),this.readBackSrc=t.voiceSrc,this.readBack.node.active=!(!t.voiceSrc||0===t.voiceSrc.length),this.readBack.node.active?(this.readBack.node.on("touchend",function(){a.default.Play(r.default.Instance.GetAsset("M017_BTN_REPLAY",c.AssetType.Sound)),n.playReadBack()},this.readBack),t.isPlayOnLoad?this.playReadBack(e):e&&e()):e&&e()},e.prototype.stopReadBack=function(){-1!==this.isPlayReadBack&&cc.audioEngine.stopEffect(this.isPlayReadBack),this.isPlayReadBack=-1,this.readBack.getComponent(sp.Skeleton).loop=!1,this.readBack.getComponent(sp.Skeleton).animation=this.readBackSpineName[0],this.readBackFinishCb&&this.readBackFinishCb(),this.readBackFinishCb=null},e.prototype.playReadBack=function(t){var e=this;void 0===t&&(t=null),-1===this.isPlayReadBack&&(t&&(this.readBackFinishCb=t),this.isPlayReadBack=-2,this.readBack.node.active&&(this.readBack.getComponent(sp.Skeleton).loop=!0,this.readBack.getComponent(sp.Skeleton).setToSetupPose(),this.readBack.getComponent(sp.Skeleton).animation=this.readBackSpineName[1],r.default.Instance.GetAsset(this.readBackSrc,c.AssetType.Sound)?this.isPlayReadBack=a.default.Play(r.default.Instance.GetAsset(this.readBackSrc,c.AssetType.Sound),!1,function(){e.isPlayReadBack=-1,e.stopReadBack()}):(this.isPlayReadBack=-1,this.stopReadBack())))},s([p(cc.Sprite)],e.prototype,"titleFrameLeft",void 0),s([p(cc.Sprite)],e.prototype,"titleFrameRight",void 0),s([p(cc.Sprite)],e.prototype,"titleFrame",void 0),s([p(cc.Label)],e.prototype,"title",void 0),s([p(cc.Sprite)],e.prototype,"titleImage",void 0),s([p(sp.Skeleton)],e.prototype,"readBack",void 0),s([p(cc.Label)],e.prototype,"quesNum",void 0),s([p(cc.Label)],e.prototype,"targetNum",void 0),s([l,h("release/M017/M017_Content")],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../AudioManager":"AudioManager"}],M017_CountStart:[function(t,e,n){"use strict";cc._RF.push(e,"57228Ud03JEF6z1EvCduqAQ","M017_CountStart");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Assets/AssetManager"),u=t("../../Assets/Assets"),l=t("../../AudioManager"),p=cc._decorator,h=p.ccclass,f=p.property,d=p.menu,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numNode=null,e.timerActionCb=null,e}return i(e,t),e.prototype.setSpData=function(t){this.numNode.getComponent(sp.Skeleton).skeletonData=a.default.Instance.GetAsset(t,u.AssetType.Spine)},e.prototype.cleanTimer=function(){},e.prototype.runCountDown=function(t){return r(this,void 0,Promise,function(){var e=this;return c(this,function(){return[2,new Promise(function(n){e.node.active=!0,l.default.Play(a.default.Instance.GetAsset(t,u.AssetType.Sound)),e.numNode.getComponent(sp.Skeleton).setToSetupPose(),e.numNode.getComponent(sp.Skeleton).animation="default",e.numNode.getComponent(sp.Skeleton).loop=!1,e.numNode.getComponent(sp.Skeleton).setCompleteListener(function(){e.numNode.getComponent(sp.Skeleton).setToSetupPose(),e.node.active=!1,n(!0)})})]})})},e.prototype.onDestroy=function(){this.cleanTimer()},s([f(cc.Node)],e.prototype,"numNode",void 0),s([h,d("release/M017/M017_CountStart")],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../AudioManager":"AudioManager"}],M017_GameChild:[function(t,e,n){"use strict";cc._RF.push(e,"f19ad92aeFHU7sFRYO+MB8T","M017_GameChild");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.M017_E_GameDir=void 0;var r,c,a=t("../../Assets/AssetManager"),u=t("../../Assets/Assets"),l=t("../../M001/release/units/Tool"),p=t("../units/M017_NodePool"),h=cc._decorator,f=h.ccclass,d=h.property,m=h.menu,g="M017_GameItem",y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameItem=null,e.content=null,e._speed=2,e._isHIdeEvent=null,e._gameItemLabelColor={r:0,g:0,b:0},e}return i(e,t),e.prototype.setLabelColor=function(t){this._gameItemLabelColor=t},e.prototype.onLoad=function(){var t=this;this.cleanAllChild(),this.creatNodePool(g,this.gameItem,10),this.creatNodePool("M017_Particle",a.default.Instance.GetParticle("M017_RIGHTANIM","rightTip").node,10),cc.game.on(cc.game.EVENT_HIDE,function(){t._isHIdeEvent?t._isHIdeEvent.isHide=!0:t._isHIdeEvent={isHide:!0},t._gameHideCb&&t._gameHideCb()}),cc.game.on(cc.game.EVENT_SHOW,function(){t._isHIdeEvent&&t._isHIdeEvent.isHide&&t._isHIdeEvent.node&&(t.resumeCreateGameItem(),t._isHIdeEvent={isHide:!1}),t._gameShowCb&&t._gameShowCb()})},e.prototype.update=function(){this.gameItemMove()},e.prototype.lateUpdate=function(){this.destroyGameItem()},e.prototype.onDestroy=function(){this.cleanAllChild(),p.default.getIns().cleanPool()},e.prototype.gameItemMove=function(){this.content.children.forEach(function(t){if(t.death===c.LIVE)switch(t.dir){case r.UP:t.y+=t.speed;break;case r.DOWN:t.y-=t.speed;break;case r.LEFT:t.x-=t.speed;break;case r.RIGHT:t.x+=t.speed}})},e.prototype.getBallInitPos=function(t,e,n){var o,i;switch(t){case r.UP:o=l.default.getInstance().randomAccess(-this.content.width/2+e/2,this.content.width/2-e/2),i=-600;break;case r.DOWN:o=l.default.getInstance().randomAccess(-this.content.width/2+e/2,this.content.width/2-e/2),i=650;break;case r.LEFT:i=l.default.getInstance().randomAccess(-this.content.height/2+n/2,this.content.height/2-n/2),o=1150;break;case r.RIGHT:i=l.default.getInstance().randomAccess(-this.content.height/2+n/2,this.content.height/2-n/2),o=-1150}return new cc.Vec3(o,i,0)},e.prototype.creatNodePool=function(t,e,n){p.default.getIns().createrNodePool(t,e,n)},e.prototype.destroyGameItem=function(){for(var t=cc.rect(this.node.getBoundingBox().x,this.node.getBoundingBox().y,this.node.getBoundingBox().width,this.node.getBoundingBox().height),e=0;e<this.content.children.length;){var n=this.content.children[e],o=this.node.parent.convertToNodeSpaceAR(this.content.convertToWorldSpaceAR(n.position));n.death===c.DESTROY&&cc.isValid(n,!0)?(n.targetOff(n),p.default.getIns().destroyNode(g,n)):cc.Intersection.rectRect(cc.rect(o.x-n.width/2,o.y-n.height/2,n.width,n.height),t)?e++:(n.targetOff(n),p.default.getIns().destroyNode(g,n))}},e.prototype.setGameItemClickCb=function(t){this._clickCb=t},e.prototype.setHideCb=function(t){this._gameHideCb=t},e.prototype.setShowCb=function(t){this._gameShowCb=t},e.prototype.resumeCreateGameItem=function(){p.default.getIns().destroyNode(g,this._isHIdeEvent.node),this.createBalloon(this._isHIdeEvent.skeletonData,this._isHIdeEvent.id,this._isHIdeEvent.content,this._isHIdeEvent.dir,this._isHIdeEvent.speed,this._isHIdeEvent.angleToDir),this._isHIdeEvent=null},e.prototype.createBalloon=function(t,e,n,o,i,s){var h=this;if(void 0===t&&(t=null),void 0===s&&(s=!1),o in r){var f=p.default.getIns().getNodeFromPool(g);this._isHIdeEvent={isHide:!1,node:f,skeletonData:t,id:e,content:n,dir:o,speed:i,angleToDir:s};var d=f.getChildByName("spine");if(f.getChildByName("rightTip")&&f.getChildByName("rightTip").destroy(),f.removeChild(cc.find("particle",f)),d.active=!0,0!==n.image.length?(f.getChildByName("label").active=!1,f.getChildByName("image").active=!0,f.getChildByName("image").getComponent(cc.Sprite).spriteFrame=a.default.Instance.GetAsset(n.image,u.AssetType.Image)):(f.getChildByName("label").active=!0,f.getChildByName("image").active=!1,f.getChildByName("label").color=new cc.Color(this._gameItemLabelColor.r,this._gameItemLabelColor.g,this._gameItemLabelColor.b),f.getChildByName("label").getComponent(cc.Label).string=n.label),d.getComponent(sp.Skeleton).skeletonData=a.default.Instance.GetAsset(t,u.AssetType.Spine),f.content=n,f.answerID=e,f.dir=o,f.speed=i/60,f.death=c.LIVE,f.width=f.height=245,s)switch(o){case r.UP:f.angle=0;break;case r.DOWN:f.angle=180;break;case r.LEFT:f.angle=90;break;case r.RIGHT:f.angle=-90}var m=void 0,y=[245,150,80,40],_=[10,8,5,3],A=0,v=0;do{m=!1,f.position=this.getBallInitPos(f.dir,f.width,f.height);for(var S=new cc.Vec2(f.x,f.y),b=0;b<this.content.children.length;++b)if(this.content.children[b].answerID!==f.answerID){var C=new cc.Vec2(this.content.children[b].x,this.content.children[b].y);if(l.default.getInstance().getVectorD(S,C)<y[A]){m=!0;break}}if((v+=1)===_[A]&&(v=0,(A+=1)>y.length-1&&(m=!1)),this._isHIdeEvent.isHide)return null}while(m);return f.parent=this.content,d.getComponent(sp.Skeleton).setAnimation(0,"moving",!0),f.on("touchend",function(){f.targetOff(f),h._clickCb&&h._clickCb(f,f.content).then(function(t){-1!==t&&(f.death=c.DEATH)}),d.getComponent(sp.Skeleton).setCompleteListener(function(t){"right"!==t.animation.name&&"wrong"!==t.animation.name||(d.getComponent(sp.Skeleton).setCompleteListener(null),f.death=c.DESTROY)})},f),f}return null},e.prototype.playRightTip=function(){this.content.children.forEach(function(t){if(cc.isValid(t,!0)&&t.content.isRight){var e=p.default.getIns().getNodeFromPool("M017_Particle");e.active=!1,e.parent=t,e.getComponent(cc.ParticleSystem).file=a.default.Instance.GetAsset("M017_PARTICLE",u.AssetType.Partical),e.getComponent(cc.ParticleSystem).playOnLoad=!0,e.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,e.active=!0}})},e.prototype.setSpeed=function(t){this._speed=Math.floor(t/60)},e.prototype.cleanAllChild=function(){if(cc.isValid(this.content)){for(var t=0;t<this.content.children.length;++t)this.content.children[t].death=c.DESTROY;this.destroyGameItem()}},s([d(cc.Prefab)],e.prototype,"gameItem",void 0),s([d(cc.Node)],e.prototype,"content",void 0),s([f,m("release/M017/M017_GameChild")],e)}(cc.Component);n.default=y,function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT"}(r=n.M017_E_GameDir||(n.M017_E_GameDir={})),function(t){t[t.DEATH=0]="DEATH",t[t.DESTROY=1]="DESTROY",t[t.LIVE=2]="LIVE"}(c||(c={})),cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../M001/release/units/Tool":"Tool","../units/M017_NodePool":"M017_NodePool"}],M017_Logic:[function(t,e,n){"use strict";cc._RF.push(e,"5091ePgc7FGd6kJfy2EPuVm","M017_Logic");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c,a=t("../Assets/AssetManager"),u=t("../Assets/Assets"),l=t("../AudioManager"),p=t("../M001/release/units/Timer"),h=t("../M001/release/units/Tool"),f=t("../M010/comp/M010_TimeCount"),d=t("./comp/M017_BackGround"),m=t("./comp/M017_GameChild"),g=function(t){function e(e){var n=t.call(this,e.GameController.GetGameConfigName()||"Json_m017_main")||this;return n._lastGameItemRes={},n._canBuild=!1,n._timeEnd=!1,n._curAnwserID=0,n._curQuesStruct={},n._cacheActionResult=[],n.selectCount={},n.seEffid=null,n.isRightEff=null,n.sevoiceid=null,n.selectRightCb=null,n.selectWrongCb=null,n.id=0,n._noctrl=!1,n.ctrlhintEffId=null,n.tipTimeId=-1,n._comp=e,n}return i(e,t),Object.defineProperty(e.prototype,"LogicController",{get:function(){return this._LogicController},set:function(t){this._LogicController=t,this.whileLogic(t)},enumerable:!1,configurable:!0}),e.prototype.whileLogic=function(){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:switch(this._LogicController){case c.NULL:return[3,1];case c.INIT:return[3,2];case c.PLOTANIM:return[3,3];case c.GUIDEANIM:return[3,4];case c.RADOMDATABASE:return[3,5];case c.CREATQUES:return[3,6];case c.SETUSERINTERFACE:return[3,7];case c.FAIL:return[3,8];case c.SUCCESS:return[3,9];case c.NEXTLEVEL:return[3,10];case c.ENDGAME:return[3,11];case c.PLAYQUESVOICE:return[3,12];case c.STARTGAME:return[3,13];case c.RESTARTTHISLEVEL:return[3,15]}return[3,16];case 1:return[3,16];case 2:return this.init(),[3,16];case 3:return this.runPlotAnim(),[3,16];case 4:return this.runGuideAnim(),[3,16];case 5:return this.radomDataBase(),[3,16];case 6:return this.creatQues(),[3,16];case 7:return this.setUserInterFace(),[3,16];case 8:return this.gameFailed(),[3,16];case 9:return this.gameSuccess(),[3,16];case 10:return this.LogicController=c.CREATQUES,[3,16];case 11:return this.endGame(),[3,16];case 12:return this.playQuesVoice(),[3,16];case 13:return[4,this._comp.CountStart.runCountDown(this.getOtherList().readyStartVoice)];case 14:return t.sent(),this._comp.CountDown.startSub(this._curQuesStruct.time.maxTime,this._curQuesStruct.time.tipTime),this.getBaseConfig().OutTimer.time&&(this._comp.OutTimer.startOutTimer(),this._comp.UpOutTimer.startOutTimer()),this._noctrl=!1,p.Timer.getIns().StartTimer(),this.startGameCb&&this.startGameCb(this._curQuesStruct.QuesID),this.startBuild(),[3,16];case 15:return this._dataBase.unshift(this._cacheList_Question),this._curAnwserID-=1,this.LogicController=c.CREATQUES,[3,16];case 16:return[2]}})})},e.prototype.playQuesVoice=function(){var t=this;this._comp.Content.setReadBack(this._curQuesStruct.tittle,function(){t.LogicController=c.STARTGAME})},e.prototype.playRightWrongVoiceAndEff=function(t,e,n){var o=this;void 0===n&&(n=null),this.sevoiceid&&(cc.audioEngine.stopEffect(this.sevoiceid),this.sevoiceid=null),this.seEffid&&(cc.audioEngine.stopEffect(this.seEffid),this.seEffid=null),this.isRightEff&&(cc.audioEngine.stopEffect(this.isRightEff),this.isRightEff=null);var i=!1,s=!1,r=!1;if(a.default.Instance.GetAsset(this.getBaseConfig().RightEff,u.AssetType.Sound)||a.default.Instance.GetAsset(this.getBaseConfig().WrongEff,u.AssetType.Sound)||(i=!0,s&&r&&i&&(null==n||n())),this.isRightEff=t?l.default.Play(a.default.Instance.GetAsset(this.getBaseConfig().RightEff,u.AssetType.Sound),!1,function(){i=!0,s&&r&&i&&(null==n||n())}):l.default.Play(a.default.Instance.GetAsset(this.getBaseConfig().WrongEff,u.AssetType.Sound),!1,function(){i=!0,s&&r&&i&&(null==n||n())}),this._curQuesStruct.voiceAndEffSame)a.default.Instance.GetAsset(e,u.AssetType.Sound)?(console.log("H2"),this.sevoiceid=l.default.Play(a.default.Instance.GetAsset(e,u.AssetType.Sound),!1,function(){(s=!0)&&r&&i&&(null==n||n())})):(s=!0)&&r&&i&&(null==n||n()),a.default.Instance.GetAsset(this.getOtherList().selectRightVoice[this._curQuesStruct.selectRightEff[h.default.getInstance().randomAccess(0,this._curQuesStruct.selectRightEff.length-1)]],u.AssetType.Sound)||a.default.Instance.GetAsset(this.getOtherList().selectWrongVoice[this._curQuesStruct.selectWrongEff[h.default.getInstance().randomAccess(0,this._curQuesStruct.selectWrongEff.length-1)]],u.AssetType.Sound)?this.seEffid=t?l.default.Play(a.default.Instance.GetAsset(this.getOtherList().selectRightVoice[this._curQuesStruct.selectRightEff[h.default.getInstance().randomAccess(0,this._curQuesStruct.selectRightEff.length-1)]],u.AssetType.Sound),!1,function(){r=!0,s&&r&&i&&(null==n||n())}):l.default.Play(a.default.Instance.GetAsset(this.getOtherList().selectWrongVoice[this._curQuesStruct.selectWrongEff[h.default.getInstance().randomAccess(0,this._curQuesStruct.selectWrongEff.length-1)]],u.AssetType.Sound),!1,function(){r=!0,s&&r&&i&&(null==n||n())}):(r=!0,s&&r&&i&&(null==n||n()));else{if(!a.default.Instance.GetAsset(e,u.AssetType.Sound))return void(this.seEffid=t?l.default.Play(a.default.Instance.GetAsset(this.getOtherList().selectRightVoice[this._curQuesStruct.selectRightEff[h.default.getInstance().randomAccess(0,this._curQuesStruct.selectRightEff.length-1)]],u.AssetType.Sound),!1,function(){null==n||n()}):l.default.Play(a.default.Instance.GetAsset(this.getOtherList().selectWrongVoice[this._curQuesStruct.selectWrongEff[h.default.getInstance().randomAccess(0,this._curQuesStruct.selectWrongEff.length-1)]],u.AssetType.Sound),!1,function(){null==n||n()}));this.sevoiceid=l.default.Play(a.default.Instance.GetAsset(e,u.AssetType.Sound),!1,function(){o.seEffid=t?l.default.Play(a.default.Instance.GetAsset(o.getOtherList().selectRightVoice[o._curQuesStruct.selectRightEff[h.default.getInstance().randomAccess(0,o._curQuesStruct.selectRightEff.length-1)]],u.AssetType.Sound),!1,function(){null==n||n()}):l.default.Play(a.default.Instance.GetAsset(o.getOtherList().selectWrongVoice[o._curQuesStruct.selectWrongEff[h.default.getInstance().randomAccess(0,o._curQuesStruct.selectWrongEff.length-1)]],u.AssetType.Sound),!1,function(){null==n||n()})})}},e.prototype.playRewardAnim=function(t,e){void 0===e&&(e=null),this._curQuesStruct.anwserRight.rewardAnimIsEnable?this._comp.GameController.Reward_Step(new cc.Vec2(t.x,t.y),1,this._curQuesStruct.anwserRight.rewardToScoreBoard,!1,function(){e&&e()}):e&&e()},e.prototype.clickBalloon=function(t,e){return s(this,void 0,void 0,function(){var n,o,i,s=this;return r(this,function(r){switch(r.label){case 0:return this._noctrl?[2,-1]:(n=this._cacheActionResult[this._curQuesStruct.QuesID].length,e.isRight?[3,1]:(this.selectWrongCb&&this.selectWrongCb(),t.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"wrong",!1),this.selectCount.wrongNum+=1,-1!==this.getBaseConfig().wrongTipNum&&this.getBaseConfig().wrongTipNum<=this.selectCount.wrongNum&&this._comp.GameChild.playRightTip(),this._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.wrongNum+=1,this._cacheActionResult[this._curQuesStruct.QuesID][n-1].score=this._cacheActionResult[this._curQuesStruct.QuesID][n-1].score-this.getOtherList().pointDeduction.clickWrong>=0?this._cacheActionResult[this._curQuesStruct.QuesID][n-1].score-this.getOtherList().pointDeduction.clickWrong:0,this.playRightWrongVoiceAndEff(!1,e.voice),[3,12]));case 1:return this.selectRightCb&&this.selectRightCb(),t.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"right",!1),this.playRewardAnim(t.position,function(){}),o=!1,i=!1,this.playRightWrongVoiceAndEff(!0,e.voice,function(){(o=!0)&&i&&s.checkResult()}),this._cacheActionResult[this._curQuesStruct.QuesID][n-1].select.rightNum+=1,this.selectCount.rightNum+=1,this.updateUserInterface(),0===this._curQuesStruct.time.maxTime?[3,9]:0===this._curQuesStruct.targetRightNum.min?[3,7]:this._curQuesStruct.targetRightNum.isMore?[3,5]:this.selectCount.rightNum!==this._curQuesStruct.targetRightNum.min?[3,4]:(this._noctrl=!0,this._comp.GameChild.cleanAllChild(),this.stopBuildGameItem(),this._curQuesStruct.targetRightNum.arrivedMinAnim?[4,this._comp.RewardAnim.playPublicSpineAnim(this.getOtherList().arrivedMinAnim,this.getOtherList().arrivedMinAnimVoice,"default",!1)]:[3,3]);case 2:r.sent(),r.label=3;case 3:i=!0,o&&i&&this.checkResult(),r.label=4;case 4:return[3,6];case 5:this.selectCount.rightNum===this._curQuesStruct.targetRightNum.min&&this._comp.RewardAnim.playPublicSpineAnim(this.getOtherList().arrivedMinAnim,this.getOtherList().arrivedMinAnimVoice,"default",!1),r.label=6;case 6:return[3,8];case 7:this._noctrl=!0,this.stopBuildGameItem(),i=!0,o&&i&&this.checkResult(),r.label=8;case 8:return[3,12];case 9:return 0===this._curQuesStruct.targetRightNum.min?[3,12]:this.selectCount.rightNum!==this._curQuesStruct.targetRightNum.min?[3,12]:(this._noctrl=!0,this.stopBuildGameItem(),this._curQuesStruct.targetRightNum.arrivedMinAnim?[4,this._comp.RewardAnim.playPublicSpineAnim(this.getOtherList().arrivedMinAnim,this.getOtherList().arrivedMinAnimVoice,"default",!1)]:[3,11]);case 10:r.sent(),r.label=11;case 11:i=!0,o&&i&&this.checkResult(),r.label=12;case 12:return[2]}})})},e.prototype.PlayBgm=function(){var t=this;setTimeout(function(){l.default.PlayBGM(a.default.Instance.GetAsset(t.getOtherList().bgm,u.AssetType.Sound)),console.log("playBgm",t.getOtherList().bgm,a.default.Instance.GetAsset(t.getOtherList().bgm,u.AssetType.Sound))},100)},e.prototype.init=function(){this.PlayBgm(),this._curAnwserID=0;var t;t=this.getBaseConfig().BgSetting?this.getBaseConfig().BgSetting:{centerRes:this.getOtherList().bgImage,leftRes:"M017_BGIMG_L",rightRes:"M017_BGIMG_R",spineRes:this.getOtherList().bgAnim,idle:this.getBaseConfig().Anim_bg.idle,run:this.getBaseConfig().Anim_bg.Run},this._comp.BackGround.setBgRes(t),this._comp.BackGround.bgType!==d.M017_BGTYPE.BOTHOF&&this._comp.BackGround.bgType!==d.M017_BGTYPE.SPINE||this._comp.BackGround.playBgAnim(t.run,t.idle),this._comp.CountStart.setSpData(this.getOtherList().countTimeSpine),this._comp.Content.setReadPlayAnim(this.getOtherList().AnimReplay),this._comp.Content.setQuesNumBg(this.getOtherList().numberBg),this._comp.Content.setTargetNumBg(this.getOtherList().targetBg),this._dataBase=this.getBaseConfig().DataBase,this._comp.GameChild.setGameItemClickCb(this.clickBalloon.bind(this)),this._comp.GameChild.setHideCb(this.hideEvevnt.bind(this)),this._comp.GameChild.setShowCb(this.showEvent.bind(this)),this._comp.GameChild.setLabelColor(this.getOtherList().InitLabelColor),this._comp.CountDown.timerActionCb=this.timeAction.bind(this),this._comp.Content.setTitle(!1,"",this.getOtherList().InitLabelColor),this._comp.Content.setTitleFrame(this.getOtherList().contentBg,this.getOtherList().contentBgLeft,this.getOtherList().contentBgRight),this._comp.Content.updateQuesNum(0,0),this._comp.Content.updateTargetNum(0,0),this._comp.CountDown.hide(),this._comp.OutTimer.outTime=this._comp.UpOutTimer.outTime=this.getBaseConfig().OutTimer.time,this._comp.OutTimer.clickActionCb=this.timerClickAction.bind(this),this._comp.UpOutTimer.clickActionCb=this.timerClickAction.bind(this),this._comp.OutTimer.outTimerFunction=this.outTimerCb.bind(this),this._comp.UpOutTimer.outTimerFunction=this.outTimerCb.bind(this),this.LogicController=c.PLOTANIM},e.prototype.timerClickAction=function(){this._curQuesStruct.tittle.clickStop&&this._comp.Content.stopReadBack(),this.ctrlhintEffId&&(cc.audioEngine.stopEffect(this.ctrlhintEffId),this.ctrlhintEffId=null)},e.prototype.runPlotAnim=function(){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this.getBaseConfig().Anim_plot.isEnable?[4,this._comp.RewardAnim.playStoryAnim(this.getOtherList().Spine_AnimPlot,this.getBaseConfig().Anim_plot.voiceSrc?this.getOtherList().plotAnimVoice:"",this.getBaseConfig().Anim_plot.clickStop,this.getBaseConfig().Anim_plot.finishedAutoToGuide,this.getBaseConfig().Anim_plot.bgOpacity)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.LogicController=c.GUIDEANIM,[2]}})})},e.prototype.runGuideAnim=function(){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this.creatQues(!0),this._comp.Content.updateQuesNum(this._curAnwserID,this.getBaseConfig().DataBase.length),this._comp.Content.setTitle(this._curQuesStruct.tittle.isImage,this._curQuesStruct.tittle.src,this._curQuesStruct.tittle.color),this._comp.Content.updateTargetNum(0,this._curQuesStruct.targetRightNum.min),this.getBaseConfig().Anim_Guide.isEnable?[4,this._comp.RewardAnim.runGuideAnim(this.getOtherList().guideAnim,this.getBaseConfig().Anim_Guide.voiceSrc?this.getOtherList().guideAnimVoice:"",this.getBaseConfig().Anim_Guide.clickStop,this.getOtherList().guideAnimImage,this.getOtherList().InitLabelColor,this.getBaseConfig().Anim_Guide.bgOpacity)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.LogicController=c.RADOMDATABASE,[2]}})})},e.prototype.radomDataBase=function(){var t=this;this._cacheActionResult=[];var e=[],n=this.getBaseConfig().RadomDataBase;if(n.isEnable&&this._dataBase.length>1){var o=[],i=0;for(n.fixedFirst?(e.push(this._dataBase[0]),i=1):i=0;i<this._dataBase.length;++i)o.push(i);for(var s=e.length;s<this._dataBase.length;++s){var r=h.default.getInstance().randomAccess(0,o.length-1);e.push(this._dataBase[o[r]]),o.splice(r,1)}}else e=this._dataBase;e.forEach(function(e,n){e.QuesID=n,t._cacheActionResult[n]=[]}),this._dataBase=e,this.LogicController=c.CREATQUES},e.prototype.creatQues=function(t){var e;void 0===t&&(t=!1),0!==this._dataBase.length?(t?e=this._dataBase[0]:(this._canBuild=!0,this._curAnwserID+=1,e=this._dataBase.shift()),this._cacheList_Question=e,!t&&this._cacheActionResult[e.QuesID].push({select:{rightNum:0,wrongNum:0},id:e.QuesID,score:100,time:0}),this._curQuesStruct.tittle={clickStop:e.titleVoice.clickStop,color:e.title.color?e.title.color:{r:0,g:0,b:0},isImage:e.title.isImage,src:e.title.content,voiceSrc:e.titleVoice.src,isPlayOnLoad:e.titleVoice.playOnLoad},this._curQuesStruct.targetRightNum=e.targetRightNum,this._curQuesStruct.time=e.levelTime,this._curQuesStruct.ScreenShoot=void 0===e.ScreenShoot||e.ScreenShoot,this._curQuesStruct.gameItem=e.gameItem,this._curQuesStruct.gameItemRes=e.gameItemRes,this._curQuesStruct.QuesID=e.QuesID,this._curQuesStruct.levelPass=e.levelPass,this._curQuesStruct.levelFail=e.levelFailed,this._curQuesStruct.voiceAndEffSame=e.voiceAndEffPlaySame,this._curQuesStruct.anwserRight=e.anwserRight,this._curQuesStruct.thisLevelRewardAnim=e.thisLevelRewardAnim,this._curQuesStruct.selectRightEff=e.selectRightEff,this._curQuesStruct.selectWrongEff=e.selectWrongEff,t||(this.LogicController=c.SETUSERINTERFACE)):this.LogicController=c.ENDGAME},e.prototype.setUserInterFace=function(){cc.audioEngine.stopAllEffects(),this._comp.RewardAnim.resetAllAnim(),this._comp.Content.stopReadBack(),this._comp.GameChild.cleanAllChild(),this.id=0,this.selectCount={rightNum:0,wrongNum:0},this._comp.Content.updateQuesNum(this._curAnwserID,this.getBaseConfig().DataBase.length),this._comp.Content.setTitle(this._curQuesStruct.tittle.isImage,this._curQuesStruct.tittle.src,this._curQuesStruct.tittle.color),this._comp.Content.updateTargetNum(0,this._curQuesStruct.targetRightNum.min),0!==this._curQuesStruct.time.maxTime?(this._comp.CountDown.setTimeSpine(this.getOtherList().countDownSpine),this._comp.CountDown.setTipTimeSpine(this._curQuesStruct.time.tipTime?this.getOtherList().timeTipSpine:null),this._comp.CountDown.show()):this._comp.CountDown.hide(),this.LogicController=c.PLAYQUESVOICE},e.prototype.updateUserInterface=function(){this._comp.Content.updateTargetNum(this.selectCount.rightNum,this._curQuesStruct.targetRightNum.min)},e.prototype.startBuild=function(){var t=this;console.log(this._curQuesStruct.gameItem.BuildTimeMin,this._curQuesStruct.gameItem.BuildTimeMax),this._buildTimerID=setTimeout(function(){var e=t.getBalloonSp();e&&(t._comp.GameChild.createBalloon(t.getOtherList().gameItemSpine,t.id++,e,t.getDir(t._curQuesStruct.gameItem.dir),h.default.getInstance().randomAccess(t._curQuesStruct.gameItem.MoveSpeedMin,t._curQuesStruct.gameItem.MoveSpeedMax),t._curQuesStruct.gameItem.RotateToDir),t._canBuild?(t._buildTimerID=null,t.startBuild()):t.stopBuildGameItem())},h.default.getInstance().randomAccess(1e3*this._curQuesStruct.gameItem.BuildTimeMin,1e3*this._curQuesStruct.gameItem.BuildTimeMax))},e.prototype.timeAction=function(t){switch(t){case f.E_TimerCountCode.TIP:cc.log("\u63d0\u793a\u65f6\u95f4"),this._curQuesStruct.time.tipTimeChangeBgm&&l.default.PlayBGM(a.default.Instance.GetAsset(this.getOtherList().tipTimBgm,u.AssetType.Sound)),this._curQuesStruct.time.tipTimePlayEff&&(this.tipTimeId=l.default.Play(a.default.Instance.GetAsset(this.getOtherList().tipTimeEff,u.AssetType.Sound),!0));break;case f.E_TimerCountCode.FINISH:cc.log("\u65f6\u95f4\u5230"),this.stopBuildGameItem(),this._comp.OutTimer.cleanTimer(),this._comp.UpOutTimer.cleanTimer(),this._curQuesStruct.time.tipTimeChangeBgm&&l.default.PlayBGM(a.default.Instance.GetAsset(this.getOtherList().bgm,u.AssetType.Sound)),this._timeEnd=!0,this._comp.CountDown.pauseTimer(),this.checkResult()}},e.prototype.checkResult=function(){this._curQuesStruct.ScreenShoot&&this._comp.GameController.ScreenShoot(!0,!1),cc.audioEngine.stopEffect(this.tipTimeId),p.Timer.getIns().getTimeSharingMilliSecond();var t=this._cacheActionResult[this._curQuesStruct.QuesID].length;this._cacheActionResult[this._curQuesStruct.QuesID][t-1].time=p.Timer.getIns().getCountTime(),0!==this._curQuesStruct.targetRightNum.min&&(this.selectCount.rightNum>this._curQuesStruct.targetRightNum.min?this._cacheActionResult[this._curQuesStruct.QuesID][t-1].score+=(this.selectCount.rightNum-this._curQuesStruct.targetRightNum.min)*this.getOtherList().pointDeduction.successAdd:this.selectCount.rightNum<this._curQuesStruct.targetRightNum.min&&(this._cacheActionResult[this._curQuesStruct.QuesID][t-1].score=this._cacheActionResult[this._curQuesStruct.QuesID][t-1].score-(this._curQuesStruct.targetRightNum.min-this.selectCount.rightNum)*this.getOtherList().pointDeduction.failSub>=0?this._cacheActionResult[this._curQuesStruct.QuesID][t-1].score-(this._curQuesStruct.targetRightNum.min-this.selectCount.rightNum)*this.getOtherList().pointDeduction.failSub:0)),0!==this._curQuesStruct.time.maxTime?0!==this._curQuesStruct.targetRightNum.min&&this.selectCount.rightNum>=this._curQuesStruct.targetRightNum.min?this.LogicController=c.SUCCESS:this.LogicController=c.FAIL:0!==this._curQuesStruct.targetRightNum.min&&(this.LogicController=c.SUCCESS)},e.prototype.gameFailed=function(){return s(this,void 0,void 0,function(){var t=this;return r(this,function(){return this._comp.CountDown.pauseTimer(),0!==this._curQuesStruct.time.maxTime&&0===this._curQuesStruct.targetRightNum.min?(this._comp.RewardAnim.playLvPassAndFaild(this._curQuesStruct.levelFail.animSrc,this._curQuesStruct.levelFail.animVoice,"default",this._curQuesStruct.levelFail.isClickStop,!1,cc.v2(0,0),127).then(function(){t.LogicController=c.NEXTLEVEL}),[2]):(this._comp.RewardAnim.playLvPassAndFaild(this._curQuesStruct.levelFail.animSrc,this._curQuesStruct.levelFail.animVoice,"default",this._curQuesStruct.levelFail.isClickStop,!1,cc.v2(0,0),127).then(function(){t._curQuesStruct.targetRightNum.failToEndGame?t.LogicController=c.ENDGAME:t._curQuesStruct.targetRightNum.failRestartThisLevel?t.LogicController=c.RESTARTTHISLEVEL:t.LogicController=c.NEXTLEVEL}),[2])})})},e.prototype.gameSuccess=function(){return s(this,void 0,void 0,function(){var t=this;return r(this,function(){return this._comp.CountDown.pauseTimer(),this._curAnwserID!==this.getBaseConfig().DataBase.length||this.getBaseConfig().endQuesPlayPassAnim?(this._comp.RewardAnim.playLvPassAndFaild(this._curQuesStruct.levelPass.animSrc,this._curQuesStruct.levelPass.animVoice,"default",this._curQuesStruct.levelPass.isClickStop,void 0!==this._curQuesStruct.levelPass.isStay&&this._curQuesStruct.levelPass.isStay,cc.v2(0,0),127).then(function(){t.playThisLevelRewardAnim(function(){t.LogicController=c.NEXTLEVEL})}),[2]):(this.playThisLevelRewardAnim(function(){t.LogicController=c.NEXTLEVEL}),[2])})})},e.prototype.playThisLevelRewardAnim=function(t){this._curQuesStruct.thisLevelRewardAnim.isEnable?this._comp.GameController.Reward_LvEnd(1,this._curQuesStruct.thisLevelRewardAnim.toScoreBoard,this._curQuesStruct.thisLevelRewardAnim.isClickStop,function(){t&&t()},this._curQuesStruct.thisLevelRewardAnim.autoToNextStep):t&&t()},e.prototype.endGame=function(){return s(this,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return this._curAnwserID,this._comp.OutTimer.cleanTimer(),this._comp.UpOutTimer.cleanTimer(),this._comp.GameChild.cleanAllChild(),this._comp.CountDown.cleanTimer(),this.finishLevelCb&&this.finishLevelCb(this.getCurCountQues(),this.getScore()),this.getBaseConfig().Anim_Sumup?[4,this._comp.RewardAnim.playReviewAnim(this.getOtherList().AnimSumup,this.getOtherList().AnimSumupVoice,"default",!1,cc.v2(0,0),127)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.getBaseConfig().Anim_LevelPass.isEnable?this._comp.GameController.Reward_GameEnd(1,this.getBaseConfig().Anim_LevelPass.toScoreBoard,function(){t._comp.GameController.ComplateGame()},!1):this._comp.GameController.ComplateGame(),[2]}})})},e.prototype.outTimerCb=function(){var t=this;this.ctrlhintEffId=l.default.Play(a.default.Instance.GetAsset(this.getOtherList().controlHint,u.AssetType.Sound),!1,function(){t.ctrlhintEffId=null}),this._comp.OutTimer.cleanTimer(),this._comp.UpOutTimer.cleanTimer(),this.getBaseConfig().OutTimer.time&&(this._comp.OutTimer.startOutTimer(),this._comp.UpOutTimer.startOutTimer()),this.getBaseConfig().OutTimer.tipRightAnwser&&this._comp.GameChild.playRightTip()},e.prototype.getDir=function(t){var e=m.M017_E_GameDir.UP,n=[];switch(t){case 0:e=m.M017_E_GameDir.UP;break;case 1:e=m.M017_E_GameDir.DOWN;break;case 3:e=m.M017_E_GameDir.LEFT;break;case 4:e=m.M017_E_GameDir.RIGHT;break;case 2:e=null!==this._lastGameItemRes.lastDir&&m.M017_E_GameDir.UP===this._lastGameItemRes.lastDir?m.M017_E_GameDir.DOWN:m.M017_E_GameDir.UP;break;case 5:e=null!==this._lastGameItemRes.lastDir&&m.M017_E_GameDir.LEFT===this._lastGameItemRes.lastDir?m.M017_E_GameDir.RIGHT:m.M017_E_GameDir.LEFT;break;case 6:if(n=[m.M017_E_GameDir.UP,m.M017_E_GameDir.LEFT,m.M017_E_GameDir.RIGHT,m.M017_E_GameDir.DOWN],null!==this._lastGameItemRes.lastDir)do{e=n[h.default.getInstance().randomAccess(0,n.length-1)]}while(e===this._lastGameItemRes.lastDir);else e=m.M017_E_GameDir.UP}return this._lastGameItemRes.lastDir=e,e},e.prototype.getBalloonSp=function(){if(0===this._curQuesStruct.gameItemRes.length)return null;var t;if(this._curQuesStruct.gameItemRes.length>1)do{t=h.default.getInstance().randomAccess(0,this._curQuesStruct.gameItemRes.length-1)}while(t===this._lastGameItemRes.lastGameItemID);else t=0;return this._lastGameItemRes.lastGameItemID=t,this._curQuesStruct.gameItemRes[t]},e.prototype.hideEvevnt=function(){this._comp.OutTimer.cleanTimer(),this._comp.UpOutTimer.cleanTimer(),p.Timer.getIns().pauseTimer(),this.stopBuildGameItem()},e.prototype.showEvent=function(){cc.log("\u7ee7\u7eed\u6784\u952e"),p.Timer.getIns().resumeTimer(),this._timeEnd||this.LogicController!==c.STARTGAME||(this.getBaseConfig().OutTimer.time&&(this._comp.OutTimer.startOutTimer(),this._comp.UpOutTimer.startOutTimer()),this._canBuild=!0,this.startBuild())},e.prototype.stopBuildGameItem=function(){this._canBuild=!1,null!==this._buildTimerID&&(clearTimeout(this._buildTimerID),this._buildTimerID=null)},e.prototype.getCurCountQues=function(){var t=0;return this._cacheActionResult.forEach(function(e){e.forEach(function(){t+=1})}),t},e.prototype.getScore=function(){var t=0,e=0;return this._cacheActionResult.forEach(function(n){n.forEach(function(n){t+=1,e+=n.score})}),t>0?h.default.toDecimal2(e/t):"0.00"},e.prototype.startLogic=function(){this.LogicController=c.INIT},e.prototype.stopLogic=function(){this.stopBuildGameItem(),p.Timer.getIns().cleanTimer(),this._comp.GameChild.cleanAllChild(),this._comp.CountDown.cleanTimer(),cc.audioEngine.stopAllEffects()},e}(t("./units/M017_ConfigT").default);n.default=g,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.PLOTANIM=2]="PLOTANIM",t[t.GUIDEANIM=3]="GUIDEANIM",t[t.RADOMDATABASE=4]="RADOMDATABASE",t[t.CREATQUES=5]="CREATQUES",t[t.SETUSERINTERFACE=6]="SETUSERINTERFACE",t[t.PLAYQUESVOICE=7]="PLAYQUESVOICE",t[t.STARTGAME=8]="STARTGAME",t[t.SUCCESS=9]="SUCCESS",t[t.FAIL=10]="FAIL",t[t.RESTARTTHISLEVEL=11]="RESTARTTHISLEVEL",t[t.NEXTLEVEL=12]="NEXTLEVEL",t[t.ENDGAME=13]="ENDGAME"}(c||(c={})),cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../AudioManager":"AudioManager","../M001/release/units/Timer":"Timer","../M001/release/units/Tool":"Tool","../M010/comp/M010_TimeCount":"M010_TimeCount","./comp/M017_BackGround":"M017_BackGround","./comp/M017_GameChild":"M017_GameChild","./units/M017_ConfigT":"M017_ConfigT"}],M017_Main:[function(t,e,n){"use strict";cc._RF.push(e,"780c6Z9pWpE2qPW6csbzVvW","M017_Main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Assets/AssetManager"),c=t("../Assets/Assets"),a=t("../AudioManager"),u=t("../M001/release/comp/Quit"),l=t("../M010/comp/M010_TimeCount"),p=t("../VideoPlayer/GameController"),h=t("./comp/M017_BackGround"),f=t("./comp/M017_Content"),d=t("./comp/M017_CountStart"),m=t("./comp/M017_GameChild"),g=t("./comp/M017_RewardAnim"),y=t("./M017_Logic"),_=t("./units/M017_OutTime"),A=cc._decorator,v=A.ccclass,S=(A.property,A.menu),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._gameFps=null,e.Logic=null,e.Quit=null,e}return i(e,t),e.prototype.start=function(){var t=this;this._gameFps=cc.game.getFrameRate(),this.node.getChildByName("btn_quit").getComponent(cc.Sprite).spriteFrame=r.default.Instance.GetAsset("M017_BTN_QUIT",c.AssetType.Image),this.Logic=new y.default({BackGround:cc.find("bg",this.node).getComponent(h.M017_BackGround),GameChild:cc.find("layer_game",this.node).getComponent(m.default),OutTimer:cc.find("layer_game/touch",this.node).getComponent(_.default),UpOutTimer:cc.find("layout_content/bg_topbar",this.node).getComponent(_.default),RewardAnim:cc.find("layer_rewardAndAnim",this.node).getComponent(g.default),CountDown:cc.find("layout_content/timecount",this.node).getComponent(l.default),GameController:this.node.getComponent(p.default),CountStart:cc.find("count",this.node).getComponent(d.default),Quit:this.node.getChildByName("popup_quit").getComponent(u.Quit),Content:cc.find("layout_content",this.node).getComponent(f.default)}),console.log(cc.find("layer_rewardAndAnim",this.node).getComponent(g.default)),this.Logic.selectRightCb=function(){t.node.getComponent(p.default).OnAnswer(!0,!1)},this.Logic.selectWrongCb=function(){t.node.getComponent(p.default).OnAnswer(!1,!1)},cc.game.setFrameRate(60),this.Logic.startLogic(),this.node.getChildByName("btn_quit").on("touchstart",function(){cc.tween(t.node.getChildByName("btn_quit")).to(.1,{scale:.8}).delay(.1).to(.1,{scale:1}).start()}),this.node.getChildByName("btn_quit").on("touchend",function(){a.default.Play(r.default.Instance.GetAsset("M017_BTN_PRESS",c.AssetType.Sound)),t.node.getComponent(p.default).ShowEixtAlert(function(){t.quitResult(!0)})})},e.prototype.quitResult=function(t){t&&(this.Logic.stopLogic(),this.node.getComponent(p.default).EixtGame())},e.prototype.onDestroy=function(){this.Logic.stopBuildGameItem(),cc.game.setFrameRate(this._gameFps)},s([v,S("\u6e38\u620f\u5165\u53e3/M017/Main")],e)}(cc.Component);n.default=b,cc._RF.pop()},{"../Assets/AssetManager":"AssetManager","../Assets/Assets":"Assets","../AudioManager":"AudioManager","../M001/release/comp/Quit":"Quit","../M010/comp/M010_TimeCount":"M010_TimeCount","../VideoPlayer/GameController":"GameController","./M017_Logic":"M017_Logic","./comp/M017_BackGround":"M017_BackGround","./comp/M017_Content":"M017_Content","./comp/M017_CountStart":"M017_CountStart","./comp/M017_GameChild":"M017_GameChild","./comp/M017_RewardAnim":"M017_RewardAnim","./units/M017_OutTime":"M017_OutTime"}],M017_NodePool:[function(t,e,n){"use strict";cc._RF.push(e,"39d8eA0+0tEKb9AhVuFKwoI","M017_NodePool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.nodePool=[]}return t.getIns=function(){return t.m_instance?t.m_instance:(t.m_instance=new t,t.m_instance)},t.prototype.cleanPool=function(t){if(void 0===t&&(t=null),this.nodePool)if(t){if(this.nodePool[t])return this.nodePool[t].prefab=null,this.nodePool[t].pool.clear(),void delete this.nodePool[t]}else{for(var e in this.nodePool)this.nodePool[e].pool.clear();this.nodePool=[]}},t.prototype.createrNodePool=function(t,e,n){if(t&&e&&n&&(!this.nodePool||!this.nodePool[t])){this.nodePool||(this.nodePool=[]);var o={prefab:e,pool:new cc.NodePool};this.nodePool[t]=o;for(var i=0;i<n;++i){var s=cc.instantiate(e);this.nodePool[t].pool.put(s)}}},t.prototype.getNodeFromPool=function(t){return this.nodePool[t]?this.nodePool[t].pool.size()>0?this.nodePool[t].pool.get():cc.instantiate(this.nodePool[t].prefab):null},t.prototype.destroyNode=function(t,e){this.nodePool[t]?this.nodePool[t].pool.put(e):e.destroy()},t.prototype.onDestroy=function(){this.cleanPool()},t}();n.default=o,cc._RF.pop()},{}],M017_OutTime:[function(t,e,n){"use strict";cc._RF.push(e,"51d4dyHqHJN/L5+dCFjEBTs","M017_OutTime");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,r.menu),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,Object.defineProperty(e.prototype,"outTime",{set:function(t){this._outTime=1e3*t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outTimerFunction",{set:function(t){this._outTimerFunction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickActionCb",{set:function(t){this._clickActionCb=t},enumerable:!1,configurable:!0}),e.prototype.startOutTimer=function(){var t=this;this.cleanTimer(),n._timerID=setTimeout(function(){n._timerID=null,t._outTimerFunction&&t._outTimerFunction()},this._outTime)},e.prototype.onDestroy=function(){this.cleanTimer()},e.prototype.onLoad=function(){var t=this;this.node.on("touchend",function(){t._clickActionCb&&t._clickActionCb(),t.startOutTimer()},this)},e.prototype.cleanTimer=function(){n._timerID&&(clearTimeout(n._timerID),n._timerID=null)},n=s([c,a("release/M017/units/M017_OutTime")],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],M017_RewardAnim:[function(t,e,n){"use strict";cc._RF.push(e,"f2d39VAKUtNOolcXAw580EN","M017_RewardAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Assets/AssetManager"),u=t("../../Assets/Assets"),l=t("../../AudioManager"),p=t("../../M010/common/units/M_Audio"),h=t("../units/M017_NodePool"),f=cc._decorator,d=f.ccclass,m=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSprite=null,e.bg=null,e.poltAndGuide=null,e.lvPass=null,e.reView=null,e.publicAnim=null,e.specialEffectTimer=[],e.specialID=0,e}return i(e,t),e.prototype.onLoad=function(){this.rootNode=this.node},Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},set:function(t){var e=this;if(this._rootNode=t,this._rootNode.active=!0,this._rootNode){this._rootNode.removeAllChildren(),this.bg=new cc.Node("bg"),this._rootNode.addChild(this.bg,0),this.bg.color=cc.color(0,0,0),this.bg.addComponent(cc.Sprite);var n=this.bg.addComponent(cc.Widget);n&&(n.isAlignLeft=n.isAlignBottom=n.isAlignRight=n.isAlignTop=!0,n.left=n.bottom=n.top=n.right=0),this.bg.getComponent(cc.Sprite).spriteFrame=this.bgSprite;var o=0,i=function(t){var n=new cc.Node(t);return e._rootNode.addChild(n,++o),n.addComponent(sp.Skeleton),n};this.poltAndGuide=i("poltAndGuide"),this.lvPass=i("lvpass"),this.reView=i("reView"),this.publicAnim=i("publicAnim")}this._rootNode.active=!1},enumerable:!1,configurable:!0}),e.prototype.resetAllAnim=function(){this.rootNode.targetOff(this),this.cleanEffects(),this.setOpacity(1),this.reView.getComponent(sp.Skeleton).skeletonData=null,this.lvPass.getComponent(sp.Skeleton).skeletonData=null,this.poltAndGuide.getComponent(sp.Skeleton).skeletonData=null,this.publicAnim.getComponent(sp.Skeleton).skeletonData=null,this.reView.active=this.lvPass.active=this.poltAndGuide.active=this.publicAnim.active=!1},e.prototype.playOnceAnim=function(t,e,n,o,i,s,r,c){var l=this;return void 0===s&&(s=!1),void 0===r&&(r=cc.v2(0,0)),void 0===c&&(c=127),new Promise(function(r){l.cleanEffects(),l.setOpacity(c),l.bg.active=!0,l.rootNode.active=!0,t.active=!0;var h=0,f=null,d=function(e){void 0===e&&(e=!1),(2==++h||e)&&(l.rootNode.off(cc.Node.EventType.TOUCH_END,m,l),s?(f.animationStart=f.animation.duration,f.animationEnd=f.animation.duration):(t.getComponent(sp.Skeleton).skeletonData=null,l.bg.active=!1,t.active=!1),r())},m=function(){l.rootNode.off(cc.Node.EventType.TOUCH_END,m,l),h=-1,cc.audioEngine.stop(g),y.setCompleteListener(null),d(!0)},g=-1;a.default.Instance.GetAsset(n,u.AssetType.Sound)?g=p.default.playEff(a.default.Instance.GetAsset(n,u.AssetType.Sound),!1,function(){d()}):d();var y=t.getComponent(sp.Skeleton);a.default.Instance.GetAsset(e,u.AssetType.Spine)?(y.node.active=!0,y.skeletonData=a.default.Instance.GetAsset(e,u.AssetType.Spine),f=y.setAnimation(0,o,!1),y.setCompleteListener(function(){d()})):d(),i&&l.rootNode.on(cc.Node.EventType.TOUCH_END,m,l)})},e.prototype.setOpacity=function(t){this.bg.opacity=t},e.prototype.playStoryAnim=function(t,e,n,o,i){return r(this,void 0,Promise,function(){var o=this;return c(this,function(){return[2,new Promise(function(s){o.playOnceAnim(o.poltAndGuide,t,e,"default",n,!1,cc.v2(0,0),i).then(function(){s()})})]})})},e.prototype.runGuideAnim=function(t,e,n,o,i,s){return r(this,void 0,Promise,function(){var r=this;return c(this,function(){return[2,new Promise(function(c){r.setOpacity(s);var p=null,f=!1,d=!1;if(a.default.Instance.GetAsset(e,u.AssetType.Sound)||t){0!==e.length&&a.default.Instance.GetAsset(e,u.AssetType.Sound)?p=l.default.Play(a.default.Instance.GetAsset(e,u.AssetType.Sound),!1,function(){(d=!0)&&f&&c(!0)}):(d=!0)&&f&&c(!0),r.rootNode.active=!0;var m=h.default.getIns().getNodeFromPool("M017_GameItem"),g=m.getChildByName("spine");g.active=!0,m.position=new cc.Vec3(0,0,0),o.isImage?(m.getChildByName("label").active=!1,m.getChildByName("image").active=!0,m.getChildByName("image").getComponent(cc.Sprite).spriteFrame=a.default.Instance.GetAsset(o.res,u.AssetType.Image)):(m.getChildByName("label").active=!0,m.getChildByName("image").active=!1,m.getChildByName("label").color=new cc.Color(i.r,i.g,i.b),m.getChildByName("label").getComponent(cc.Label).string=o.res),g.getComponent(sp.Skeleton).skeletonData=a.default.Instance.GetAsset("M017_GAMEITEMSPINE",u.AssetType.Spine),r.rootNode.insertChild(m,0),g.getComponent(sp.Skeleton).setAnimation(0,"moving",!0),r.poltAndGuide.position=new cc.Vec3(0,0,0),r.poltAndGuide.getComponent(sp.Skeleton).skeletonData=a.default.Instance.GetAsset(t,u.AssetType.Spine),r.poltAndGuide.getComponent(sp.Skeleton).setAnimation(0,"step01",!1),r.poltAndGuide.getComponent(sp.Skeleton).setCompleteListener(function(){r.poltAndGuide.getComponent(sp.Skeleton).setCompleteListener(null),n||r.rootNode.on("touchend",function(){cc.audioEngine.stopEffect(p),d=!0,r.rootNode.targetOff(r),g.getComponent(sp.Skeleton).setAnimation(0,"right",!1),g.getComponent(sp.Skeleton).setCompleteListener(function(t){"right"!==t.animation.name&&"wrong"!==t.animation.name||(r.node.active=!1,g.getComponent(sp.Skeleton).setCompleteListener(null),m.destroy(),f=!0,d&&f&&c(!0))})},r)}),n&&r.rootNode.on("touchend",function(){cc.audioEngine.stopEffect(p),d=!0,r.rootNode.targetOff(r),g.getComponent(sp.Skeleton).setAnimation(0,"right",!1),g.getComponent(sp.Skeleton).setCompleteListener(function(t){"right"!==t.animation.name&&"wrong"!==t.animation.name||(r.rootNode.active=!1,g.getComponent(sp.Skeleton).setCompleteListener(null),m.destroy(),f=!0,d&&f&&c(!0))})},r)}else c(!0)})]})})},e.prototype.playPublicSpineAnim=function(t,e,n,o,i,s){var r=this;return void 0===i&&(i=cc.v2(0,0)),void 0===s&&(s=127),new Promise(function(i){r.playOnceAnim(r.publicAnim,t,e,n,o,!1,cc.v2(0,0),s).then(function(){i()})})},e.prototype.playLvPassAndFaild=function(t,e,n,o,i,s,r){var c=this;return void 0===i&&(i=!1),void 0===s&&(s=cc.v2(0,0)),void 0===r&&(r=127),console.log(t,e,n,o,i,s,r),new Promise(function(a){c.playOnceAnim(c.lvPass,t,e,n,o,i,s,r).then(function(){a()})})},e.prototype.playReviewAnim=function(t,e,n,o,i,s){var r=this;return void 0===i&&(i=cc.v2(0,0)),void 0===s&&(s=127),new Promise(function(c){r.playOnceAnim(r.reView,t,e,n,o,!1,i,s).then(function(){c()})})},e.prototype.cleanEffects=function(){this._rootNode.children.forEach(function(t){"particle"===t.name&&t.destroy()}),this._rootNode.active=!1,this.CleanSpecialEffectTimer()},e.prototype.CleanSpecialEffectTimer=function(){this.specialEffectTimer.forEach(function(t,e,n){clearTimeout(null==t?void 0:t.timer),cc.audioEngine.stopEffect(null==t?void 0:t.voice),n[e]=null}),this.specialID=0},e.prototype.playSpecialEffects=function(t,e,n,o,i,s,l){var h=this;return void 0===s&&(s=null),void 0===l&&(l=cc.v2(0,0)),this.setOpacity(1),new Promise(function(f){return r(h,void 0,void 0,function(){var r,h,d,m,g,y,_,A=this;return c(this,function(c){switch(c.label){case 0:return t?(r=!1,h=-1,0!=e.length||0!=n.length||a.default.Instance.GetAsset(n,u.AssetType.Sound)?(d=this.specialID++,this.specialEffectTimer[d]={timer:0,voice:-1},(m=new cc.Node("particle")).parent=this.rootNode,m.zIndex=cc.macro.MAX_ZINDEX,m.addComponent(cc.ParticleSystem),g=m.getComponent(cc.ParticleSystem),y=function(){if(r&&-1==h)return A.rootNode.targetOff(A),A.rootNode.active=!1,g.file=null,clearTimeout(A.specialEffectTimer[d].timer),m.isValid&&m.destroy(),null==s||s(),void f()},0==e.length&&0!==n.length?r=!0:0!==e.length&&0==n.length&&(h=-1),this.specialEffectTimer[d].voice=h=p.default.playEff(a.default.Instance.GetAsset(n,u.AssetType.Sound),!1,function(){h=-1,y()}),_=a.default.Instance.GetAsset(e,u.AssetType.Partical),0!=e.length&&_?(g.file=_,g.playOnLoad=!0,this.rootNode.active=!0,g.resetSystem(),m.position=cc.v3(l),i&&(this.rootNode.targetOff(this),this.rootNode.on("touchstart",function(){A.rootNode.targetOff(A),cc.audioEngine.stopEffect(h),h=-1,r=!0,y()},this)),this.specialEffectTimer[d].timer=setTimeout(function(){A.specialEffectTimer[d].timer=setTimeout(function(){r=!0,A.rootNode.targetOff(A),y()},1e3*(g.duration+g.life)-33)},33),[3,3]):(r=!0,y(),[2])):(null==s||s(),f(),[2])):[3,1];case 1:return[4,this.playPublicSpineAnim(e,n,o,i,l,1)];case 2:c.sent(),f(),c.label=3;case 3:return[2]}})})})},s([m(cc.SpriteFrame)],e.prototype,"bgSprite",void 0),s([d],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Assets/AssetManager":"AssetManager","../../Assets/Assets":"Assets","../../AudioManager":"AudioManager","../../M010/common/units/M_Audio":"M_Audio","../units/M017_NodePool":"M017_NodePool"}],M_AnimLayer:[function(t,e,n){"use strict";cc._RF.push(e,"974deN2wEtKWpH17uS6W/cU","M_AnimLayer");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../../Assets/AssetManager"),r=t("../../../Assets/Assets"),c=t("./M_Audio"),a=function(){function t(){this.bgSprite=null,this.bg=null,this.poltAndGuide=null,this.lvPass=null,this.reView=null,this.publicAnim=null,this.specialEffectTimer=[],this.specialID=0}return Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},set:function(t){var e=this;if(this._rootNode=t,this._rootNode.active=!0,this._rootNode){this._rootNode.removeAllChildren(),this.bg=new cc.Node("bg"),this._rootNode.addChild(this.bg,0),this.bg.color=cc.color(0,0,0),this.bg.addComponent(cc.Sprite),this.bg.addComponent(cc.Widget);var n=this.bg.getComponent(cc.Widget);this.bg.getComponent(cc.Sprite).spriteFrame=this.bgSprite,n.isAlignTop=n.isAlignBottom=n.isAlignLeft=n.isAlignRight=!0,n.top=n.bottom=n.left=n.right=0,n.updateAlignment();var o=0,i=function(t){var n=new cc.Node(t);return e._rootNode.addChild(n,++o),n.addComponent(sp.Skeleton),n};this.poltAndGuide=i("poltAndGuide"),this.lvPass=i("lvpass"),this.reView=i("reView"),this.publicAnim=i("publicAnim")}this._rootNode.active=!1},enumerable:!1,configurable:!0}),t.prototype.resetAllAnim=function(){this.rootNode.targetOff(this),this.cleanEffects(),this.setOpacity(1),this.reView.getComponent(sp.Skeleton).skeletonData=null,this.lvPass.getComponent(sp.Skeleton).skeletonData=null,this.poltAndGuide.getComponent(sp.Skeleton).skeletonData=null,this.publicAnim.getComponent(sp.Skeleton).skeletonData=null,this.reView.active=this.lvPass.active=this.poltAndGuide.active=this.publicAnim.active=!1},t.prototype.playOnceAnim=function(t,e,n,o,i,a,u,l){var p=this;return void 0===a&&(a=!1),void 0===u&&(u=cc.v2(0,0)),void 0===l&&(l=127),new Promise(function(u){p.cleanEffects(),p.setOpacity(l),p.bg.active=!0,p.rootNode.active=!0,t.active=!0;var h=0,f=null,d=function(e){void 0===e&&(e=!1),(2==++h||e)&&(p.rootNode.off(cc.Node.EventType.TOUCH_END,m,p),a?(f.animationStart=f.animation.duration,f.animationEnd=f.animation.duration):(t.getComponent(sp.Skeleton).skeletonData=null,p.bg.active=!1,t.active=!1),u())},m=function(){p.rootNode.off(cc.Node.EventType.TOUCH_END,m,p),h=-1,cc.audioEngine.stop(g),y.setCompleteListener(null),d(!0)},g=-1;s.default.Instance.GetAsset(n,r.AssetType.Sound)?g=c.default.playEff(s.default.Instance.GetAsset(n,r.AssetType.Sound),!1,function(){d()}):d();var y=t.getComponent(sp.Skeleton);s.default.Instance.GetAsset(e,r.AssetType.Spine)?(y.node.active=!0,y.skeletonData=s.default.Instance.GetAsset(e,r.AssetType.Spine),f=y.setAnimation(0,o,!1),y.setCompleteListener(function(){d()})):d(),i&&p.rootNode.on(cc.Node.EventType.TOUCH_END,m,p)})},t.prototype.setOpacity=function(t){this.bg.opacity=t},t.prototype.playStoryAnim=function(t,e,n){return o(this,void 0,Promise,function(){var o=this;return i(this,function(){return[2,new Promise(function(i){o.playOnceAnim(o.poltAndGuide,t,e,"default",n,!1,cc.v2(0,0),1).then(function(){i()})})]})})},t.prototype.playGuideAnim=function(t,e,n,a,u){return o(this,void 0,Promise,function(){var o,l,p=this;return i(this,function(){return this.rootNode.targetOff(this),o=!1,l=!1,[2,new Promise(function(i){if(p.rootNode.active=!0,p.bg.active=!1,p.poltAndGuide.active=!0,p.poltAndGuide.position=new cc.Vec3(0,0,0),p.poltAndGuide.getComponent(sp.Skeleton).skeletonData=s.default.Instance.GetAsset(t,r.AssetType.Spine),p.poltAndGuide.getComponent(sp.Skeleton).skeletonData){var h=-1,f=function(t){t?l=!0:o=!0,o&&l&&(u?d():a||p.rootNode.on(cc.Node.EventType.TOUCH_END,d.bind(p),p))},d=function(){o=l=!1,0==e.length?(cc.audioEngine.stopEffect(h),p.rootNode.targetOff(p),p.rootNode.active=!1,i()):(cc.audioEngine.stopEffect(h),h=c.default.playEff(n.shift(),!1,f.bind(p,!1)),a||p.poltAndGuide.targetOff(p),p.poltAndGuide.getComponent(sp.Skeleton).setAnimation(0,e.shift(),!u))};p.poltAndGuide.getComponent(sp.Skeleton).setCompleteListener(f.bind(p,!0)),h=c.default.playEff(n.shift(),!1,f.bind(p,!1)),p.poltAndGuide.getComponent(sp.Skeleton).setAnimation(0,e.shift(),!u),a&&p.rootNode.on(cc.Node.EventType.TOUCH_END,d,p)}else i()})]})})},t.prototype.playPublicSpineAnim=function(t,e,n,o,i,s){var r=this;return void 0===i&&(i=cc.v2(0,0)),void 0===s&&(s=127),new Promise(function(i){r.playOnceAnim(r.publicAnim,t,e,n,o,!1,cc.v2(0,0),s).then(function(){i()})})},t.prototype.playLvPassAndFaild=function(t,e,n,o,i,s,r){var c=this;return void 0===i&&(i=!1),void 0===s&&(s=cc.v2(0,0)),void 0===r&&(r=127),new Promise(function(a){c.playOnceAnim(c.lvPass,t,e,n,o,i,s,r).then(function(){a()})})},t.prototype.playReviewAnim=function(t,e,n,o,i,s){var r=this;return void 0===i&&(i=cc.v2(0,0)),void 0===s&&(s=127),new Promise(function(c){r.playOnceAnim(r.reView,t,e,n,o,!1,i,s).then(function(){c()})})},t.prototype.cleanEffects=function(){this._rootNode.children.forEach(function(t){"particle"===t.name&&t.destroy()}),this._rootNode.active=!1,this.CleanSpecialEffectTimer()},t.prototype.CleanSpecialEffectTimer=function(){this.specialEffectTimer.forEach(function(t,e,n){clearTimeout(null==t?void 0:t.timer),cc.audioEngine.stopEffect(null==t?void 0:t.voice),n[e]=null}),this.specialID=0},t.prototype.playSpecialEffects=function(t,e,n,a,u,l,p){var h=this;return void 0===l&&(l=null),void 0===p&&(p=cc.v2(0,0)),this.setOpacity(1),new Promise(function(f){return o(h,void 0,void 0,function(){var o,h,d,m,g,y,_,A=this;return i(this,function(i){switch(i.label){case 0:return t?(o=!1,h=-1,0!=e.length||0!=n.length||s.default.Instance.GetAsset(n,r.AssetType.Sound)?(d=this.specialID++,this.specialEffectTimer[d]={timer:0,voice:-1},(m=new cc.Node("particle")).parent=this.rootNode,m.zIndex=cc.macro.MAX_ZINDEX,m.addComponent(cc.ParticleSystem),g=m.getComponent(cc.ParticleSystem),y=function(){if(o&&-1==h)return A.rootNode.targetOff(A),A.rootNode.active=!1,g.file=null,clearTimeout(A.specialEffectTimer[d].timer),m.isValid&&m.destroy(),null==l||l(),void f()},0==e.length&&0!==n.length?o=!0:0!==e.length&&0==n.length&&(h=-1),this.specialEffectTimer[d].voice=h=c.default.playEff(s.default.Instance.GetAsset(n,r.AssetType.Sound),!1,function(){h=-1,y()}),_=s.default.Instance.GetAsset(e,r.AssetType.Partical),0!=e.length&&_?(g.file=_,g.playOnLoad=!0,this.rootNode.active=!0,g.resetSystem(),m.position=cc.v3(p),u&&(this.rootNode.targetOff(this),this.rootNode.on("touchstart",function(){A.rootNode.targetOff(A),cc.audioEngine.stopEffect(h),h=-1,o=!0,y()},this)),this.specialEffectTimer[d].timer=setTimeout(function(){A.specialEffectTimer[d].timer=setTimeout(function(){o=!0,A.rootNode.targetOff(A),y()},1e3*(g.duration+g.life)-33)},33),[3,3]):(o=!0,y(),[2])):(null==l||l(),f(),[2])):[3,1];case 1:return[4,this.playPublicSpineAnim(e,n,a,u,p,1)];case 2:i.sent(),f(),i.label=3;case 3:return[2]}})})})},t}();n.default=a,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","./M_Audio":"M_Audio"}],M_Audio:[function(t,e,n){"use strict";cc._RF.push(e,"9cafd+UiINEBqJjbqyeGdT3","M_Audio");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.playEff=function(t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=null),t instanceof cc.AudioClip?this.Play(t,n,o,e.volume):this.PlayByAsset(t,n,o,e.volume)},e.hideEffVolume=function(){e.volume=0,cc.audioEngine.setEffectsVolume(e.volume)},e.resumeEffVolume=function(){e.volume=1,cc.audioEngine.setEffectsVolume(e.volume)},e.volume=1,e}(t("../../../AudioManager").default);n.default=s,cc._RF.pop()},{"../../../AudioManager":"AudioManager"}],M_ConfigT:[function(t,e,n){"use strict";cc._RF.push(e,"231aa1Kal5E16aNXPFRLWG+","M_ConfigT"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../Assets/AssetManager"),i=t("../../../Assets/Assets"),s=t("./M_Tool"),r=function(){function t(t){if(this.config=null,this.config=o.default.Instance.GetAsset(t,i.AssetType.GameConfig),this.config)try{this._baseConfig=s.default.getIns().cloneObject(this.config.BaseConfig),this._otherList=s.default.getIns().cloneObject(this.config.OtherList)}catch(e){this.config=null}}return t.prototype.checkConfig=function(){return!!this.config},t.prototype.getBaseConfig=function(){if(this.config)return JSON.parse(JSON.stringify(this._baseConfig))},t.prototype.getOtherList=function(){if(this.config)return this._otherList},t}();n.default=r,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","./M_Tool":"M_Tool"}],M_Content:[function(t,e,n){"use strict";cc._RF.push(e,"7c21eCLrxBI6pwAIZDQJ3/r","M_Content");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Assets/AssetManager"),c=t("../../../Assets/Assets"),a=t("./M_Audio"),u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleFrame=null,e.title=null,e.titleImage=null,e.readBack=null,e.quesNum=null,e.isPlayReadBack=-1,e}return i(e,t),e.prototype.loadSprite=function(t,e){var n=r.default.Instance.GetAsset(e,c.AssetType.Image);n?(t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite),t.getComponent(cc.Sprite).trim=!1,t.getComponent(cc.Sprite).spriteFrame=n,t.color=cc.color(255,255,255,255)):(t.getComponent(cc.Sprite).spriteFrame=null,t.color=cc.color(210,149,255,255))},e.prototype.setTittleFrame=function(t){this.loadSprite(this.titleFrame.node,t)},e.prototype.setQuesNumBg=function(t){this.loadSprite(this.quesNum.node.parent,t)},e.prototype.setTitle=function(t,e,n){void 0===n&&(n={r:0,g:0,b:0,a:1}),t.length&&(this.titleImage.spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image)),this.titleImage.node.active=Boolean(t.length),e.length&&(this.title.string=e,this.title.node.color=cc.color(n.r,n.g,n.b,n.a)),this.title.node.active=Boolean(e.length)},e.prototype.updateQuesNum=function(t,e){1===e&&(this.quesNum.string=""),1!==e?(this.quesNum.string=(t<10?"0"+t:t)+":"+(e<10?"0"+e:e),this.quesNum.node.parent.active=!0,this.quesNum.node.active=!0):this.quesNum.node.parent.active=!1},e.prototype.setReadPlaySpine=function(t){0!==t.length&&(this.readBack.skeletonData=r.default.Instance.GetAsset(t,c.AssetType.Spine))},e.prototype.readBackOff=function(){this.readBackIsClick=!1},e.prototype.readBackOn=function(){this.readBackIsClick=!0},e.prototype.setReadBack=function(t,e){var n=this;void 0===e&&(e=null),this.stopReadBack(),this.readBack.node.targetOff("touchend"),this.readBackSrc=t,this.readBack.node.active=!(!t||0===t.length),this.readBack.node.active?this.readBack.node.on("touchend",function(){n.readBackIsClick&&(a.default.playEff(r.default.Instance.GetAsset("M010_SOUND_BTNREPLAY",c.AssetType.Sound)),n.playReadBack(e))},this.readBack):e&&e()},e.prototype.stopReadBack=function(){this.isPlayReadBack&&(cc.audioEngine.stopEffect(this.isPlayReadBack),this.isPlayReadBack=null),this.readBack.getComponent(sp.Skeleton).clearTracks(),this.readBack.getComponent(sp.Skeleton).setToSetupPose(),this.readBack.getComponent(sp.Skeleton).setAnimation(0,"idle",!1)},e.prototype.playReadBack=function(t){var e=this;void 0===t&&(t=null),this.isPlayReadBack&&this.stopReadBack(),this.readBack.node.active&&(this.readBack.getComponent(sp.Skeleton).clearTracks(),this.readBack.getComponent(sp.Skeleton).setAnimation(0,"play",!0),r.default.Instance.GetAsset(this.readBackSrc,c.AssetType.Sound)?this.isPlayReadBack=a.default.playEff(r.default.Instance.GetAsset(this.readBackSrc,c.AssetType.Sound),!1,function(){e.isPlayReadBack=null,e.stopReadBack(),t&&t()}):(this.isPlayReadBack=null,this.stopReadBack(),t&&t()))},s([p(cc.Sprite)],e.prototype,"titleFrame",void 0),s([p(cc.Label)],e.prototype,"title",void 0),s([p(cc.Sprite)],e.prototype,"titleImage",void 0),s([p(sp.Skeleton)],e.prototype,"readBack",void 0),s([p(cc.Label)],e.prototype,"quesNum",void 0),s([l,h("release/M010/M010_Content")],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","./M_Audio":"M_Audio"}],M_NodePool:[function(t,e,n){"use strict";cc._RF.push(e,"62372uA0DZFeLC1iPwpeCx2","M_NodePool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.nodePool=[]}return t.getIns=function(){return t.m_instance?t.m_instance:(t.m_instance=new t,t.m_instance)},t.prototype.cleanPool=function(t){if(void 0===t&&(t=null),this.nodePool)if(t){if(this.nodePool[t])return this.nodePool[t].prefab=null,this.nodePool[t].pool.clear(),void delete this.nodePool[t]}else{for(var e in this.nodePool)this.nodePool[e].pool.clear();this.nodePool=[]}},t.prototype.createrNodePool=function(t,e,n){if(!(t&&e&&n))return!1;if(this.nodePool&&this.nodePool[t])return!1;this.nodePool||(this.nodePool=[]);var o={prefab:e,pool:new cc.NodePool};this.nodePool[t]=o;for(var i=0;i<n;++i){var s=cc.instantiate(e);this.nodePool[t].pool.put(s)}return!0},t.prototype.getNodeFromPool=function(t){return this.nodePool[t]?this.nodePool[t].pool.size()>0?this.nodePool[t].pool.get():cc.instantiate(this.nodePool[t].prefab):null},t.prototype.destroyNode=function(t,e){var n=this;if(e instanceof Array){var o=[];e.forEach(function(t){o.push(t)}),o.forEach(function(e){e.x=e.y=e.z=0,e.anchorX=e.anchorY=.5,e.off(cc.Node.EventType.TOUCH_CANCEL),e.off(cc.Node.EventType.TOUCH_END),e.off(cc.Node.EventType.TOUCH_START),e.off(cc.Node.EventType.TOUCH_MOVE),n.nodePool[t]?n.nodePool[t].pool.put(e):e.destroy()})}else e.x=e.y=e.z=0,e.anchorX=e.anchorY=.5,e.off(cc.Node.EventType.TOUCH_CANCEL),e.off(cc.Node.EventType.TOUCH_END),e.off(cc.Node.EventType.TOUCH_START),e.off(cc.Node.EventType.TOUCH_MOVE),this.nodePool[t]?this.nodePool[t].pool.put(e):e.destroy()},t.prototype.onDestroy=function(){this.cleanPool()},t}();n.default=o,cc._RF.pop()},{}],M_Timer:[function(t,e,n){"use strict";cc._RF.push(e,"6b593US7+lFlZsubhfMeWqR","M_Timer"),Object.defineProperty(n,"__esModule",{value:!0}),n.M_Timer=void 0;var o=function(){function t(){this.startEndTime=[]}return t.getIns=function(){return t.m_instance?t.m_instance:(t.m_instance=new t,t.m_instance)},t.prototype.pauseTimer=function(){this.startTimeStamp&&(this.tempTimes=(new Date).getTime())},t.prototype.resumeTimer=function(){this.startTimeStamp&&this.tempTimes&&(this.freeTime+=(new Date).getTime()-this.tempTimes,this.tempTimes=null)},t.prototype.StartTimer=function(){this.freeTime=0,this.startTimeStamp=(new Date).getTime()},t.prototype.getTimeSharingMilliSecond=function(){return this.startEndTime.unshift((new Date).getTime()-(this.startTimeStamp+this.freeTime)),this.StartTimer(),this.startEndTime[0]},t.prototype.timerFormat=function(t){var e={H:0,M:0,S:0,ms:0};return t<0?e:(t>36e5&&(e.H=Math.floor(t/36e5),t-=36e5*e.H),t>6e4&&(e.M=Math.floor(t/6e4),t-=6e4*e.M),t>1e3&&(e.S=Math.floor(t/1e3),t-=1e3*e.S),e.ms=t,1e3===e.ms&&(e.S+=1,e.ms=0),60===e.S&&(e.M+=1,e.S=0),60===e.M&&(e.H+=1,e.M=0),e)},t.prototype.cleanTimer=function(){this.startEndTime=[],this.freeTime=0,this.startTimeStamp=null},t.prototype.getCountTime=function(){var t=0;return this.startEndTime.forEach(function(e){t+=e}),t},t}();n.M_Timer=o,cc._RF.pop()},{}],M_Toast:[function(t,e,n){"use strict";cc._RF.push(e,"db2b4aBVi1JeIqYsbIFxK09","M_Toast");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ToastType=void 0;var r,c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cache=[],e.lock=!1,e._rootNode=null,e._bgNode=null,e._infoNode=null,e.tween=null,e.moveTween=null,e}var n;return i(e,t),n=e,Object.defineProperty(e,"Instance",{get:function(){var t;if(!n._Instance){n._Instance=new n;var e=null===(t=cc.director.getScene())||void 0===t?void 0:t.getChildByName("Canvas");return e&&(n._Instance.InitNode(e),e.addComponent(this)),n._Instance}return n._Instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootNode",{set:function(t){if(null===t)return this._bgNode=null,this._infoNode=null,void(this._rootNode=null);this._rootNode=t,this._rootNode.addChild(new cc.Node("Info")),this._rootNode.addChild(new cc.Node("bg")),this._bgNode=this._rootNode.getChildByName("bg"),this._bgNode.addComponent(cc.Graphics),this._infoNode=this._rootNode.getChildByName("Info"),this._infoNode.addComponent(cc.Label),this._rootNode.opacity=0},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n._Instance||(n._Instance=this,this.InitNode(this.node))},e.prototype.InitNode=function(t){this._rootNode&&(this._rootNode.destroy(),this.rootNode=null),this.rootNode=new cc.Node("Toast"),this._rootNode.parent=t,this._rootNode.zIndex=cc.macro.MAX_ZINDEX,this._bgNode.zIndex=cc.macro.MAX_ZINDEX-1,this._infoNode.zIndex=cc.macro.MAX_ZINDEX},e.prototype.ShowAlert=function(){var t=this;if(!this.lock)if(this._cache.length&&this._rootNode){this.lock=!0;var e=this._infoNode.getComponent(cc.Label),n=this._bgNode.getComponent(cc.Graphics),o=this._cache.shift(),i=cc.color(0,0,0,255);switch(e.enableBold=!1,e.lineHeight=e.fontSize+10,e.overflow=cc.Label.Overflow.NONE,e.horizontalAlign=cc.Label.HorizontalAlign.CENTER,e.verticalAlign=cc.Label.VerticalAlign.CENTER,o.type){case r.ERROR:o.str="[ERROR] "+o.str,i=cc.color(255,0,0,255);break;case r.THROWERROR:o.str="[THROW ERROR] "+o.str,i=cc.color(255,0,0,255),e.enableBold=!0;break;case r.INFO:o.str="[INFO] "+o.str,i=cc.color(255,255,255,255);break;case r.WARRN:o.str="[WARRN] "+o.str,i=cc.color(248,255,72,255);break;case r.SUCCESS:o.str="[SUCCESS] "+o.str,i=cc.color(47,247,119,255);break;case r.FAILD:o.str="[FAILD] "+o.str,i=cc.color(248,128,60,255)}o.color&&(i=o.color),this._infoNode.color=i,e.string=o.str,e._forceUpdateRenderData();var s=.8*cc.Canvas.instance.designResolution.width;this._infoNode.width>s&&(this._infoNode.width=s,e.overflow=cc.Label.Overflow.RESIZE_HEIGHT,e._forceUpdateRenderData());var c=this._infoNode.x-this._infoNode.width/2-40,a=this._infoNode.y-this._infoNode.height/2-20,u=this._infoNode.width+80,l=this._infoNode.height+40,p=function(t){n.clear(),n.fillColor=t,n.roundRect(c,a,u,l,10),n.fill()},h=-cc.Canvas.instance.designResolution.height/2+cc.Canvas.instance.designResolution.height/2*.3;if(this._rootNode.y=h-80,this.moveTween=cc.tween(this._rootNode).call(function(){t._rootNode.active=!0}).to(.3,{y:h}).start(),this.tween=cc.tween(this._rootNode).to(.4,{opacity:255},{progress:function(t,e,n,o){var i=t+(e-t)*o;return p(cc.color(128,128,128,i)),i}}).delay(1.4).call(function(){o.type==r.THROWERROR&&t.tween.stop()}).to(.7,{opacity:0},{progress:function(t,e,n,o){var i=t+(e-t)*o;return p(cc.color(128,128,128,i)),i}}).call(function(){t._rootNode.active=!1,t.lock=!1,t.ShowAlert()}).start(),o.type==r.THROWERROR)throw new Error(o.str)}else this.Clean()},e.prototype.HideAlert=function(){var t,e;this._rootNode&&cc.isValid(this._rootNode)&&(null===(t=this.moveTween)||void 0===t||t.stop(),this.moveTween=null,null===(e=this.tween)||void 0===e||e.stop(),this.tween=null,this._rootNode.active=!1)},e.prototype.Clean=function(){this.HideAlert(),this._cache=[],this.lock=!1},e.prototype.Show=function(t,e,o){n.IsDEBUG?(this._rootNode||this.InitNode(cc.director.getScene().getChildByName("Canvas")),this._cache.push({type:t,str:e,color:o}),this.ShowAlert()):this.Clean()},e.prototype.onDestroy=function(){var t,e;this._cache=[],this.lock=!1,null===(t=this.moveTween)||void 0===t||t.stop(),this.moveTween=null,null===(e=this.tween)||void 0===e||e.stop(),this.tween=null,this._rootNode&&cc.isValid(this._rootNode)&&this._rootNode.destroy(),this.rootNode=null},e._Instance=null,e.IsDEBUG=!0,n=s([a],e)}(cc.Component));n.default=u,function(t){t[t.WARRN=0]="WARRN",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.THROWERROR=3]="THROWERROR",t[t.SUCCESS=4]="SUCCESS",t[t.FAILD=5]="FAILD"}(r=n.ToastType||(n.ToastType={})),cc._RF.pop()},{}],M_Tool:[function(t,e,n){"use strict";cc._RF.push(e,"80cc603NrFETbcZQLBDvffY","M_Tool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.ImageExt=[".png",".jpg",".Png",".Jpj",".PNG",".JPG",".PNg",".JPg","jpeg"],this.nonDuplicateID=Date.now()}return t.prototype.pointInCircle=function(t,e){return this.getVecD(t.x,t.y,e.centerPoint.x,e.centerPoint.y)<e.radius},t.prototype.rectInCircle=function(t,e){return this.getVecD(t.x,t.y,e.centerPoint.x,e.centerPoint.y)<e.radius},t.prototype.pointInRect=function(t,e){return!(!t||!e)&&t.x>=e.x&&t.x<=e.x+e.width&&t.y>e.y&&t.y<=e.y+e.height},t.prototype.toDecimal2=function(t){var e=(Math.round(100*t)/100).toString(),n=e.indexOf(".");for(n<0&&(n=e.length,e+=".");e.length<=n+2;)e+="0";return e},t.getIns=function(){return t.m_instance?t.m_instance:(t.m_instance=new t,t.m_instance)},t.prototype.genNonDuplicateID=function(){return this.nonDuplicateID-=1,this.nonDuplicateID},t.prototype.getVectorD=function(t,e,n,o){if(void 0===n&&(n=null),void 0===o&&(o=null),t instanceof cc.Vec2||t instanceof cc.Vec3){var i=t,s=e;t=i.x,e=i.y,n=s.x,o=s.y}return this.getVecD(t,e,n,o)},t.prototype.getVecD=function(t,e,n,o){return Math.abs(Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2)))},t.prototype.LoadImageRemote=function(t,e,n){void 0===n&&(n=null),e&&this.ImageExt.includes(e.substr(e.length-4))&&cc.assetManager.loadRemote(e,function(e,o){!e&&cc.isValid(t,!0)&&(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),n&&(t.width=n.x,t.height=n.y))})},t.prototype.getCurentTime=function(t){return void 0===t&&(t=null),"0000-00-00 00:00:00"},t.prototype.randomAccess=function(t,e){return e+=1,Math.floor(Math.random()*(t-e)+e)},t.prototype.randomNumber=function(t){for(var e="",n=0;n<t;++n)e+=String(Math.ceil(9*Math.random()));return e},t.prototype.radomArrValue=function(e){for(var n=t.getIns().cloneObject(e),o=[],i=n.length,s=0;s<i;s++){var r=Math.floor(Math.random()*n.length);o.push(n[r]),n.splice(r,1)}return o},t.prototype.spliceRadomArrValue=function(t,e){return this.radomArrValue(t).splice(0,e)},t.prototype.isObjectValueEqual=function(t,e){var n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(e);if(n.length!=o.length)return!1;for(var i=0;i<n.length;i++){var s=n[i];if(t[s]!==e[s])return!1}return!0},t.prototype.uniqureArray=function(t,e){console.log(t.length);for(var n=0;n<t.length;){for(var o=!1,i=0;i<e.length;++i)if(this.isObjectValueEqual(t[n],e[i])){o=!0,t.splice(n,1);break}!o&&n++}return t},t.prototype.decodeUnicode=function(t){return t=(t="\\u"+t).replace(/\\/g,"%"),(t=unescape(t)).replace(/%/g,"\\")},t.prototype.getRandomName=function(t){for(var e="",n=0;n<t;n++){var o;o=this.randomAccess(19968,40869).toString(16),e+=this.decodeUnicode(o)}return e},t.prototype.cloneObject=function(t){try{return JSON.parse(JSON.stringify(t))}catch(i){if(null===t)return null;if("object"!=typeof t)return t;if(t.constructor===Date)return new Date(t);if(t.constructor===RegExp)return new RegExp(t);var e=new t.constructor;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];e[n]="object"==typeof o?arguments.callee(o):o}return e}},t.prototype.isJsonStr=function(t,e){if(void 0===e&&(e=!0),"string"==typeof t)try{var n=JSON.parse(t);return!("object"!=typeof n||!n)&&(!e||n)}catch(o){return!1}return!1},t.prototype.Log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.log("**********"+t.getIns().getCurentTime()+"***********");for(var o=0;o<e.length;++o)console.log(e[o]);console.log("*****************************************")},t.prototype.reservePosRandom=function(){throw new Error("Function not implemented")},t}();n.default=o,cc._RF.pop()},{}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"0812b7xvlJBQ5R8ySRKL++v","Main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./release/units/Timer"),u=cc._decorator,l=u.ccclass,p=(u.property,u.menu),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.showEvent=function(){return r(this,void 0,void 0,function(){return c(this,function(){return a.Timer.getIns().resumeTimer(),[2]})})},e.prototype.hideEvent=function(){a.Timer.getIns().pauseTimer()},e.prototype.onDestroy=function(){cc.macro.ENABLE_MULTI_TOUCH=this.muiltTouch},e.prototype.initConfig=function(){},e.prototype.run=function(){},s([l,p("\u6e38\u620f\u5165\u53e3/M001/Main")],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./release/units/Timer":"Timer"}],OutTimer:[function(t,e,n){"use strict";cc._RF.push(e,"dd811SiGJ9Euahl+uEBFMDZ","OutTimer");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Assets/AssetManager"),c=t("../../../Assets/Assets"),a=t("../../../M010/common/units/M_Audio"),u=cc._decorator,l=u.ccclass,p=(u.property,u.menu),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectID=-1,e.lock=!0,e.cache=null,e}return i(e,t),e.prototype.setOutTimer=function(t,e,n,o){var i=this;this.cache={time:t,effsrc:e,rightTipFunction:n},this.node.on(cc.Node.EventType.TOUCH_START,function(){null==o||o(),i.lock||(i.cleanTimer(),i.startOutTimer())},this)},e.prototype.startOutTimer=function(){var t=this;this.lock=!1,this._timerID=setTimeout(function(){var e,n,o;t.effectID=a.default.playEff(r.default.Instance.GetAsset(null===(e=t.cache)||void 0===e?void 0:e.effsrc,c.AssetType.Sound)),t.cache.time.answerTip&&(null===(o=(n=t.cache).rightTipFunction)||void 0===o||o.call(n)),t.startOutTimer()},1e3*this.cache.time.time)},e.prototype.onDestroy=function(){this.cache=null,this.cleanTimer()},e.prototype.cleanTimer=function(){this.lock=!0,clearTimeout(this._timerID),cc.audioEngine.stopEffect(this.effectID)},s([l,p("release/M001/OutTimer")],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","../../../M010/common/units/M_Audio":"M_Audio"}],QuesContet:[function(t,e,n){"use strict";cc._RF.push(e,"69856PMW59K7bWRYshMPCDu","QuesContet");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Assets/AssetManager"),c=t("../../../Assets/Assets"),a=t("../../../AudioManager"),u=t("../../../M010/common/units/M_Audio"),l=cc._decorator,p=l.ccclass,h=l.property,f=l.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.readBack=null,e.quesNum=null,e.quesNumBG=null,e.questionBaseFrame=null,e.questionImage=null,e.questionText=null,e.readBackButtonEffect=null,e.ReadBackIsClick=!1,e}var n;return i(e,t),n=e,e.prototype.hide=function(){var t=this;return new Promise(function(e){var n=!1,o=!1,i=!1;cc.tween(t.readBack).to(.3,{opacity:0}).call(function(){n=!0,t.readBack.active=!1,n&&o&&i&&e()}).start(),cc.tween(t.quesNumBG).to(.3,{opacity:0}).call(function(){o=!0,t.quesNumBG.active=!1,n&&o&&i&&e()}).start(),cc.tween(t.questionBaseFrame).to(.3,{opacity:0}).call(function(){i=!0,t.questionBaseFrame.active=!1,n&&o&&i&&e()}).start()})},e.prototype.show=function(){var t=this;return new Promise(function(e){var n=!1,o=!1,i=!1;t.readBack.active=!0,cc.tween(t.readBack).to(.3,{opacity:255}).call(function(){(n=!0)&&o&&i&&e()}).start(),t.quesNumBG.active=!0,cc.tween(t.quesNumBG).to(.3,{opacity:255}).call(function(){o=!0,n&&o&&i&&e()}).start(),t.questionBaseFrame.active=!0,cc.tween(t.questionBaseFrame).to(.3,{opacity:255}).call(function(){i=!0,n&&o&&i&&e()}).start()})},e.prototype.setReadPlayAnim=function(t,e){0!==t.length&&(this.readBackButtonEffect=e,this.readBack.getComponent(sp.Skeleton).skeletonData=r.default.Instance.GetAsset(t,c.AssetType.Spine))},e.prototype.setQuitButton=function(t,e){t.getComponent(cc.Sprite).spriteFrame=r.default.Instance.GetAsset("M001_BTN_QUIT",c.AssetType.Image);var n=function(){u.default.playEff(r.default.Instance.GetAsset("M001_BTN_PRESS",c.AssetType.Sound)),u.default.hideEffVolume(),e.ShowEixtAlert(function(){u.default.resumeEffVolume()},function(){u.default.resumeEffVolume()})};t.on(cc.Node.EventType.TOUCH_START,function(){cc.tween(t).to(.1,{scale:.8}).start()},this),t.on(cc.Node.EventType.TOUCH_END,function(){null==n||n(),cc.tween(t).to(.1,{scale:1}).start()},this),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){cc.tween(t).to(.1,{scale:1}).start()},this)},e.prototype.hideReadPlay=function(){this.readBack.targetOff(this.readBack)},e.prototype.setQuesNumVisable=function(t){this.quesNum.active=t},e.prototype.setQuesNum=function(t,e){this.quesNum.active=this.quesNumBG.active=e>1,this.quesNum.getComponent(cc.Label).string=(++t<10?"0"+t:t)+":"+(e<10?"0"+e:e)},e.prototype.setQuestion=function(t,e){t.length&&(this.questionText.getComponent(cc.Label).string=t,this.questionText.color=new cc.Color(e.r,e.g,e.b)),this.questionText.active=!!t.length},e.prototype.setQuestionImage=function(t){t.length&&(this.questionImage.getComponent(cc.Sprite).spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image)),this.questionImage.active=!!t.length},e.prototype.setQuestionBaseFrame=function(t){this.questionBaseFrame.getComponent(cc.Sprite).spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image),this.questionBaseFrame.active=!0},e.prototype.setQuestionNumBaseFrame=function(t){this.quesNumBG.getComponent(cc.Sprite).spriteFrame=r.default.Instance.GetAsset(t,c.AssetType.Image),this.quesNumBG.active=!0},e.prototype.hideQuestionNumTip=function(){this.quesNumBG.active=!1},e.prototype.setReadBack=function(t){-1!==n.ReadBackViceID&&this.stopReadBack(),n.ReadBackSrc=t.res,this.readBack.active=!(!t.res||0===t.res.length),this.readBack.active&&(this.readBack.off("touchend",this.playReadBack,this),this.readBack.on("touchend",this.playReadBack,this))},e.prototype.playGuideVoice=function(t,e){t.res&&0!==t.res.length?n.GuideVoiceID=a.default.Play(r.default.Instance.GetAsset(t.res,c.AssetType.Sound),!1,function(){n.GuideVoiceID=-1,e&&e(t.clickStop)}):e&&e(t.clickStop)},e.prototype.stopGuideVoice=function(){-1!==n.GuideVoiceID&&(cc.audioEngine.stopEffect(n.GuideVoiceID),n.GuideVoiceID=-1)},e.prototype.stopReadBack=function(){-1!==n.ReadBackViceID&&cc.audioEngine.stopEffect(n.ReadBackViceID),n.ReadBackViceID=-1,this.readBack.getComponent(sp.Skeleton).setToSetupPose(),this.readBack.getComponent(sp.Skeleton).clearTracks(),this.readBack.getComponent(sp.Skeleton).setAnimation(0,"idle",!1)},e.prototype.playReadBack=function(t){var e=this;return void 0===t&&(t=null),-1===n.ReadBackViceID&&this.ReadBackIsClick?r.default.Instance.GetAsset(n.ReadBackSrc,c.AssetType.Sound)?(this.readBack.getComponent(sp.Skeleton).setToSetupPose(),this.readBack.getComponent(sp.Skeleton).setAnimation(0,"play",!0),a.default.Play(r.default.Instance.GetAsset(this.readBackButtonEffect,c.AssetType.Sound)),void(n.ReadBackViceID=a.default.Play(r.default.Instance.GetAsset(n.ReadBackSrc,c.AssetType.Sound),!1,function(){"function"==typeof t&&(null==t||t()),e.stopReadBack()}))):("function"==typeof t&&(null==t||t()),void this.stopReadBack()):0},e.ReadBackSrc=null,e.ReadBackViceID=-1,e.GuideVoiceID=-1,s([h(cc.Node)],e.prototype,"readBack",void 0),s([h(cc.Node)],e.prototype,"quesNum",void 0),s([h(cc.Node)],e.prototype,"quesNumBG",void 0),s([h(cc.Node)],e.prototype,"questionBaseFrame",void 0),s([h(cc.Node)],e.prototype,"questionImage",void 0),s([h(cc.Node)],e.prototype,"questionText",void 0),n=s([p,f("release/M001/QuesContent")],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Assets/AssetManager":"AssetManager","../../../Assets/Assets":"Assets","../../../AudioManager":"AudioManager","../../../M010/common/units/M_Audio":"M_Audio"}],Quit:[function(t,e,n){"use strict";cc._RF.push(e,"41578aDzEJL67j3ayRFnXLv","Quit");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Quit=void 0;var r=cc._decorator,c=r.ccclass,a=r.property,u=r.menu,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.root=null,e.btn_confirm=null,e.btn_cancle=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.hide()},e.prototype.clickConfirm=function(t){t.stopPropagation(),this.callBack&&this.callBack(!0),this.hide()},e.prototype.clickCancle=function(t){t.stopPropagation(),this.callBack&&this.callBack(!1),this.hide()},e.prototype.addEvent=function(){this.btn_confirm.on("touchend",this.clickConfirm,this),this.btn_cancle.on("touchend",this.clickCancle,this)},e.prototype.closeEvent=function(){this.btn_confirm.off("touchend"),this.btn_cancle.off("touchend")},e.prototype.setQuitDesc=function(t){this.content.string=t,this.content._forceUpdateRenderData()},e.prototype.show=function(t){this.callBack=t,this.root.active=!0,this.root.scale=1,this.mask.active=!0,cc.tween(this.root).to(.1,{scale:1.2},{easing:cc.easing.bounceIn}).to(.2,{scale:1},{easing:cc.easing.bounceOut}).start(),this.addEvent()},e.prototype.hide=function(){var t=this;this.callBack=null,this.root.scale=1,cc.tween(this.root.getChildByName("quit")).to(.1,{scale:1.2},{easing:cc.easing.bounceOut}).to(.2,{scale:0,opacity:0},{easing:cc.easing.bounceOut}).call(function(){t.root.getChildByName("quit").scale=1,t.root.getChildByName("quit").opacity=255,t.mask.active=!1,t.root.active=!1}).start(),this.closeEvent()},s([a({type:cc.Node,displayName:"\u906e\u7f69"})],e.prototype,"mask",void 0),s([a(cc.Label)],e.prototype,"content",void 0),s([a(cc.Node)],e.prototype,"root",void 0),s([a(cc.Node)],e.prototype,"btn_confirm",void 0),s([a(cc.Node)],e.prototype,"btn_cancle",void 0),s([c,u("release/M001/Quit")],e)}(cc.Component);n.Quit=l,cc._RF.pop()},{}],SPAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"189e6UqSf1AsJghyqfQj08P","SPAnimation");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Transform"),c=cc._decorator,a=c.ccclass,u=c.property,l=c.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anima=null,e.playOnEnable=!1,e.loop=!1,e.animations=[],e.isInit=!1,e}return i(e,t),Object.defineProperty(e.prototype,"Animations",{get:function(){return this.animations},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.isInit||this.Init()},e.prototype.Init=function(){this.isInit=!0,this.anima||(this.anima=this.getComponentInChildren(sp.Skeleton))},e.prototype.onEnable=function(){var t=this;this.playOnEnable&&this.anima&&this.scheduleOnce(function(){t.Play(t.anima.defaultAnimation,t.loop)},.001)},e.prototype.Play=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=0),this.anima.paused=!1,this.anima.setAnimation(n,t,e)},e.prototype.Next=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=0),this.anima.paused=!1,this.anima.addAnimation(n,t,e)},e.prototype.Stop=function(){this.anima.setBonesToSetupPose(),this.anima.paused=!0},e.prototype.SetSkin=function(t){this.anima.setSkin(t)},e.prototype.SetMix=function(t,e,n){void 0===n&&(n=.5),this.anima.setMix(t,e,n)},e.prototype.AddAnimationName=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.animations).push.apply(t,e)},e.prototype.GenerateAllNodes=function(){this.anima.attachUtil.generateAllAttachedNodes()},e.prototype.getAnimDuration=function(t){var e=this.anima.skeletonData._skeletonCache.animations.find(function(e){if(e.name===t)return e});return e?e.duration:0},e.prototype.GetAttachedNodes=function(t){var e=this.anima.attachUtil.getAttachedNodes(t);return e&&e.length>0?e[0]:null},e.prototype.GenerateSomeNodes=function(t){return this.anima.attachUtil.generateAttachedNodes(t)[0]},e.prototype.DestroyAllNodes=function(){this.anima.attachUtil.destroyAllAttachedNodes()},s([u(sp.Skeleton)],e.prototype,"anima",void 0),s([u()],e.prototype,"playOnEnable",void 0),s([u()],e.prototype,"loop",void 0),s([a,l("GameTool/SPAnimation")],e)}(r.default);n.default=p,cc._RF.pop()},{"./Transform":"Transform"}],SPLoder:[function(t,e,n){"use strict";cc._RF.push(e,"adc5abZQWBFSL4Ci1PgS+4a","SPLoder");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Assets/AssetManager"),u=t("./Log"),l=t("./Transform"),p=cc._decorator,h=p.ccclass,f=(p.property,p.menu),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.LoadSpine=function(t,e){return void 0===e&&(e=null),a.default.Instance.GetSPAnimation(t,e||this.node)},e.prototype.LoadSpineByData=function(t,e){return r(this,void 0,Promise,function(){var n,o,i=this;return c(this,function(s){switch(s.label){case 0:return n=null,t?(o=t.name)?(n=this.LoadSpine(o,e))?[4,new Promise(function(t){i.scheduleOnce(function(){t(null)},0)})]:[3,2]:[3,3]:[3,4];case 1:s.sent(),t.mix&&t.mix.forEach(function(t){n.SetMix(t.from,t.to,t.value)}),t.skin&&n.SetSkin(t.skin),t.animation&&n.Play(t.animation,t.loop),s.label=2;case 2:return[3,4];case 3:u.default.W("SPLoder -> LoadSpineByData","\u52a8\u753b\u8d44\u6e90\u540d\u79f0\u672a\u8bbe\u7f6e"),s.label=4;case 4:return[2,n]}})})},s([h,f("GameTool/Loader/SPLoder")],e)}(l.default);n.default=d,cc._RF.pop()},{"./Assets/AssetManager":"AssetManager","./Log":"Log","./Transform":"Transform"}],ScreenTouchListener:[function(t,e,n){"use strict";cc._RF.push(e,"ecb89zCCOdBQbEk6TjVh1mn","ScreenTouchListener");var o=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Action"),s=cc._decorator,r=s.ccclass,c=(s.property,function(){function t(){this._node=null,this.OnClick=new i.Action}var e;return e=t,Object.defineProperty(t,"Instance",{get:function(){if(e.instance||(e.instance=new e),!e.instance._node||!e.instance._node.isValid){e.instance.OnClick=new i.Action;var t=new cc.Node("ScreenTouchListener");e.instance._node=t;var n=cc.find("Canvas");t.setParent(n),t.x=0,t.y=0,t.width=n.width,t.height=n.height;var o=!1;t.on(cc.Node.EventType.TOUCH_START,function(){o=!1}),t.on(cc.Node.EventType.TOUCH_END,function(t){0==o&&setTimeout(function(){e.instance.OnClick.Invoke(t,t.currentTarget.name==t.target.name)},1)}),t.on(cc.Node.EventType.TOUCH_MOVE,function(t){!o&&t.getDelta().mag()>5&&(o=!0)}),t._touchListener.swallowTouches=!1}return e.instance},enumerable:!1,configurable:!0}),t.Dispose=function(){var t,n;e.instance&&(e.instance.OnClick=null),null===(n=null===(t=e.instance)||void 0===t?void 0:t._node)||void 0===n||n.destroy(),e.instance=void 0},t.instance=null,e=o([r],t)}());n.default=c,cc._RF.pop()},{"./Action":"Action"}],Stack:[function(t,e,n){"use strict";cc._RF.push(e,"b3f5eQWnEdERKwICn/bnJ5T","Stack"),Object.defineProperty(n,"__esModule",{value:!0});var o=10,i=function(){function t(t){void 0===t&&(t=o),this.elements=new Array(t),this._size=0}return t.prototype.push=function(t){var e=this.elements.length;if(this._size>=e){var n=new Array(e);this.elements=this.elements.concat(n)}this.elements[this._size++]=t},t.prototype.pop=function(){return this.elements[--this._size]},t.prototype.peek=function(){return this.elements[this._size-1]},t.prototype.size=function(){return this._size},t.prototype.empty=function(){return 0==this._size},t.prototype.clear=function(t){void 0===t&&(t=o),delete this.elements,this.elements=new Array(t),this._size=0},t}();n.default=i,cc._RF.pop()},{}],StarCollector:[function(t,e,n){"use strict";cc._RF.push(e,"860e2lVJHlNMIWksPU0H12Q","StarCollector");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Log"),c=t("../../TimeSystem"),a=t("../../UIBase"),u=t("./Collector"),l=t("./UICombo"),p=t("./UIRewardStar"),h=function(){this.CallBack=null,this.Id=0,this.RewardType=0,this.InvokeId=-1},f=function(){function t(){this.callBackMap=new Map,this.id=0}return t.prototype.GetCallBack=function(t){return this.callBackMap.get(t)},t.prototype.AddCallBack=function(t,e){if(!e)return-1;var n=new h;return n.CallBack=e,n.Id=++this.id,n.RewardType=t,this.callBackMap.set(n.Id,n),n.Id},t.prototype.Remove=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e&&e.length&&e.forEach(function(e){t.callBackMap.delete(e)})},t.prototype.Break=function(t){void 0===t&&(t=null);var e=[];this.callBackMap.forEach(function(n){1!=n.RewardType&&n.CallBack&&(r.default.D("\u4e2d\u65ad\u56de\u8c03"+n.RewardType),null==t||t(n),e.push(n.Id),n.CallBack())}),this.Remove.apply(this,e)},t.prototype.Implement=function(t,e){var n;void 0===e&&(e=null);var o=this.callBackMap.get(t);o&&(r.default.D("\u5956\u52b1\u56de\u8c03"+o.RewardType),e(o),null===(n=o.CallBack)||void 0===n||n.call(o),this.Remove(t))},t}(),d=cc._decorator,m=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Collector=null,e.starPrefab=null,e.combo=null,e.starTimer=new c.default,e.canBreak=!1,e.mask=null,e.startParent=null,e.callBackTool=null,e.allStar=[],e}return i(e,t),e.prototype.Init=function(){var t=this;this.startParent=this.Find("starParent"),this.combo.Show(!1),this.combo.ClearCombo(),this.callBackTool=new f,this.mask&&(this.mask.active=!1),this.AddClickListener(this.mask,function(){t.canBreak&&(t.allStar.forEach(function(t){t.Destroy()}),t.allStar=[],t.OnAnimationEnd(null,0))})},e.prototype.ActiveMask=function(t){this.mask&&(this.mask.active=t)},e.prototype.SetData=function(t,e,n){return this.canBreak=e,this.callBackTool.AddCallBack(t,n)},e.prototype.CreateStar_Line=function(t,e,n,o,i,s,r){void 0===i&&(i=2),void 0===s&&(s=!1);for(var c=e%2==0?.5*o:0,a=n.x-Math.floor(e/2)*o+c,u=[],l=0;l<e;l++){var p=this.GetStar();1!=t&&this.allStar.push(p),p.node.active=!0,p.node.x=a+l*o,p.node.y=n.y,u.push(p)}this.MoveStar(u,2,i,s,r)},e.prototype.CreateStar_Circle=function(t,e,n,o,i,s,r,c,a){void 0===r&&(r=2),void 0===c&&(c=!1);var u=e%2==0?o/2:o;i=Math.floor(e/2)*o+u+i;for(var l=[],p=0;p<e;p++){i-=o;var h=Math.cos(i*Math.PI/180)*s+n.x,f=Math.sin(i*Math.PI/180)*s+n.y,d=this.GetStar();1!=t&&this.allStar.push(d),d.node.active=!0,d.node.x=h,d.node.y=f,l.push(d)}this.MoveStar(l,2,r,c,a)},e.prototype.GetStar=function(){var t=cc.instantiate(this.starPrefab);return t.setParent(this.startParent),t.getComponent(p.default)},e.prototype.MoveStar=function(t,e,n,o,i){var s=this;void 0===n&&(n=0),o&&this.ShowCollector();var r=this,c=r.starTimer.Invoke(function(){var e=0,c=0;if(o&&t&&t.length>0)for(var a=0;a<t.length;a++){e+=.05;var u=cc.v3(s.node.parent.convertToNodeSpaceAR(r.Collector.position));t[a].Fly(u,.4,e,function(){++c>=t.length&&r.OnAnimationEnd(null,i)})}else r.OnAnimationEnd(t,i),r.starTimer.Invoke(function(){r.OnAnimationEnd(t,i)},n)},.5),a=this.callBackTool.GetCallBack(i);a&&1!=a.RewardType&&(a.InvokeId=c)},e.prototype.ShowCollector=function(){this.Collector.Show(!0),this.Collector.ShowUp()},e.prototype.Combo=function(t,e,n){this.combo.ShowCombo(t,e,n)},e.prototype.ClearCombo=function(){this.combo.ClearCombo()},e.prototype.OnAnimationEnd=function(t,e){var n=this;void 0===t&&(t=null),t&&t.length>0&&t.forEach(function(t){var e=n.allStar.indexOf(t);e>-1&&n.allStar.splice(e,1),t&&t.Destroy()}),-1==e||(0==e?(this.callBackTool.Break(function(t){n.starTimer.CancelInvoke(t.InvokeId)}),this.ActiveMask(!1)):this.callBackTool.Implement(e,function(t){1!=t.RewardType&&n.ActiveMask(!1)}))},e.prototype.onDestroy=function(){this.starTimer.CancelAllInvoke()},s([g(u.default)],e.prototype,"Collector",void 0),s([g(cc.Node)],e.prototype,"starPrefab",void 0),s([g(l.default)],e.prototype,"combo",void 0),s([g(cc.Node)],e.prototype,"mask",void 0),s([m],e)}(a.default);n.default=y,cc._RF.pop()},{"../../Log":"Log","../../TimeSystem":"TimeSystem","../../UIBase":"UIBase","./Collector":"Collector","./UICombo":"UICombo","./UIRewardStar":"UIRewardStar"}],SwitchSp:[function(t,e,n){"use strict";cc._RF.push(e,"c285cqRAN9HRLHjvb/59KGN","SwitchSp");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,u=r.executeInEditMode,l=r.menu,p=r.disallowMultiple,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curID=-1,e._show=!1,e._cacheArr=[],e._curSp=-1,e}return i(e,t),Object.defineProperty(e.prototype,"cacheArr",{get:function(){return this._cacheArr},set:function(t){this._cacheArr=t,this._show=!1;for(var e=0;e<this.cacheArr.length;++e)if(this.cacheArr[e]&&this.cacheArr[e]instanceof cc.SpriteFrame){this._show=!0;break}this.curSp=this._curID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curSp",{get:function(){return this._curID},set:function(t){t<-1||t>this.cacheArr.length-1||cc.isValid(this.node,!0)&&(-1!=t&&this.cacheArr[t]&&this.cacheArr[t]instanceof cc.SpriteFrame?(this.spriteFrame=this.cacheArr[t],this._curID=t):(this.spriteFrame=null,this._curID=t))},enumerable:!1,configurable:!0}),e.prototype.updateFrame=function(t,e){return!(t>this.cacheArr.length-1)&&e instanceof cc.SpriteFrame&&(this.cacheArr[t]=e,this.getShowID()===t&&this.setSpriteFrame(t),!0)},e.prototype.cleanAllCache=function(){this.setSpriteFrame(-1),this.cacheArr=[]},e.prototype.pushFrame=function(t){return t instanceof cc.SpriteFrame?(this.cacheArr.push(t),this.cacheArr.length-1):-1},e.prototype.setSpriteFrame=function(t){return t<0||t>this.cacheArr.length-1?(this.curSp=-1,!1):(this.cacheArr[t],this.curSp=t,!0)},e.prototype.getShowID=function(){return this.curSp},s([a({serializable:!0})],e.prototype,"_curID",void 0),s([a({serializable:!0})],e.prototype,"_show",void 0),s([a({serializable:!0})],e.prototype,"_cacheArr",void 0),s([a({type:[cc.SpriteFrame],tooltip:"\u7cbe\u7075\u7f13\u5b58\u6570\u7ec4"})],e.prototype,"cacheArr",null),s([a({serializable:!0})],e.prototype,"_curSp",void 0),s([a({type:cc.Integer,min:-1,tooltip:"\u663e\u793a\u7684spriteFrame(\u7f13\u5b58\u6570\u7ec4\u7684\u4e0b\u6807)",visible:function(){return this._show}})],e.prototype,"curSp",null),s([c,p,u,l("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/SwitchSp")],e)}(cc.Sprite);n.default=h,cc._RF.pop()},{}],TimeSystem:[function(t,e,n){"use strict";cc._RF.push(e,"97fd3yhnuBMIIWhBoQPqStS","TimeSystem"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./TimerEvent"),i=function(){function t(){this.id=[]}return t.prototype.Invoke=function(t,e){var n=this,i=null;i=t instanceof o.default==0?new o.default(t):t;var s=setTimeout(function(){i.Invoke();for(var t=0;t<n.id.length;t++)if(n.id[t]===s){n.id.splice(t,1);break}},1e3*e);return n.id.push(s),s},t.prototype.CancelInvoke=function(t){clearTimeout(t)},t.prototype.CancelAllInvoke=function(){if(this.id&&0!==this.id.length){for(var t=0;t<this.id.length;t++)this.CancelInvoke(this.id[t]);this.id=[]}},t}();n.default=i,cc._RF.pop()},{"./TimerEvent":"TimerEvent"}],TimerEvent:[function(t,e,n){"use strict";cc._RF.push(e,"9c263daHZlO16hNM/CtdnRK","TimerEvent"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.callBack=null,this.callBack=t}return t.prototype.Invoke=function(){this.callBack&&this.callBack()},t}();n.default=o,cc._RF.pop()},{}],Timer:[function(t,e,n){"use strict";cc._RF.push(e,"ec6cbz4mCpMu4Uuo8901am6","Timer"),Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var o=function(){function t(){this.startEndTime=[]}return t.getIns=function(){return t.m_instance?t.m_instance:(t.m_instance=new t,t.m_instance)},t.prototype.pauseTimer=function(){this.startTimeStamp&&(this.tempTimes=(new Date).getTime())},t.prototype.resumeTimer=function(){this.startTimeStamp&&this.tempTimes&&(this.freeTime+=(new Date).getTime()-this.tempTimes,this.tempTimes=null)},t.prototype.StartTimer=function(){this.freeTime=0,this.startTimeStamp=(new Date).getTime()},t.prototype.getTimeSharingMilliSecond=function(){return this.startEndTime.unshift((new Date).getTime()-(this.startTimeStamp+this.freeTime)),this.StartTimer(),this.startEndTime[0]},t.prototype.timerFormat=function(t){var e={H:0,M:0,S:0,ms:0};return t<0?e:(t>36e5&&(e.H=Math.floor(t/36e5),t-=36e5*e.H),t>6e4&&(e.M=Math.floor(t/6e4),t-=6e4*e.M),t>1e3&&(e.S=Math.floor(t/1e3),t-=1e3*e.S),e.ms=t,1e3===e.ms&&(e.S+=1,e.ms=0),60===e.S&&(e.M+=1,e.S=0),60===e.M&&(e.H+=1,e.M=0),e)},t.prototype.cleanTimer=function(){this.startEndTime=[],this.freeTime=0,this.startTimeStamp=null},t.prototype.getCountTime=function(){var t=0;return this.startEndTime.forEach(function(e){t+=e}),t},t}();n.Timer=o,cc._RF.pop()},{}],Tool:[function(t,e,n){"use strict";cc._RF.push(e,"ccf49QqvMlGVoFwbe6AaqqT","Tool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.ImageExt=[".png",".jpg",".Png",".Jpj",".PNG",".JPG",".PNg",".JPg","jpeg"],this.nonDuplicateID=Date.now()}return t.pointInRect=function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>e.y&&t.y<=e.y+e.height},t.toDecimal2=function(t){var e=(Math.round(100*t)/100).toString(),n=e.indexOf(".");for(n<0&&(n=e.length,e+=".");e.length<=n+2;)e+="0";return e},t.getInstance=function(){return t.m_instance?t.m_instance:(t.m_instance=new t,t.m_instance)},t.prototype.genNonDuplicateID=function(){return this.nonDuplicateID-=1,this.nonDuplicateID},t.prototype.getVectorD=function(t,e){return this.getVecD(t.x,t.y,e.x,e.y)},t.prototype.getPosD=function(t,e,n,o){return this.getVecD(t,e,n,o)},t.prototype.getVecD=function(t,e,n,o){return Math.abs(Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2)))},t.prototype.LoadImageRemote=function(t,e,n){void 0===n&&(n=null),e&&this.ImageExt.includes(e.substr(e.length-4))&&cc.assetManager.loadRemote(e,function(e,o){!e&&cc.isValid(t,!0)&&(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),n&&(t.width=n.x,t.height=n.y))})},t.prototype.getCurentTime=function(t){return void 0===t&&(t=null),"0000-00-00 00:00:00"},t.prototype.randomAccess=function(t,e){return e+=1,Math.floor(Math.random()*(t-e)+e)},t.prototype.randomNumber=function(t){for(var e="",n=0;n<t;++n)e+=String(Math.ceil(9*Math.random()));return e},t.prototype.decodeUnicode=function(t){return t=(t="\\u"+t).replace(/\\/g,"%"),(t=unescape(t)).replace(/%/g,"\\")},t.prototype.getRandomName=function(t){for(var e="",n=0;n<t;n++){var o;o=this.randomAccess(19968,40869).toString(16),e+=this.decodeUnicode(o)}return e},t.cloneObject=function(t){try{return JSON.parse(JSON.stringify(t))}catch(i){if(null===t)return null;if("object"!=typeof t)return t;if(t.constructor===Date)return new Date(t);if(t.constructor===RegExp)return new RegExp(t);var e=new t.constructor;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];e[n]="object"==typeof o?arguments.callee(o):o}return e}},t.isJsonStr=function(t,e){if(void 0===e&&(e=!0),"string"==typeof t)try{var n=JSON.parse(t);return!("object"!=typeof n||!n)&&(!e||n)}catch(o){return!1}return!1},t.Log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.log(t.getInstance().getCurentTime());for(var o=0;o<e.length;++o)console.log(e[o]);console.log("*****************************************")},t}();n.default=o,cc._RF.pop()},{}],Transform:[function(t,e,n){"use strict";cc._RF.push(e,"823ffK4jgRFcYhwWOTz/C+2","Transform");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,r.menu),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"Active",{get:function(){return this.node&&this.node.isValid&&this.node.active},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this.node.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Scale",{get:function(){return this.node.scale},set:function(t){this.node.scale=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localPosition",{get:function(){return this.node.position},set:function(t){this.node.setPosition(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.node.parent?this.node.parent.convertToWorldSpaceAR(this.node.position):this.localPosition},set:function(t){this.node.parent?this.localPosition=this.node.parent.convertToNodeSpaceAR(t):this.localPosition=t},enumerable:!1,configurable:!0}),e.prototype.Show=function(t){void 0===t&&(t=!1),this.node.active!=t&&(this.node.active?this.OnWillHid()&&(this.node.active=!1):this.OnWillShow()&&(this.node.active=!0))},e.prototype.Find=function(t){return cc.find(t,this.node)},e.prototype.GetComponent=function(t,e){var n=cc.find(t,this.node);return n?(n.addComponent,n.getComponent(e)):null},e.prototype.OnWillShow=function(){return!0},e.prototype.OnWillHid=function(){return!0},e.prototype.SetSibling=function(t){this.node.setSiblingIndex(t)},e.prototype.SetLastSibling=function(){if(this.node.parent){var t=this.node.parent.childrenCount;if(t>1){var e=this.node.parent.children[t-1];if(e==this.node)return;var n=e.getSiblingIndex()+1;this.SetSibling(n)}}},e.StringToVec2=function(t){if(!t)return cc.Vec2.ZERO;var e=0,n=0,o=t.split(",");return e=parseFloat(o[0]),n=parseFloat(o[1]),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),cc.v2(e,n)},e.prototype.SetFirstSibling=function(){this.node.parent&&this.SetSibling(-1)},s([c,a("GameTool/Transform")],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],UIBase:[function(t,e,n){"use strict";cc._RF.push(e,"fb029ZYf0lDQ6ceY+U96vxZ","UIBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Transform"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.AddClickListener=function(t,e,n){var o=null;if("string"==typeof t){if(!(o=cc.find(t,this.node)))return void console.warn("AddClickListener\uff1a\u8def\u5f84\u9519\u8bef "+t+" Node:"+this.node.name)}else t instanceof cc.Node&&(o=t);o?o.on(cc.Node.EventType.TOUCH_END,e,this,n):console.warn("AddClickListener\uff1a\u53c2\u6570\u9519\u8bef ")},e.prototype.PlaySound=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=null),!t)return-1;var o=cc.audioEngine.play(t,e,1);return o>=0&&n&&cc.audioEngine.setFinishCallback(o,n),o},s([a,u("GameUI/UI/UIBase")],e)}(r.default);n.default=l,cc._RF.pop()},{"./Transform":"Transform"}],UIButton:[function(t,e,n){"use strict";cc._RF.push(e,"38bf6uc4MhPqpedgfqFFfVd","UIButton");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ButtonEventData=n.ButtonClickType=void 0;var r,c=t("./Action"),a=t("./UIBase");(function(t){t[t.ClickDown=0]="ClickDown",t[t.Click=1]="Click",t[t.ClickUp=2]="ClickUp"})(r=n.ButtonClickType||(n.ButtonClickType={}));var u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=function(){function t(){this.Name="",this.Value=""}return s([p()],t.prototype,"Name",void 0),s([p()],t.prototype,"Value",void 0),s([l("ButtonEventData")],t)}();n.ButtonEventData=f;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.interactable=!0,e.clickChangeGraphs=!0,e.graphs=null,e.normal=null,e.press=null,e.Click=new c.Action,e.Down=new c.Action,e.Up=new c.Action,e.clickBeforeImage=null,e}return i(e,t),Object.defineProperty(e.prototype,"Interactable",{get:function(){return this.interactable},set:function(t){this.interactable=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;null==this.graphs&&(this.graphs=this.getComponent(cc.Sprite),this.graphs&&this.normal&&(this.graphs.spriteFrame=this.normal)),this.node.on(cc.Node.EventType.TOUCH_START,function(){t.interactable&&t.onDown()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){t.interactable&&(t.onClick(),t.onUp())},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.interactable&&t.onUp()},this)},e.prototype.AddEvent=function(t,e,n){if(void 0===n&&(n=null),e)switch(t){case r.Click:this.Click.AddListenner(n||this,e);break;case r.ClickDown:this.Down.AddListenner(n||this,e);break;case r.ClickUp:this.Up.AddListenner(n||this,e)}},e.prototype.RemoveClickListenner=function(t,e){if(e)switch(t){case r.Click:this.Click.RemoveListenner(e);break;case r.ClickDown:this.Down.RemoveListenner(e);break;case r.ClickUp:this.Up.RemoveListenner(e)}},e.prototype.onClick=function(){this.Click.Invoke(this)},e.prototype.onUp=function(){this.clickChangeGraphs&&this.setGraphc(this.clickBeforeImage),this.Up.Invoke(this)},e.prototype.onDown=function(){this.graphs&&(this.clickBeforeImage=this.graphs.spriteFrame),this.clickChangeGraphs&&this.setGraphc(this.press),this.Down.Invoke(this)},e.prototype.setGraphc=function(t){this.graphs&&t&&(this.graphs.spriteFrame=t)},s([p()],e.prototype,"interactable",void 0),s([p({tooltip:"\u6309\u94ae\u70b9\u51fb\u89e6\u53d1\u8bbe\u7f6e\u6309\u94ae\u7684\u663e\u793a\u6548\u679c"})],e.prototype,"clickChangeGraphs",void 0),s([p(cc.Sprite)],e.prototype,"graphs",void 0),s([p(cc.SpriteFrame)],e.prototype,"normal",void 0),s([p(cc.SpriteFrame)],e.prototype,"press",void 0),s([l,h("GameUI/UI/UIButton")],e)}(a.default);n.default=d,cc._RF.pop()},{"./Action":"Action","./UIBase":"UIBase"}],UICombo:[function(t,e,n){"use strict";cc._RF.push(e,"515a2h0GRJB7I4kSTo3MGal","UICombo");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ComboConfig=void 0;var r=t("../../AudioManager"),c=t("../../SPAnimation"),a=cc._decorator,u=a.ccclass,l=a.property,p=function(){function t(){this.Combo=1,this.ComboClip=null,this.ComboImage=null,this.Next=null}var e;return e=t,s([l()],t.prototype,"Combo",void 0),s([l(cc.AudioClip)],t.prototype,"ComboClip",void 0),s([l(cc.SpriteFrame)],t.prototype,"ComboImage",void 0),s([l(e)],t.prototype,"Next",void 0),s([u("ComboConfig")],t)}();n.ComboConfig=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_Combo=null,e.comboNode=null,e.action=null,e.comlbDes=null,e.ComboConfig=null,e.soundId=-1,e.lastSoundAction=null,e}return i(e,t),e.prototype.Init=function(){},e.prototype.ClearCombo=function(){this.comlbDes.spriteFrame=null},e.prototype.ShowCombo=function(t,e,n){var o=this;void 0===n&&(n=null),this.Show(!0),this.Play("animation"),this.comboNode.opacity=0,this.comboNode.scaleX=0,this.node.opacity=255,this.action&&this.action.stop(),this.lb_Combo.string=":"+t,this.action=cc.tween(this.comboNode).to(.25,{opacity:255,scaleX:.5}).delay(1.5).to(.2,{opacity:0},{progress:function(t,e,n,i){var s=cc.misc.lerp(t,e,i);return o.node.opacity=s,s}}).call(function(){o.Show(!1)}).start();var i=this.GetComboImage(t);i?(this.comlbDes.spriteFrame=i.ComboImage,e&&i.ComboClip?(this.lastSoundAction&&(cc.audioEngine.stop(this.soundId),this.lastSoundAction(),this.lastSoundAction=null),this.lastSoundAction=n,this.soundId=r.default.Play(i.ComboClip,!1,function(){o.lastSoundAction=null,null==n||n()})):null==n||n()):(this.comlbDes.spriteFrame=null,null==n||n())},e.prototype.GetComboImage=function(t){if(t<=1)return null;for(var e=this.ComboConfig;;){if(t<=e.Combo)return e;if(!e.Next)return e;if(t<e.Next.Combo)return e;e=e.Next}},s([l(cc.Label)],e.prototype,"lb_Combo",void 0),s([l(cc.Node)],e.prototype,"comboNode",void 0),s([l(cc.Sprite)],e.prototype,"comlbDes",void 0),s([l({type:p})],e.prototype,"ComboConfig",void 0),s([u],e)}(c.default);n.default=h,cc._RF.pop()},{"../../AudioManager":"AudioManager","../../SPAnimation":"SPAnimation"}],UIGameReward_Step:[function(t,e,n){"use strict";cc._RF.push(e,"2b174bNFZdD8LztYwL2e/WJ","UIGameReward_Step");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./UIGameReward"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.Reward=function(t,e,n,o,i){this.Show(!0),this.SetData(o,i),this.PlayRewardSound(),this.CreateStar_Line(e,t,200,this.complateTime,!1)},e.prototype.OnAnimationEnd=function(t){var e;void 0===t&&(t=null),null===(e=this.callBack)||void 0===e||e.call(this),t&&t.length&&t.forEach(function(t){t.Show(!1)})},s([a,u("GameUI/GameReward/UIGameReward_Step")],e)}(r.default);n.default=l,cc._RF.pop()},{"./UIGameReward":"UIGameReward"}],UIGameReward:[function(t,e,n){"use strict";cc._RF.push(e,"e50feeSwVNH9YQXGz9iXRxW","UIGameReward");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../SPAnimation"),c=t("../../TimeSystem"),a=t("../../UIBase"),u=t("./UIRewardStar"),l=cc._decorator,p=l.ccclass,h=l.property,f=l.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canBreak=!1,e.flyTarget=null,e.starPrefab=null,e.starTimer=new c.default,e.starPool=[],e.complateTime=1.5,e.spAnimation=null,e.animationName="default",e.soundClip=null,e.autoEnterNext=!1,e.canClick=!1,e.callBack=null,e.rewardSoundId=-1,e}return i(e,t),e.prototype.Init=function(){var t=this;this.AddClickListener(this.node,function(){t.canBreak?t.OnBreakAnimation():t.canClick&&t.OnBreakAnimation()}),this.spAnimation=this.getComponentInChildren(r.default),this.Show(!1)},e.prototype.CreateStar_Line=function(t,e,n,o,i){void 0===o&&(o=2),void 0===i&&(i=!1);for(var s=t%2==0?.5*n:0,r=e.x-Math.floor(t/2)*n+s,c=[],a=0;a<t;a++){var u=this.GetStar();u.node.active=!0,u.node.x=r+a*n,u.node.y=e.y,c.push(u)}this.MoveStar(c,2,o,i)},e.prototype.CreateStar_Circle=function(t,e,n,o,i,s,r,c){void 0===s&&(s=2),void 0===r&&(r=null),void 0===c&&(c=!1);var a=t%2==0?n/2:n;o=Math.floor(t/2)*n+a+o;for(var u=[],l=0;l<t;l++){o-=n;var p=Math.cos(o*Math.PI/180)*i+e.x,h=Math.sin(o*Math.PI/180)*i+e.y,f=this.GetStar();f.node.active=!0,f.node.x=p,f.node.y=h,u.push(f)}this.MoveStar(u,2,s,c)},e.prototype.MoveStar=function(t,e,n,o){void 0===n&&(n=0);var i=this;i.starTimer.Invoke(function(){var e=0,s=0;if(o&&t&&t.length>0)for(var r=0;r<t.length;r++)e+=.05,t[r].Fly(i.flyTarget.position,.5,e,function(){++s>=t.length&&i.starTimer.Invoke(function(){i.OnAnimationEnd()},n)});else i.starTimer.Invoke(function(){i.OnAnimationEnd(t)},n)},e)},e.prototype.GetStar=function(){for(var t=0;t<this.starPool.length;t++)if(this.starPool[t]&&!this.starPool[t].node.active)return this.starPool[t];var e=cc.instantiate(this.starPrefab).getComponent(u.default);return this.starPool.push(e),e},e.prototype.EixtButton=function(){this.OnAnimationEnd()},e.prototype.SetData=function(t,e,n){void 0===n&&(n=!0),this.callBack=e,this.canBreak=t,this.autoEnterNext=n,this.canClick=t},e.prototype.OnBreakAnimation=function(){this.OnAnimationEnd()},e.prototype.OnAnimationEnd=function(t){var e;void 0===t&&(t=null),this.Show(!1),null===(e=this.callBack)||void 0===e||e.call(this)},e.prototype.onDisable=function(){this.starTimer.CancelAllInvoke(),this.starPool.forEach(function(t){t&&t.node.isValid&&(t.StopMove(),t.node.destroy())}),this.starPool=[],this.unscheduleAllCallbacks(),cc.audioEngine.stop(this.rewardSoundId)},e.prototype.PlayRewardSound=function(){cc.audioEngine.stop(this.rewardSoundId),this.rewardSoundId=this.PlaySound(this.soundClip,!1)},e.prototype.PlaySpAnimation=function(){var t,e,n,o=this,i=null===(n=null===(e=null===(t=this.spAnimation)||void 0===t?void 0:t.Play(this.animationName))||void 0===e?void 0:e.animation)||void 0===n?void 0:n.duration;i=(i=(i||0)+this.complateTime)||.1,this.autoEnterNext?this.scheduleOnce(this.OnAnimationEnd,i):this.scheduleOnce(function(){o.canClick=!0},i)},s([h(cc.Node)],e.prototype,"flyTarget",void 0),s([h(cc.Node)],e.prototype,"starPrefab",void 0),s([h()],e.prototype,"complateTime",void 0),s([h()],e.prototype,"animationName",void 0),s([h(cc.AudioClip)],e.prototype,"soundClip",void 0),s([h()],e.prototype,"autoEnterNext",void 0),s([p,f("GameUI/GameReward/UIGameReward")],e)}(a.default);n.default=d,cc._RF.pop()},{"../../SPAnimation":"SPAnimation","../../TimeSystem":"TimeSystem","../../UIBase":"UIBase","./UIRewardStar":"UIRewardStar"}],UIInteractionGame:[function(t,e,n){"use strict";cc._RF.push(e,"54640V/6d1PEqcJM2pPznGg","UIInteractionGame");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./UIInteraction"),c=t("./VideoPlayer/GameController"),a=cc._decorator,u=a.ccclass,l=a.property,p=a.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameController=null,e.gameNode=null,e}return i(e,t),e.prototype.OnInit=function(){var t=this;this.node.on("btn_ComplateGame",function(){t.ComplateGame({star:0})},this)},e.prototype.EnterInteraction=function(){this.gameNode&&this.gameNode.destroy(),this.Show(!0),this.GameController&&this.GameController.Init()},e.prototype.ComplateGame=function(t){void 0===t&&(t=null)},s([l(c.default)],e.prototype,"GameController",void 0),s([u,p("GameUI/Interaction/UIInteractionGame")],e)}(r.default);n.default=h,cc._RF.pop()},{"./UIInteraction":"UIInteraction","./VideoPlayer/GameController":"GameController"}],UIInteraction:[function(t,e,n){"use strict";cc._RF.push(e,"1087dclXRJPLa74K3RDmz+2","UIInteraction");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./AudioManager"),c=t("./UIBase"),a=cc._decorator,u=a.ccclass,l=(a.property,a.menu),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.controller=null,e}return i(e,t),Object.defineProperty(e.prototype,"Controller",{get:function(){return this.controller},enumerable:!1,configurable:!0}),e.prototype.Init=function(t){this.controller=t,this.OnInit()},e.prototype.OnInit=function(){},e.prototype.OnPlaying=function(){},e.prototype.PlayTFSound=function(t,e){void 0===e&&(e=null),r.default.PlaySysSound(t?r.default.Right:r.default.Wrong,!1,e)},s([u,l("GameUI/Interaction/UIInteraction")],e)}(c.default);n.default=p,cc._RF.pop()},{"./AudioManager":"AudioManager","./UIBase":"UIBase"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"28ca8SeGiZDCq7xQxPQsdGz","UIManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Stack"),c=t("./GameMenu"),a=t("./Log"),u=cc._decorator,l=u.ccclass,p=u.property,h=u.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiStack=new r.default,e.allUI=new Map,e.startUI="",e.uiMask=null,e.a=0,e}var n;return i(e,t),n=e,Object.defineProperty(e,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e.prototype.ShowMask=function(t){this.uiMask&&this.uiMask.active!=t&&(this.uiMask.active=t)},e.prototype.onLoad=function(){n.instance=this,a.default.DColor("UIMamager \u88ab\u6ce8\u518c","#00ff00")},e.prototype.start=function(){var t=this;this.startUI?this.ShowUI(this.startUI,function(e){e||a.default.W("UIManager -> start\uff1a","\u521d\u59cbUI\u52a0\u8f7d\u5931\u8d25 "+t.startUI+";  Node:"+t.node.name)}):a.default.W("UIManager -> start\uff1a","\u521d\u59cbUI\u672a\u914d\u7f6e")},e.prototype.onDestroy=function(){this.node.children.forEach(function(t){t.removeFromParent(),a.default.DColor("UIMamager \u79fb\u9664 "+t.name,"#00ff00")}),n.instance=null,a.default.DColor("UIMamager \u88ab\u9500\u6bc1","#00ff00")},e.prototype.ShowUI=function(t,e){void 0===e&&(e=null);var n=this;this.GetUI(t,function(t){if(t){var o=n.uiStack.peek();if(t==o)return t.OnShow(),void(null==e||e(t));o&&o.IsShow&&o.OnPause(),n.uiStack.push(t),t.OnShow()}null==e||e(t)})},e.prototype.loadUI=function(t,e){a.default.D("UIManager -> loadUI","\u521d\u6b21\u52a0\u8f7dUI"+t),cc.resources.load("UI/"+t,cc.Prefab,function(n,o){var i=null;n?a.default.E("UIManager -> loadUI: \u52a0\u8f7d\u9519\u8bef name\uff1a",t+" "+JSON.stringify(n)):i=cc.instantiate(o),null==e||e(i)})},e.prototype.Close=function(t){if(void 0===t&&(t=null),t){for(var e=[];this.uiStack.size()>0;){if((o=this.uiStack.pop())==t){o.OnHid(),a.default.D("UIManager -> Close",o.Name+" CloseOnly");break}o&&e.push(o)}for(var n=e.length-1;n>=0;n--)this.uiStack.push(e[n])}else if(this.uiStack.size()>0){var o;(o=this.uiStack.pop()).OnHid(),a.default.D("UIManager -> Close",o.Name+" Close");var i=this.uiStack.peek();i?(i.OnReset(),a.default.D("UIManager -> Close",i.Name+" Reset Show")):a.default.W("UIManager -> Close","\u6808\u91cc\u6ca1\u6709UI")}},e.prototype.GetUI=function(t,e){var n=this;if(void 0===e&&(e=null),t){a.default.D("UIManager -> GetUI",t);var o=null,i=this;(o=this.allUI.get(t))?null==e||e(o):this.loadUI(t,function(s){!(o=n.allUI.get(t))&&s&&(s.setParent(i.node),s.position=cc.Vec3.ZERO,(o=s.getComponent(c.default))&&i.allUI.set(t,o)),null==e||e(o)})}else a.default.W("UIManager -> GetUI","ui\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")},e.CourseMenu="CourseMenu",e.SummaryMenu="SummaryMenu",e.ParentalLockMenu="ParentalLockMenu",e.AntiAddictionTimeMenu="AntiAddictionTimeMenu",e.SettingMenu="SettingMenu",e.MedalWallMenu="MedalWallMenu",e.AlertMenu="Alert",e.SectionLessonComplateMenu="SectionLessonComplateMenu",e.instance=null,s([p()],e.prototype,"startUI",void 0),s([p(cc.Node)],e.prototype,"uiMask",void 0),n=s([l,h("Manager/UIManager")],e)}(cc.Component);n.default=f,cc._RF.pop()},{"./GameMenu":"GameMenu","./Log":"Log","./Stack":"Stack"}],UIRewardStar:[function(t,e,n){"use strict";cc._RF.push(e,"db356MpAmdF2q7zv5U+uYpZ","UIRewardStar");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Transform"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flyTween=null,e}return i(e,t),e.prototype.Fly=function(t,e,n,o){var i=.75*this.node.scale;this.flyTween=cc.tween(this.node).to(e,{position:t,scale:i}).to(.5,{scale:0}).call(function(){null==o||o()}).start()},e.prototype.Destroy=function(){this.node&&(this.StopMove(),this.node.destroy())},e.prototype.StopMove=function(){this.flyTween&&this.flyTween.stop()},s([a,u("GameUI/GameReward/UIRewardStar")],e)}(r.default);n.default=l,cc._RF.pop()},{"../../Transform":"Transform"}],UIReward_GameEnd:[function(t,e,n){"use strict";cc._RF.push(e,"26355XH265J2ZBH/dnnRG4M","UIReward_GameEnd");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./UIGameReward"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.Reward=function(t,e,n,o){void 0===n&&(n=!1),void 0===o&&(o=null),this.Show(!0),this.SetData(n,o),this.PlayRewardSound(),this.PlaySpAnimation()},s([a,u("GameUI/GameReward/UIReward_GameEnd")],e)}(r.default);n.default=l,cc._RF.pop()},{"./UIGameReward":"UIGameReward"}],UIReward_LvEnd:[function(t,e,n){"use strict";cc._RF.push(e,"b39f7dsOjFJBp1Gy3QUpM4b","UIReward_LvEnd");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./UIGameReward"),c=cc._decorator,a=c.ccclass,u=(c.property,c.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.Init=function(){t.prototype.Init.call(this)},e.prototype.Reward=function(t,e,n,o,i){this.Show(!0),this.SetData(n,o,i),this.PlayRewardSound(),this.PlaySpAnimation()},s([a,u("GameUI/GameReward/UIReward_LvEnd")],e)}(r.default);n.default=l,cc._RF.pop()},{"./UIGameReward":"UIGameReward"}],ccplugin:[function(t,e){"use strict";cc._RF.push(e,"94e66sTxzxJB5GPHV2jxwQ+","ccplugin"),cc.sys.capabilities.touches=!0,cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.js.mixin(sp.Skeleton.prototype,{update:function(t){if(!this.paused)if(t*=this.timeScale*sp.timeScale,this.isAnimationCached()){if(this._isAniComplete){if(0===this._animationQueue.length&&!this._headAniInfo){var e=this._frameCache;if(e&&e.isInvalid()){e.updateToFrame();var n=e.frames;this._curFrame=n[n.length-1]}return}if(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=t,this._accTime>this._headAniInfo.delay){var o=this._headAniInfo;this._headAniInfo=null,this.setAnimation(0,o.animationName,o.loop)}return}this._updateCache(t)}else this._updateRealtime(t)}})}),cc._RF.pop()},{}]},{},["Action","AlertMenu","AlertMenuButton","AlertMenuConfig","AlertMenu_OKCancel","AlertMenu_Single","AssetLoadTest","AssetsLoder","AssetManager","Assets","Lesson","AudioManager","BGImageLoader","LayoutHeight","SwitchSp","GameMenu","M003AnimationSequence","M003AnimationType","M003AnswerAnimation","M003AnswerFollw","M003AnswerItem","M003AnswerTipsTool","M003Articulated","M003Effect","M003EffectCache","M003Game","M003GameAniamtion","M003GameUI","M003GuideAniamtion","M003Layout","M003PlotAnimation","M003QuestionBar","M003QuestionData","M003SPLoader","M003ScreenTouch","M003SettingData","M003Tips","M003UIManager","ImageLoader","InteractionController","LessonPerformance","Log","Config","Main","Logic","AnimPolt","Btn","FeedBack","Layout","OutTimer","QuesContet","Quit","Timer","Tool","M010_Logic","M010_Main","Game_Abstract","Game_Method","M_AnimLayer","M_Audio","M_ConfigT","M_Content","M_NodePool","M_Timer","M_Toast","M_Tool","M010_GameAction","M010_TimeCount","M017_Logic","M017_Main","M017_BackGround","M017_Content","M017_CountStart","M017_GameChild","M017_RewardAnim","M017_ConfigT","M017_NodePool","M017_OutTime","SPAnimation","SPLoder","ScreenTouchListener","Stack","TimeSystem","TimerEvent","Transform","UIBase","UIButton","UIInteraction","UIInteractionGame","UIManager","DrawCircleProgress","GameController","Collector","StarCollector","UICombo","UIGameReward","UIGameReward_Step","UIRewardStar","UIReward_GameEnd","UIReward_LvEnd","ccplugin"]);